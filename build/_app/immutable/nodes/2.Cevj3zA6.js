import{k as Xt,l as er,o as Kt,p as Rt,a as p,c as Te,t as w,q as F,s as V,b as bt,r as tr}from"../chunks/DaN96dIN.js";import{i as Fe}from"../chunks/idI3UDRs.js";import{h as Le,a as Lt,d as Mt,b as rr,E as ar,c as lr,aL as sr,ae as or,af as ir,P as At,O as Bt,H as dr,p as nr,Q as cr,ao as vr,aM as ur,u as Ht,r as Ft,f as We,j as r,s as a,k as t,t as ne,$ as Ae,i as Ve,g as Me,w as e,aN as Z,aO as Se,F as g,aP as je,ab as Wt,aQ as Et,x as br,aR as Vt,aS as fr}from"../chunks/DDLtgsC2.js";import{l as Be,p as I,s as De,i as P}from"../chunks/D_Rvj4zC.js";import"../chunks/rC_sNAdB.js";import{e as yt,i as wt,s as Ke,a as Tt,r as O,b as R,t as lt,c as pr}from"../chunks/B8pF-tgs.js";function gr(v,i,l,b,m,h){let n=Le;Le&&Lt();var s,_,u=null;Le&&Mt.nodeType===1&&(u=Mt,Lt());var T=Le?Mt:v,C;rr(()=>{const E=i()||null;var D=sr;E!==s&&(C&&(E===null?nr(C,()=>{C=null,_=null}):E===_?cr(C):vr(C)),E&&E!==_&&(C=lr(()=>{if(u=Le?u:document.createElementNS(D,E),Xt(u,u),b){Le&&er(E)&&u.append(document.createComment(""));var U=Le?or(u):u.appendChild(ir());Le&&(U===null?At(!1):Bt(U)),b(u,U)}dr.nodes_end=u,T.before(u)})),s=E,s&&(_=s))},ar),n&&(At(!0),Bt(T))}function W(v,i,l=i){var b=ur();Kt(v,"input",m=>{var h=m?v.defaultValue:v.value;if(h=$t(v)?Ct(h):h,l(h),b&&h!==(h=i())){var n=v.selectionStart,s=v.selectionEnd;v.value=h??"",s!==null&&(v.selectionStart=n,v.selectionEnd=Math.min(s,v.value.length))}}),(Le&&v.defaultValue!==v.value||Ht(i)==null&&v.value)&&l($t(v)?Ct(v.value):v.value),Ft(()=>{var m=i();$t(v)&&m===Ct(v.value)||v.type==="date"&&!m&&!v.value||m!==v.value&&(v.value=m??"")})}function ft(v,i,l=i){Kt(v,"change",b=>{var m=b?v.defaultChecked:v.checked;l(m)}),(Le&&v.defaultChecked!==v.checked||Ht(i)==null)&&l(v.checked),Ft(()=>{var b=i();v.checked=!!b})}function $t(v){var i=v.type;return i==="number"||i==="range"}function Ct(v){return v===""?null:+v}function mr(v){return function(...i){var l=i[0];return l.stopPropagation(),v==null?void 0:v.apply(this,i)}}/**
 * @license lucide-svelte v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var hr=Rt("<svg><!><!></svg>");function Je(v,i){const l=Be(i,["children","$$slots","$$events","$$legacy"]),b=Be(l,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);We(i,!1);let m=I(i,"name",8,void 0),h=I(i,"color",8,"currentColor"),n=I(i,"size",8,24),s=I(i,"strokeWidth",8,2),_=I(i,"absoluteStrokeWidth",8,!1),u=I(i,"iconNode",24,()=>[]);const T=(...z)=>z.filter((A,J,N)=>!!A&&N.indexOf(A)===J).join(" ");Fe();var C=hr();let E;var D=r(C);yt(D,1,u,wt,(z,A)=>{let J=()=>e(A)[0],N=()=>e(A)[1];var G=Te(),X=Me(G);gr(X,J,!0,(Y,oe)=>{let q;ne(()=>q=Tt(Y,q,{...N()}))}),p(z,G)});var U=a(D);Ke(U,i,"default",{},null),t(C),ne((z,A)=>E=Tt(C,E,{...xr,...b,width:n(),height:n(),stroke:h(),"stroke-width":z,class:A}),[()=>_()?Number(s())*24/Number(n()):s(),()=>T("lucide-icon","lucide",m()?`lucide-${m()}`:"",l.class)],Ae),p(v,C),Ve()}function yr(v,i){const l=Be(i,["children","$$slots","$$events","$$legacy"]);Je(v,De({name:"circle-plus"},()=>l,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M8 12h8"}],["path",{d:"M12 8v8"}]],children:(m,h)=>{var n=Te(),s=Me(n);Ke(s,i,"default",{},null),p(m,n)},$$slots:{default:!0}}))}function wr(v,i){const l=Be(i,["children","$$slots","$$events","$$legacy"]);Je(v,De({name:"folder-sync"},()=>l,{iconNode:[["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v.5"}],["path",{d:"M12 10v4h4"}],["path",{d:"m12 14 1.535-1.605a5 5 0 0 1 8 1.5"}],["path",{d:"M22 22v-4h-4"}],["path",{d:"m22 18-1.535 1.605a5 5 0 0 1-8-1.5"}]],children:(m,h)=>{var n=Te(),s=Me(n);Ke(s,i,"default",{},null),p(m,n)},$$slots:{default:!0}}))}function Ot(v,i){const l=Be(i,["children","$$slots","$$events","$$legacy"]);Je(v,De({name:"power"},()=>l,{iconNode:[["path",{d:"M12 2v10"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04"}]],children:(m,h)=>{var n=Te(),s=Me(n);Ke(s,i,"default",{},null),p(m,n)},$$slots:{default:!0}}))}function Dt(v,i){const l=Be(i,["children","$$slots","$$events","$$legacy"]);Je(v,De({name:"printer"},()=>l,{iconNode:[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1"}]],children:(m,h)=>{var n=Te(),s=Me(n);Ke(s,i,"default",{},null),p(m,n)},$$slots:{default:!0}}))}function _r(v,i){const l=Be(i,["children","$$slots","$$events","$$legacy"]);Je(v,De({name:"refresh-cw"},()=>l,{iconNode:[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]],children:(m,h)=>{var n=Te(),s=Me(n);Ke(s,i,"default",{},null),p(m,n)},$$slots:{default:!0}}))}function kr(v,i){const l=Be(i,["children","$$slots","$$events","$$legacy"]);Je(v,De({name:"settings"},()=>l,{iconNode:[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]],children:(m,h)=>{var n=Te(),s=Me(n);Ke(s,i,"default",{},null),p(m,n)},$$slots:{default:!0}}))}function It(v,i){const l=Be(i,["children","$$slots","$$events","$$legacy"]);Je(v,De({name:"wifi-off"},()=>l,{iconNode:[["path",{d:"M12 20h.01"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764"}],["path",{d:"m2 2 20 20"}]],children:(m,h)=>{var n=Te(),s=Me(n);Ke(s,i,"default",{},null),p(m,n)},$$slots:{default:!0}}))}function Ut(v,i){const l=Be(i,["children","$$slots","$$events","$$legacy"]);Je(v,De({name:"wifi"},()=>l,{iconNode:[["path",{d:"M12 20h.01"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0"}]],children:(m,h)=>{var n=Te(),s=Me(n);Ke(s,i,"default",{},null),p(m,n)},$$slots:{default:!0}}))}const Xe="http://printpi:8080";var Pr=w('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Sr=w('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Mr=w('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Zero</span>'),$r=w('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Zero</span>'),Cr=w('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Er=w('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Nr=w('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),jr=w('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),zr=w('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Zero</span>'),Lr=w('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Ar=w('<svg class=" animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span class="text-white">Adding...</span>',1),Br=w('<span class="text-white">Add Product</span>'),Tr=w(`<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"><div class="p-6 border-b flex justify-between items-center"><h2 class="text-xl font-bold text-gray-800">Add Product</h2> <button class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex-1 overflow-y-auto p-6"><div class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">SKU</label></div> <input type="text"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">IM SKU</label> <!></div> <input type="text"></div></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Product Name</label> <!></div> <input type="text"></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="text-black block text-sm font-medium text-gray-700">Selling Price (£)</label> <!></div> <input type="number" step="0.01"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Purchase Price (£)</label> <!></div> <input type="number" step="0.01"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Seller</label> <!></div> <input type="text"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Location</label> <!></div> <input type="text"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Date Bought</label> <!></div> <input type="text"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Date Sold</label> <!></div> <input type="text"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Commission (£)</label> <!></div> <input type="number" step="0.01"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Invoice No</label> <!></div> <input type="text"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><label class="block text-sm font-medium text-gray-700 mb-1">On Website</label> <div class="flex items-center mt-2"><input type="checkbox" id="onWebsite" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"> <label for="onWebsite" class="ml-2 block text-sm text-gray-900">Published on website</label></div></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">Sold Status</label> <div class="flex items-center"><input type="checkbox" id="soldCheckbox" class="text-black h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"> <label for="soldCheckbox" class="ml-2 block text-sm text-gray-900">Mark as sold</label></div></div></div> <div class="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg"><div class="flex items-center text-yellow-800"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <span class="font-medium">Note on empty fields</span></div> <p class="text-sm text-yellow-700 mt-2">Yellow highlighted fields are empty or contain zero values. These fields are not required, 
                        but you may want to review them before saving.</p></div></div></div> <div class="p-6 border-t flex justify-end space-x-3"><button class="px-5 py-2.5 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50">Cancel</button> <button><!></button></div></div></div>`);function Or(v,i){We(i,!1),I(i,"saveEditedProduct",8);let l=I(i,"showAddProductModal",12),b=I(i,"products",8),m=Z(!1);function h(o){const B=o.match(/^([A-Za-z\s]*)(\d+)([A-Za-z]*)$/);if(!B)return console.error("Invalid SKU format:",o),o;const Qe=B[1],ct=parseInt(B[2],10),vt=B[3],He=ct+1;return`${Qe}${He}${vt}`}let n=b()[b().length-1].sku;console.log(n);let s=Z({id:h(n),name:"",price:0,imSKU:"",sku:h(n),purchasePrice:0,seller:"",dateBought:"",sold:!1,commission:0,dateSold:"",invoiceNo:"",onWebsite:!1,location:""});async function _(){g(m,!0);try{const o=await fetch(Xe+"/add_product",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({product:e(s)})});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const B=await o.json();lt.success("Product added successfully!"),l(!1)}catch(o){console.error("Failed to add product:",o),lt.error("Failed to add product. Please try again.")}finally{g(m,!1)}}function u(o){return o===""||o===0||o===null||o===void 0}Fe();var T=Tr(),C=r(T),E=r(C),D=a(r(E),2);t(E);var U=a(E,2),z=r(U),A=r(z),J=r(A),N=a(r(J),2);O(N),R(N,1,"border-gray-300 bg-gray-100 text-black/50 w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-not-allowed"),t(J);var G=a(J,2),X=r(G),Y=a(r(X),2);{var oe=o=>{var B=Pr();p(o,B)};P(Y,o=>{u(e(s).imSKU)&&o(oe)})}t(X);var q=a(X,2);O(q),t(G),t(A);var ce=a(A,2),ve=r(ce),S=a(r(ve),2);{var j=o=>{var B=Sr();p(o,B)};P(S,o=>{u(e(s).name)&&o(j)})}t(ve);var ye=a(ve,2);O(ye),t(ce);var xe=a(ce,2),ue=r(xe),be=r(ue),ae=a(r(be),2);{var fe=o=>{var B=Mr();p(o,B)};P(ae,o=>{e(s).price===0&&o(fe)})}t(be);var ee=a(be,2);O(ee),t(ue);var le=a(ue,2),ie=r(le),te=a(r(ie),2);{var d=o=>{var B=$r();p(o,B)};P(te,o=>{e(s).purchasePrice===0&&o(d)})}t(ie);var c=a(ie,2);O(c),t(le),t(xe);var M=a(xe,2),k=r(M),H=r(k),x=a(r(H),2);{var y=o=>{var B=Cr();p(o,B)};P(x,o=>{u(e(s).seller)&&o(y)})}t(H);var L=a(H,2);O(L),t(k);var K=a(k,2),de=r(K),pe=a(r(de),2);{var we=o=>{var B=Er();p(o,B)};P(pe,o=>{u(e(s).location)&&o(we)})}t(de);var _e=a(de,2);O(_e),t(K),t(M);var $e=a(M,2),Ce=r($e),ge=r(Ce),Ee=a(r(ge),2);{var ze=o=>{var B=Nr();p(o,B)};P(Ee,o=>{u(e(s).dateBought)&&o(ze)})}t(ge);var Ne=a(ge,2);O(Ne),t(Ce);var Pe=a(Ce,2),$=r(Pe),me=a(r($),2);{var he=o=>{var B=jr();p(o,B)};P(me,o=>{u(e(s).dateSold)&&o(he)})}t($);var Q=a($,2);O(Q),t(Pe),t($e);var ke=a($e,2),Oe=r(ke),Ie=r(Oe),se=a(r(Ie),2);{var Re=o=>{var B=zr();p(o,B)};P(se,o=>{e(s).commission===0&&o(Re)})}t(Ie);var Ze=a(Ie,2);O(Ze),t(Oe);var pt=a(Oe,2),st=r(pt),et=a(r(st),2);{var ot=o=>{var B=Lr();p(o,B)};P(et,o=>{u(e(s).invoiceNo)&&o(ot)})}t(st);var qe=a(st,2);O(qe),t(pt),t(ke);var tt=a(ke,2),it=r(tt),gt=a(r(it),2),Ge=r(gt);O(Ge),Se(2),t(gt),t(it);var dt=a(it,2),rt=a(r(dt),2),mt=r(rt);O(mt),Se(2),t(rt),t(dt),t(tt),Se(2),t(z),t(U);var xt=a(U,2),Ye=r(xt),Ue=a(Ye,2);let at;var nt=r(Ue);{var _t=o=>{var B=Ar();Se(2),p(o,B)},kt=o=>{var B=Br();p(o,B)};P(nt,o=>{e(m)?o(_t):o(kt,!1)})}t(Ue),t(xt),t(C),t(T),ne((o,B,Qe,ct,vt,He,ht,ut)=>{R(q,1,o),R(ye,1,B),R(ee,1,`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${e(s).price===0?"border-yellow-400 bg-yellow-50":"border-gray-300"}`),R(c,1,`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${e(s).purchasePrice===0?"border-yellow-400 bg-yellow-50":"border-gray-300"}`),R(L,1,Qe),R(_e,1,ct),R(Ne,1,vt),R(Q,1,He),R(Ze,1,`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${e(s).commission===0?"border-yellow-400 bg-yellow-50":"border-gray-300"}`),R(qe,1,ht),at=R(Ue,1,"px-5 py-2.5 rounded-lg flex items-center justify-center min-w-[120px] disabled:opacity-50 disabled:cursor-not-allowed",null,at,ut),Ue.disabled=e(m)},[()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${u(e(s).imSKU)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                            ${u(e(s).name)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${u(e(s).seller)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${u(e(s).location)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${u(e(s).dateBought)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${u(e(s).dateSold)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${u(e(s).invoiceNo)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>({"bg-blue-600":!e(m),"bg-gray-400":e(m),"hover:bg-blue-700":!e(m)})],Ae),F("click",D,()=>{l(!1)}),W(N,()=>e(s).sku,o=>je(s,e(s).sku=o)),W(q,()=>e(s).imSKU,o=>je(s,e(s).imSKU=o)),W(ye,()=>e(s).name,o=>je(s,e(s).name=o)),W(ee,()=>e(s).price,o=>je(s,e(s).price=o)),W(c,()=>e(s).purchasePrice,o=>je(s,e(s).purchasePrice=o)),W(L,()=>e(s).seller,o=>je(s,e(s).seller=o)),W(_e,()=>e(s).location,o=>je(s,e(s).location=o)),W(Ne,()=>e(s).dateBought,o=>je(s,e(s).dateBought=o)),W(Q,()=>e(s).dateSold,o=>je(s,e(s).dateSold=o)),W(Ze,()=>e(s).commission,o=>je(s,e(s).commission=o)),W(qe,()=>e(s).invoiceNo,o=>je(s,e(s).invoiceNo=o)),ft(Ge,()=>e(s).onWebsite,o=>je(s,e(s).onWebsite=o)),ft(mt,()=>e(s).sold,o=>je(s,e(s).sold=o)),F("click",Ye,()=>{l(!1)}),F("click",Ue,_),p(v,T),Ve()}var Ir=w('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Ur=w('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Kr=w('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Rr=w('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Zero</span>'),Hr=w('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Zero</span>'),Fr=w('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Wr=w('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Vr=w('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Dr=w('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Jr=w('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Zero</span>'),Zr=w('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),qr=w(`<div class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">SKU</label> <!></div> <input type="text" disabled></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">IM SKU</label> <!></div> <input type="text"></div></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Product Name</label> <!></div> <input type="text"></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="text-black block text-sm font-medium text-gray-700">Selling Price (£)</label> <!></div> <input type="number" step="0.01"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Purchase Price (£)</label> <!></div> <input type="number" step="0.01"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Seller</label> <!></div> <input type="text"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Location</label> <!></div> <input type="text"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Date Bought</label> <!></div> <input type="text"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Date Sold</label> <!></div> <input type="text"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Commission (£)</label> <!></div> <input type="number" step="0.01"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Invoice No</label> <!></div> <input type="text"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><label class="block text-sm font-medium text-gray-700 mb-1">On Website</label> <div class="flex items-center mt-2"><input type="checkbox" id="onWebsite" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded svelte-1mfa054"> <label for="onWebsite" class="ml-2 block text-sm text-gray-900">Published on website</label></div></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">Sold Status</label> <div class="flex items-center"><input type="checkbox" id="soldCheckbox" class="text-black h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded svelte-1mfa054"> <label for="soldCheckbox" class="ml-2 block text-sm text-gray-900">Mark as sold</label></div></div></div> <div class="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg svelte-1mfa054"><div class="flex items-center text-yellow-800"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <span class="font-medium">Note on empty fields</span></div> <p class="text-sm text-yellow-700 mt-2">Yellow highlighted fields are empty or contain zero values. These fields are not required, 
                                but you may want to review them before saving.</p></div></div>`),Gr=w('<div class="bg-gray-50 p-4 rounded-lg mb-4"><div class="flex items-center"><svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path></svg> <h3 class="font-medium">Label Preview</h3></div> <p class="text-sm text-gray-600 mt-1">This is a preview of how the label will look</p></div> <div class="border border-gray-300 rounded-lg p-6 max-w-xs mx-auto"><div class="text-center mb-4"><div class="text-xl font-bold">Iain Marr Antiques</div> <div class="text-xs text-gray-500">Est. 1990</div></div> <div class="text-center mb-2"><div class="font-semibold text-lg"> </div> <div class="text-2xl font-bold text-blue-700"> </div></div> <div class="flex justify-between text-xs mt-4"><div> </div> <div> </div></div> <div class="mt-6 text-center text-xs text-gray-500"><div> </div> <div> </div></div></div>',1),Yr=w('<svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white svelte-1mfa054" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span class="text-white">Saving...</span>',1),Qr=w('<span class="text-white">Save Changes</span>'),Xr=w('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"><div class="p-6 border-b flex justify-between items-center"><h2 class="text-xl font-bold text-gray-800">Edit Product</h2> <button class="text-gray-400 hover:text-gray-600 svelte-1mfa054"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>  <div class="flex-1 overflow-y-auto p-6"><!></div> <div class="p-6 border-t flex justify-end space-x-3"><button class="px-5 py-2.5 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50 svelte-1mfa054">Cancel</button> <button><!></button></div></div></div>');function ea(v,i){We(i,!1);let l=I(i,"editedProduct",12),b=I(i,"showEditProductModal",12),m=I(i,"activeTab",8),h=I(i,"products",12),n=Z(!1),s=Z(null);function _(S){return S===""||S===0||S===null||S===void 0}function u(){return JSON.stringify(e(s))!==JSON.stringify(l())}async function T(S){try{const j=await fetch(Xe+"/modify_product",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({editedProduct:S})});if(!j.ok)throw new Error(`HTTP error! status: ${j.status}`);return await j.json()}catch(j){throw console.error("Failed to update product:",j),new Error("Failed to update product. Please try again later.")}}async function C(){if(u()){g(n,!0);try{await T(l()),h(h().map(S=>S.id===l().id?l():S)),g(s,JSON.parse(JSON.stringify(l()))),lt.success("Product updated successfully!"),b(!1)}catch(S){console.error("Save error:",S),lt.error(S.message||"Failed to update product","error")}finally{g(n,!1)}}}Wt(()=>{l()&&(g(s,JSON.parse(JSON.stringify(l()))),console.log(e(s)))}),Et(()=>(br(l()),e(s)),()=>{l()&&!e(s)&&g(s,JSON.parse(JSON.stringify(l())))}),Vt(),Fe();var E=Xr(),D=r(E),U=r(D),z=a(r(U),2);t(U);var A=a(U,2),J=r(A);{var N=S=>{var j=Te(),ye=Me(j);{var xe=be=>{var ae=qr(),fe=r(ae),ee=r(fe),le=r(ee),ie=a(r(le),2);{var te=f=>{var re=Ir();p(f,re)};P(ie,f=>{_(l().sku)&&f(te)})}t(le);var d=a(le,2);O(d),t(ee);var c=a(ee,2),M=r(c),k=a(r(M),2);{var H=f=>{var re=Ur();p(f,re)};P(k,f=>{_(l().imSKU)&&f(H)})}t(M);var x=a(M,2);O(x),t(c),t(fe);var y=a(fe,2),L=r(y),K=a(r(L),2);{var de=f=>{var re=Kr();p(f,re)};P(K,f=>{_(l().name)&&f(de)})}t(L);var pe=a(L,2);O(pe),t(y);var we=a(y,2),_e=r(we),$e=r(_e),Ce=a(r($e),2);{var ge=f=>{var re=Rr();p(f,re)};P(Ce,f=>{l().price===0&&f(ge)})}t($e);var Ee=a($e,2);O(Ee),t(_e);var ze=a(_e,2),Ne=r(ze),Pe=a(r(Ne),2);{var $=f=>{var re=Hr();p(f,re)};P(Pe,f=>{l().purchasePrice===0&&f($)})}t(Ne);var me=a(Ne,2);O(me),t(ze),t(we);var he=a(we,2),Q=r(he),ke=r(Q),Oe=a(r(ke),2);{var Ie=f=>{var re=Fr();p(f,re)};P(Oe,f=>{_(l().seller)&&f(Ie)})}t(ke);var se=a(ke,2);O(se),t(Q);var Re=a(Q,2),Ze=r(Re),pt=a(r(Ze),2);{var st=f=>{var re=Wr();p(f,re)};P(pt,f=>{_(l().location)&&f(st)})}t(Ze);var et=a(Ze,2);O(et),t(Re),t(he);var ot=a(he,2),qe=r(ot),tt=r(qe),it=a(r(tt),2);{var gt=f=>{var re=Vr();p(f,re)};P(it,f=>{_(l().dateBought)&&f(gt)})}t(tt);var Ge=a(tt,2);O(Ge),t(qe);var dt=a(qe,2),rt=r(dt),mt=a(r(rt),2);{var xt=f=>{var re=Dr();p(f,re)};P(mt,f=>{_(l().dateSold)&&f(xt)})}t(rt);var Ye=a(rt,2);O(Ye),t(dt),t(ot);var Ue=a(ot,2),at=r(Ue),nt=r(at),_t=a(r(nt),2);{var kt=f=>{var re=Jr();p(f,re)};P(_t,f=>{l().commission===0&&f(kt)})}t(nt);var o=a(nt,2);O(o),t(at);var B=a(at,2),Qe=r(B),ct=a(r(Qe),2);{var vt=f=>{var re=Zr();p(f,re)};P(ct,f=>{_(l().invoiceNo)&&f(vt)})}t(Qe);var He=a(Qe,2);O(He),t(B),t(Ue);var ht=a(Ue,2),ut=r(ht),Nt=a(r(ut),2),Pt=r(Nt);O(Pt),Se(2),t(Nt),t(ut);var jt=a(ut,2),zt=a(r(jt),2),St=r(zt);O(St),Se(2),t(zt),t(jt),t(ht),Se(2),t(ae),ne((f,re,Jt,Zt,qt,Gt,Yt,Qt)=>{R(d,1,f,"svelte-1mfa054"),R(x,1,re,"svelte-1mfa054"),x.disabled=e(n),R(pe,1,Jt,"svelte-1mfa054"),pe.disabled=e(n),R(Ee,1,`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${l().price===0?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,"svelte-1mfa054"),Ee.disabled=e(n),R(me,1,`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${l().purchasePrice===0?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,"svelte-1mfa054"),me.disabled=e(n),R(se,1,Zt,"svelte-1mfa054"),se.disabled=e(n),R(et,1,qt,"svelte-1mfa054"),et.disabled=e(n),R(Ge,1,Gt,"svelte-1mfa054"),Ge.disabled=e(n),R(Ye,1,Yt,"svelte-1mfa054"),Ye.disabled=e(n),R(o,1,`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${l().commission===0?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,"svelte-1mfa054"),o.disabled=e(n),R(He,1,Qt,"svelte-1mfa054"),He.disabled=e(n),Pt.disabled=e(n),St.disabled=e(n)},[()=>`text-black/50 w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-not-allowed
                                        ${_(l().sku)?"border-yellow-400 bg-yellow-50":"border-gray-300 bg-gray-100"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${_(l().imSKU)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                    ${_(l().name)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${_(l().seller)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${_(l().location)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${_(l().dateBought)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${_(l().dateSold)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${_(l().invoiceNo)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`],Ae),W(d,()=>l().sku,f=>l(l().sku=f,!0)),W(x,()=>l().imSKU,f=>l(l().imSKU=f,!0)),W(pe,()=>l().name,f=>l(l().name=f,!0)),W(Ee,()=>l().price,f=>l(l().price=f,!0)),W(me,()=>l().purchasePrice,f=>l(l().purchasePrice=f,!0)),W(se,()=>l().seller,f=>l(l().seller=f,!0)),W(et,()=>l().location,f=>l(l().location=f,!0)),W(Ge,()=>l().dateBought,f=>l(l().dateBought=f,!0)),W(Ye,()=>l().dateSold,f=>l(l().dateSold=f,!0)),W(o,()=>l().commission,f=>l(l().commission=f,!0)),W(He,()=>l().invoiceNo,f=>l(l().invoiceNo=f,!0)),ft(Pt,()=>l().onWebsite,f=>l(l().onWebsite=f,!0)),ft(St,()=>l().sold,f=>l(l().sold=f,!0)),p(be,ae)},ue=be=>{var ae=Gr(),fe=a(Me(ae),2),ee=a(r(fe),2),le=r(ee),ie=r(le,!0);t(le);var te=a(le,2),d=r(te);t(te),t(ee);var c=a(ee,2),M=r(c),k=r(M);t(M);var H=a(M,2),x=r(H);t(H),t(c);var y=a(c,2),L=r(y),K=r(L,!0);t(L);var de=a(L,2),pe=r(de,!0);t(de),t(y),t(fe),ne((we,_e)=>{V(ie,l().name),V(d,`£${we??""}`),V(k,`SKU: ${l().sku??""}`),V(x,`IM: ${l().imSKU??""}`),V(K,l().location),V(pe,_e)},[()=>l().price.toFixed(2),()=>new Date().toLocaleDateString("en-GB")],Ae),p(be,ae)};P(ye,be=>{m()==="products"?be(xe):be(ue,!1)})}p(S,j)};P(J,S=>{l()&&S(N)})}t(A);var G=a(A,2),X=r(G),Y=a(X,2);let oe;var q=r(Y);{var ce=S=>{var j=Yr();Se(2),p(S,j)},ve=S=>{var j=Qr();p(S,j)};P(q,S=>{e(n)?S(ce):S(ve,!1)})}t(Y),t(G),t(D),t(E),ne((S,j)=>{z.disabled=e(n),X.disabled=e(n),oe=R(Y,1,"px-5 py-2.5 rounded-lg flex items-center justify-center min-w-[120px] disabled:opacity-50 disabled:cursor-not-allowed svelte-1mfa054",null,oe,S),Y.disabled=j},[()=>({"bg-blue-600":!e(n)&&u(),"bg-gray-400":!u()||e(n),"hover:bg-blue-700":!e(n)&&u()}),()=>!u()||e(n)],Ae),F("click",z,()=>{b(!1)}),F("click",X,()=>{b(!1)}),F("click",Y,C),p(v,E),Ve()}var ta=w('<div class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><label class="block text-sm font-medium text-gray-700 mb-1">SKU</label> <input type="text" class="text-black/50 w-full px-4 py-2.5 rounded-lg border border-gray-300 bg-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-not-allowed" disabled></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">IM SKU</label> <input type="text" class="text-black w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">Product Name</label> <input type="text" class="text-black w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div> <div><label class="text-black block text-sm font-medium text-gray-700 mb-1">Selling Price (£)</label> <input type="number" step="0.01" class="text-black w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div></div>'),ra=w('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"><div class="p-6 border-b flex justify-between items-center"><h2 class="text-xl font-bold text-gray-800">Edit Product</h2> <button class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex-1 overflow-y-auto p-6"><!></div> <div class="p-6 border-t flex justify-end space-x-3"><button class="px-5 py-2.5 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50">Cancel</button> <button class="px-5 py-2.5 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700">Save Changes</button></div></div></div>');function aa(v,i){We(i,!1);let l=I(i,"showEditPrintModal",12),b=I(i,"editedProduct",12),m=I(i,"selectedProducts",12);function h(){b()&&(m(m().map(A=>A.id===b().id?b():A)),b(null),l(!1))}Fe();var n=ra(),s=r(n),_=r(s),u=a(r(_),2);t(_);var T=a(_,2),C=r(T);{var E=A=>{var J=ta(),N=r(J),G=r(N),X=a(r(G),2);O(X),t(G);var Y=a(G,2),oe=a(r(Y),2);O(oe),t(Y),t(N);var q=a(N,2),ce=a(r(q),2);O(ce),t(q);var ve=a(q,2),S=a(r(ve),2);O(S),t(ve),t(J),W(X,()=>b().sku,j=>b(b().sku=j,!0)),W(oe,()=>b().imSKU,j=>b(b().imSKU=j,!0)),W(ce,()=>b().name,j=>b(b().name=j,!0)),W(S,()=>b().price,j=>b(b().price=j,!0)),p(A,J)};P(C,A=>{b()&&A(E)})}t(T);var D=a(T,2),U=r(D),z=a(U,2);t(D),t(s),t(n),F("click",u,()=>{l(!1)}),F("click",U,()=>{l(!1)}),F("click",z,h),p(v,n),Ve()}var la=w('<p class="text-sm text-gray-500 mt-1">Click the X button to remove items from the list</p>'),sa=w('<span class="ml-2 px-2 py-0.5 bg-red-100 text-red-800 text-xs rounded-full">Sold</span>'),oa=w('<div><div class="flex-1 min-w-0"><div class="flex items-center"><h3 class="font-semibold text-gray-800 truncate"> </h3> <!></div> <div class="flex items-center mt-1 text-sm"><span class="font-medium text-blue-600"> </span> <span class="mx-2 text-gray-300">•</span> <span class="text-gray-600 truncate"> </span></div></div> <div class="flex items-center space-x-2"><button class="p-2 bg-blue-50 rounded-full hover:bg-blue-100 transition-colors flex items-center group" title="Edit Print Info"><svg class="w-5 h-5 text-blue-600 group-hover:text-blue-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg> <span class="ml-1 text-sm font-medium text-blue-600 group-hover:text-blue-800 hidden md:inline">Edit</span></button> <button class="p-2 bg-red-50 rounded-full hover:bg-red-100 transition-colors flex items-center group" title="Remove from list"><svg class="w-5 h-5 text-red-500 group-hover:text-red-700" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> <span class="ml-1 text-sm font-medium text-red-500 group-hover:text-red-700 hidden md:inline">Remove</span></button></div></div>'),ia=w('<div class="text-center py-8"><svg class="w-16 h-16 mx-auto text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"></path></svg> <h3 class="mt-4 text-lg font-medium text-gray-900">No products selected</h3> <p class="mt-1 text-gray-500">Select items from your inventory to print receipts</p></div>'),da=w('<svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span class="text-white">Printing...</span>',1),na=w('<span class="text-white"> </span>'),ca=w('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"><div class="p-6 border-b flex justify-between items-center"><h2 class="text-xl font-bold text-gray-800">Print Receipts</h2> <button class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex-1 overflow-y-auto p-6"><div class="mb-6"><label for="customerName" class="block text-sm font-medium text-gray-700 mb-2">Customer Name (Optional)</label> <input id="customerName" type="text" placeholder="Enter customer name for receipt" class="w-full px-4 py-2 border text-black border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"> <p class="mt-1 text-sm text-gray-500">The customer name will be printed on the receipt if provided.</p></div>  <div class="mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200 cursor-pointer"><div class="flex items-center"><input id="markAsSold" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"> <div class="ml-2 block text-sm font-medium text-gray-700">Mark as Sold and Add to Sold Inventory</div></div> <p class="mt-1 text-sm text-blue-600"><!></p></div> <div><div class="mb-4"><p class="text-gray-600"> </p> <!></div> <div class="space-y-3 max-h-96 overflow-y-auto"></div></div></div> <div class="p-6 border-t flex justify-end space-x-3"><button class="px-5 py-2.5 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50">Back</button> <button><!></button></div></div></div> <!>',1);function va(v,i){We(i,!1);let l=I(i,"showPrintModal",12),b=I(i,"selectedProducts",12),m=I(i,"products",12),h=Z(!1),n=Z(),s=Z(null),_=Z(""),u=Z(!0);async function T(){g(h,!0);try{const x=await fetch(Xe+"/print_labels",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({selectedProducts:b(),customerName:e(_),logSold:e(u)})}),y=await x.json();if(!x.ok)throw y.error?new Error(y.error):new Error(`HTTP error! status: ${x.status}`);if(e(u)){const L=new Set(b().map(K=>K.id));m(m().map(K=>L.has(K.id)?{...K,sold:!0}:K)),b(b().map(K=>({...K,sold:!0})))}lt.success(`Successfully printed ${b().length} label(s)!`),b([]),g(_,""),g(u,!1),l(!1)}catch(x){console.error("Failed to print labels",x),lt.error(x.message||"Failed to print labels. Please check the console for details.")}finally{g(h,!1)}}function C(x){b(b().filter(y=>y.id!==x.id))}Fe();var E=ca(),D=Me(E),U=r(D),z=r(U),A=a(r(z),2);t(z);var J=a(z,2),N=r(J),G=a(r(N),2);O(G),Se(2),t(N);var X=a(N,2),Y=r(X),oe=r(Y);O(oe),Se(2),t(Y);var q=a(Y,2),ce=r(q);{var ve=x=>{var y=bt("Items will be marked as sold in your inventory and added to the sold items sheet.");p(x,y)},S=x=>{var y=bt("Items will remain available in your inventory after printing.");p(x,y)};P(ce,x=>{e(u)?x(ve):x(S,!1)})}t(q),t(X);var j=a(X,2),ye=r(j),xe=r(ye),ue=r(xe);t(xe);var be=a(xe,2);{var ae=x=>{var y=la();p(x,y)};P(be,x=>{b().length>0&&x(ae)})}t(ye);var fe=a(ye,2);yt(fe,5,b,wt,(x,y)=>{var L=oa(),K=r(L),de=r(K),pe=r(de),we=r(pe,!0);t(pe);var _e=a(pe,2);{var $e=he=>{var Q=sa();p(he,Q)};P(_e,he=>{e(y).sold&&he($e)})}t(de);var Ce=a(de,2),ge=r(Ce),Ee=r(ge);t(ge);var ze=a(ge,4),Ne=r(ze,!0);t(ze),t(Ce),t(K);var Pe=a(K,2),$=r(Pe),me=a($,2);t(Pe),t(L),ne(he=>{R(L,1,`flex items-center p-3 border rounded-lg hover:bg-gray-50
                ${e(y).sold?"bg-red-50 border-red-200":""}`),V(we,e(y).name),V(Ee,`£${he??""}`),V(Ne,e(y).sku)},[()=>e(y).price.toFixed(2)],Ae),F("click",$,()=>{g(s,e(y)),g(n,!0)}),F("click",me,()=>C(e(y))),p(x,L)},x=>{var y=ia();p(x,y)}),t(fe),t(j),t(J);var ee=a(J,2),le=r(ee),ie=a(le,2);let te;var d=r(ie);{var c=x=>{var y=da();Se(2),p(x,y)},M=x=>{var y=na(),L=r(y,!0);t(y),ne(()=>V(L,e(u)?"Print & Mark Sold":"Print Receipts")),p(x,y)};P(d,x=>{e(h)?x(c):x(M,!1)})}t(ie),t(ee),t(U),t(D);var k=a(D,2);{var H=x=>{aa(x,{get showEditPrintModal(){return e(n)},set showEditPrintModal(y){g(n,y)},get editedProduct(){return e(s)},set editedProduct(y){g(s,y)},get selectedProducts(){return b()},set selectedProducts(y){b(y)},$$legacy:!0})};P(k,x=>{e(n)&&x(H)})}ne(x=>{V(ue,`You're about to print Receipts for ${b().length??""} products.`),te=R(ie,1,"px-5 py-2.5 rounded-lg flex items-center justify-center min-w-[120px] disabled:opacity-50 disabled:cursor-not-allowed",null,te,x),ie.disabled=e(h)||b().length===0},[()=>({"bg-blue-600":!e(h),"bg-gray-400":e(h),"hover:bg-blue-700":!e(h)})],Ae),F("click",A,()=>{l(!1),g(_,""),g(u,!1)}),W(G,()=>e(_),x=>g(_,x)),ft(oe,()=>e(u),x=>g(u,x)),F("click",X,()=>{g(u,!e(u))}),F("click",le,()=>{l(!1),g(_,""),g(u,!1)}),F("click",ie,T),p(v,E),Ve()}var ua=w('<div class="absolute top-14 right-3 px-2 py-1 bg-red-100 text-red-800 text-xs font-bold rounded-full">SOLD</div>'),ba=w('<div><!> <div class="p-4"><div class="flex justify-between items-start"><div class="pr-2  w-[79%]"><h3 class="font-semibold text-gray-800 truncate"> </h3> <div class="mt-1"><span class="text-xl font-bold text-blue-600"> </span></div></div> <button title="Edit Print Info"><svg class="w-5 h-5 text-blue-600 group-hover:text-blue-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg> <span class="ml-1 text-sm font-medium text-blue-600 group-hover:text-blue-800 hidden md:inline">Edit</span></button></div> <div class="mt-3 space-y-2 text-sm text-gray-600"><div class="flex items-center"><svg class="w-4 h-4 mr-1 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path></svg> <span> </span></div> <div class="flex items-center"><svg class="w-4 h-4 mr-1 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path></svg> <span> </span></div> <div class="flex items-center"><svg class="w-4 h-4 mr-1 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <span class="truncate"> </span></div> <div class="flex items-center"><svg class="w-4 h-4 mr-1 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> <span class="truncate"> </span></div></div></div> <div> </div></div>'),fa=w('<div class="col-span-full text-center py-12"><div class="text-gray-400 mb-4"><svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <h3 class="text-xl font-semibold text-gray-700">No products found</h3> <p class="text-gray-500 mt-2"> </p></div>'),pa=w('<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>');function ga(v,i){We(i,!1);let l=I(i,"filteredProducts",8),b=I(i,"selectedProducts",8),m=I(i,"toggleProduct",8),h=I(i,"openEditModal",8),n=I(i,"showSoldItems",8);Fe();var s=pa();yt(s,5,l,wt,(_,u)=>{var T=ba(),C=r(T);{var E=te=>{var d=ua();p(te,d)};P(C,te=>{e(u).sold&&te(E)})}var D=a(C,2),U=r(D),z=r(U),A=r(z),J=r(A,!0);t(A);var N=a(A,2),G=r(N),X=r(G);t(G),t(N),t(z);var Y=a(z,2);R(Y,1,"p-2 bg-blue-50 rounded-full hover:bg-blue-100 transition-colors flex items-center group "),t(U);var oe=a(U,2),q=r(oe),ce=a(r(q),2),ve=r(ce);t(ce),t(q);var S=a(q,2),j=a(r(S),2),ye=r(j);t(j),t(S);var xe=a(S,2),ue=a(r(xe),2),be=r(ue);t(ue),t(xe);var ae=a(xe,2),fe=a(r(ae),2),ee=r(fe);t(fe),t(ae),t(oe),t(D);var le=a(D,2),ie=r(le,!0);t(le),t(T),ne((te,d,c)=>{R(T,1,te),V(J,e(u).name),V(X,`£${d??""}`),V(ve,`SKU: ${e(u).sku??""}`),V(ye,`IM SKU: ${e(u).imSKU??""}`),V(be,`Seller: ${e(u).seller??""}`),V(ee,`Location: ${e(u).location??""}`),R(le,1,c),V(ie,e(u).sold?"Sold - Selected":"Selected")},[()=>`bg-white rounded-xl shadow-md overflow-hidden border-2 transition-all duration-200 relative cursor-pointer
                ${b().find(te=>te.id===e(u).id)?"border-blue-500 shadow-lg":"border-transparent"}`,()=>e(u).price.toFixed(2),()=>`py-1 text-center text-sm font-medium
                ${b().find(te=>te.id===e(u).id)?e(u).sold?"bg-red-100 text-red-700":"bg-blue-50 text-blue-700":"hidden"}`],Ae),F("click",Y,mr(()=>h()(e(u)))),F("click",T,()=>m()(e(u))),p(_,T)},_=>{var u=fa(),T=a(r(u),4),C=r(T,!0);t(T),t(u),ne(()=>V(C,n()?"No sold items match your search":"No available items match your search")),p(_,u)}),t(s),p(v,s),Ve()}var ma=Rt('<svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>'),xa=w("<button><span> </span> <!></button>"),ha=w('<div class="animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-500"></div>'),ya=w('<div class="animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-500 mr-2"></div>'),wa=w('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-2xl shadow-xl w-full max-w-md"><div class="p-6 border-b flex justify-between items-center"><h2 class="text-xl font-bold text-gray-800">System Settings</h2> <button class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 space-y-4"><div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg text-black"><div class="flex items-center"><!> <span>Printer Status:</span></div> <span class="font-medium"><!></span></div> <button class="w-full flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"><!> </button> <button class="w-full flex items-center justify-center px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors"><!> Restart Raspberry Pi</button> <button class="w-full flex items-center justify-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"><!> Shutdown Raspberry Pi</button></div></div></div>'),_a=w('<div class="bg-white rounded-xl shadow-lg p-4 mb-2"><div class="relative mb-4"><div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"><svg class="w-5 h-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div> <input type="text" class="text-black w-full pl-10 pr-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Search by name, SKU, seller or location..."></div> <div class="flex flex-wrap gap-2 mt-2 justify-between items-center"><div class="flex flex-wrap gap-2"></div> <div class="flex flex-wrap gap-2 items-center"><div class="flex items-center mr-2"><!></div> <button class="flex items-center min-w-[220px] px-4 py-2.5 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"><!> </button> <button class="px-4 py-2.5 rounded-lg font-medium flex items-center bg-green-600/80 text-white hover:bg-green-600 transition-colors" title="Refresh stock"><!></button> <button class="px-4 py-2.5 rounded-lg font-medium flex items-center bg-green-600/80 text-white hover:bg-green-600 transition-colors" title="Add stock"><!></button> <button class="px-4 py-2.5 rounded-lg font-medium flex items-center bg-gray-600/80 text-white hover:bg-gray-600 transition-colors" title="Settings"><!></button></div></div></div> <!>',1);function ka(v,i){We(i,!1);let l=I(i,"searchTerm",12,""),b=I(i,"fetchProducts",8),m=I(i,"showPrintModal",12),h=I(i,"selectedProducts",8),n=I(i,"showAddProductModal",12),s=I(i,"handleSort",8),_=I(i,"sortConfig",8),u=I(i,"sortOptions",24,()=>[]),T=Z(!1),C=I(i,"printerConnected",12),E=Z(!1);async function D(){g(E,!0);try{const d=await fetch(`${Xe}/reconnect_printer`);if(d.ok){const c=await d.json();C(c.connected)}else C(!1)}catch(d){console.error("Failed to check printer status:",d),C(!1)}finally{g(E,!1)}}async function U(){try{(await fetch(`${Xe}/restart`,{method:"POST"})).ok?alert("Raspberry Pi is restarting..."):alert("Failed to restart Raspberry Pi")}catch(d){console.error("Failed to restart Pi:",d),alert("Failed to restart Raspberry Pi")}}async function z(){if(confirm("Are you sure you want to shutdown the Raspberry Pi?"))try{(await fetch(`${Xe}/shutdown`,{method:"POST"})).ok?alert("Raspberry Pi is shutting down..."):alert("Failed to shutdown Raspberry Pi")}catch(d){console.error("Failed to shutdown Pi:",d),alert("Failed to shutdown Raspberry Pi")}}Fe();var A=_a(),J=Me(A),N=r(J),G=a(r(N),2);O(G),t(N);var X=a(N,2),Y=r(X);yt(Y,5,u,wt,(d,c)=>{var M=xa(),k=r(M),H=r(k,!0);t(k);var x=a(k,2);{var y=L=>{var K=ma();ne(()=>R(K,0,`ml-1.5 w-4 h-4 ${_().direction==="asc"?"":"transform rotate-180"}`)),p(L,K)};P(x,L=>{_().key===e(c).id&&L(y)})}t(M),ne(()=>{R(M,1,`px-3 py-1.5 text-sm rounded-full border transition-colors flex items-center
                  ${_().key===e(c).id?"bg-blue-100 border-blue-300 text-blue-700":"bg-gray-100 border-gray-200 text-gray-700 hover:bg-gray-200"}`),V(H,e(c).name)}),F("click",M,()=>s()(e(c).id)),p(d,M)}),t(Y);var oe=a(Y,2),q=r(oe),ce=r(q);{var ve=d=>{var c=ha();p(d,c)},S=(d,c)=>{{var M=H=>{Ut(H,{size:20,class:"text-green-500"})},k=H=>{It(H,{size:20,class:"text-red-500"})};P(d,H=>{C()?H(M):H(k,!1)},c)}};P(ce,d=>{e(E)?d(ve):d(S,!1)})}t(q);var j=a(q,2),ye=r(j);Dt(ye,{size:30,class:"mr-2"});var xe=a(ye);t(j);var ue=a(j,2),be=r(ue);wr(be,{size:30,class:""}),t(ue);var ae=a(ue,2),fe=r(ae);yr(fe,{size:30,class:""}),t(ae);var ee=a(ae,2),le=r(ee);kr(le,{size:30,class:""}),t(ee),t(oe),t(X),t(J);var ie=a(J,2);{var te=d=>{var c=wa(),M=r(c),k=r(M),H=a(r(k),2);t(k);var x=a(k,2),y=r(x),L=r(y),K=r(L);{var de=Q=>{var ke=ya();p(Q,ke)},pe=(Q,ke)=>{{var Oe=se=>{Ut(se,{size:20,class:"text-green-500 mr-2"})},Ie=se=>{It(se,{size:20,class:"text-red-500 mr-2"})};P(Q,se=>{C()?se(Oe):se(Ie,!1)},ke)}};P(K,Q=>{e(E)?Q(de):Q(pe,!1)})}Se(2),t(L);var we=a(L,2),_e=r(we);{var $e=Q=>{var ke=bt("Checking...");p(Q,ke)},Ce=(Q,ke)=>{{var Oe=se=>{var Re=bt("Connected");p(se,Re)},Ie=se=>{var Re=bt("Disconnected");p(se,Re)};P(Q,se=>{C()?se(Oe):se(Ie,!1)},ke)}};P(_e,Q=>{e(E)?Q($e):Q(Ce,!1)})}t(we),t(y);var ge=a(y,2),Ee=r(ge);const ze=Ae(()=>e(E)?"animate-spin ":"");_r(Ee,{size:18,get class(){return`mr-2 ${e(ze)??""}`}});var Ne=a(Ee);t(ge);var Pe=a(ge,2),$=r(Pe);Ot($,{size:18,class:"mr-2"}),Se(),t(Pe);var me=a(Pe,2),he=r(me);Ot(he,{size:18,class:"mr-2"}),Se(),t(me),t(x),t(M),t(c),ne(()=>{ge.disabled=e(E),V(Ne,` ${(e(E)?"Reconnecting...":"Reconnect Printer")??""}`)}),F("click",H,()=>g(T,!1)),F("click",ge,D),F("click",Pe,U),F("click",me,z),p(d,c)};P(ie,d=>{e(T)&&d(te)})}ne(()=>{pr(q,"title",C()?"Printer connected":"Printer disconnected"),j.disabled=h().length===0,V(xe,` Print Selected (${h().length??""})`)}),W(G,l),F("click",j,()=>{m(!0)}),F("click",ue,function(...d){var c;(c=b())==null||c.apply(this,d)}),F("click",ae,()=>{n(!0)}),F("click",ee,()=>g(T,!0)),p(v,A),Ve()}var Pa=w('<div class="flex justify-center items-center h-64"><div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"></div> <span class="ml-3 text-gray-600">Loading products...</span></div>'),Sa=w('<div class="bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-red-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><p class="text-sm text-red-700"> </p> <button class="mt-2 px-3 py-1 bg-red-100 text-red-700 rounded text-sm hover:bg-red-200">Retry</button></div></div></div>'),Ma=w('<div class="mt-6 flex justify-center"><button class="px-4 py-2 text-sm font-medium rounded-lg border border-gray-300 hover:bg-gray-50 text-gray-700"> </button></div>'),$a=w('<!> <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"><div class="bg-white rounded-xl shadow p-5"><div class="text-gray-500 flex items-center"><svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg> <span class="font-medium">Total Items</span></div> <div class="text-3xl text-black font-bold mt-2"> </div></div> <div class="bg-white rounded-xl shadow p-5"><div class="text-gray-500 flex items-center"><svg class="w-6 h-6 mr-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="font-medium">Available</span></div> <div class="text-3xl font-bold mt-2 text-black"> </div></div> <div class="bg-white rounded-xl shadow p-5"><div class="text-gray-500 flex items-center"><svg class="w-6 h-6 mr-2 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="font-medium">Sold</span></div> <div class="text-3xl font-bold mt-2 text-black"> </div></div></div> <!> <!>',1),Ca=w('<button class="fab-enter fixed bottom-6 right-6 z-50 p-4 bg-blue-600 rounded-full shadow-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 text-white flex items-center justify-center svelte-7fy406"><!> <span class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center"> </span></button>'),Ea=w('<div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 p-4 md:p-8"><div class="max-w-7xl mx-auto"><div class="mb-8 text-center"><h1 class="text-3xl md:text-4xl font-bold text-gray-800">Iain Marr Antiques</h1> <p class="text-gray-600 mt-2">Inventory Management System</p></div> <!></div> <!> <!> <!> <!></div>');function Ta(v,i){We(i,!1);const l=Z(),b=Z();let m=Z([]),h=Z([]),n=Z(""),s=Z(!1),_=Z(!1),u=Z(null),T=Z("products"),C=Z(!1),E=Z(!1),D=Z(null),U=Z(!0),z=Z({key:"sku",direction:"asc"}),A=Z([{id:"sku",name:"SKU"},{id:"name",name:"Name"},{id:"price",name:"Price"}]),J=Z();const N=(d,c,M="")=>d[c]!==void 0&&d[c]!==""?d[c]:M;async function G(){try{g(E,!0),g(D,null);const d=await fetch(Xe+"/get_stock",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({})});if(!d.ok)throw new Error(`HTTP error! status: ${d.status}`);const c=await d.json(),M=c.data;g(J,c.printer_connected),g(m,M.map(k=>({id:N(k,"SKU NO.",""),name:N(k,"ITEM DESCRIPTION",""),price:Number(N(k,"SELLING PRICE",0)),imSKU:N(k,"IM SKU",""),sku:N(k,"SKU NO.",""),purchasePrice:Number(N(k,"PURCHASE PRICE",0)),seller:N(k,"NAME/ADDRESS SELLER",""),dateBought:N(k,"DATE BOUGHT",""),sold:N(k,"SOLD","FALSE")==="TRUE",commission:N(k,"Commission £",0),dateSold:N(k,"DATE SOLD",""),invoiceNo:N(k,"INVOICE NO. XERO",""),onWebsite:N(k,"ON WEBSITE","FALSE")==="TRUE",location:N(k,"location","")})))}catch(d){console.error("Failed to fetch products:",d),g(D,"Failed to load products. Please try again later.")}finally{g(E,!1)}}Wt(G);function X(d){let c="asc";e(z).key===d&&e(z).direction==="asc"&&(c="desc"),g(z,{key:d,direction:c})}function Y(d){e(h).find(c=>c.id===d.id)?g(h,e(h).filter(c=>c.id!==d.id)):g(h,[...e(h),{...d}])}function oe(){e(h).length===e(b).length?g(h,[]):g(h,[...e(b)])}function q(d){g(u,{...d}),g(T,"products"),g(s,!0)}function ce(){g(C,!0)}Et(()=>(e(m),e(z)),()=>{g(l,[...e(m)].sort((d,c)=>{let M=d[e(z).key],k=c[e(z).key];if(e(z).key==="sku")return e(z).direction==="asc"?0:-1;if(typeof M=="number"&&typeof k=="number")return e(z).direction==="asc"?M-k:k-M;if(typeof M=="string"&&typeof k=="string"){if(M=M.toLowerCase(),k=k.toLowerCase(),M<k)return e(z).direction==="asc"?-1:1;if(M>k)return e(z).direction==="asc"?1:-1}return 0}))}),Et(()=>(e(l),e(U),e(n)),()=>{g(b,e(l).filter(d=>(e(U)||!d.sold)&&(String(d.name||"").toLowerCase().includes(e(n).toLowerCase())||String(d.imSKU||"").toLowerCase().includes(e(n).toLowerCase())||String(d.sku||"").toLowerCase().includes(e(n).toLowerCase())||String(d.seller||"").toLowerCase().includes(e(n).toLowerCase())||String(d.location||"").toLowerCase().includes(e(n).toLowerCase()))))}),Vt(),Fe();var ve=Ea();tr(d=>{fr.title="Iain Marr Antiques"});var S=r(ve),j=a(r(S),2);{var ye=d=>{var c=Pa();p(d,c)},xe=(d,c)=>{{var M=H=>{var x=Sa(),y=r(x),L=a(r(y),2),K=r(L),de=r(K,!0);t(K);var pe=a(K,2);t(L),t(y),t(x),ne(()=>V(de,e(D))),F("click",pe,G),p(H,x)},k=H=>{var x=$a(),y=Me(x);ka(y,{handleSort:X,openPrintModal:ce,fetchProducts:G,get printerConnected(){return e(J)},set printerConnected($){g(J,$)},get sortConfig(){return e(z)},set sortConfig($){g(z,$)},get sortOptions(){return e(A)},set sortOptions($){g(A,$)},get showAddProductModal(){return e(_)},set showAddProductModal($){g(_,$)},get searchTerm(){return e(n)},set searchTerm($){g(n,$)},get showSoldItems(){return e(U)},set showSoldItems($){g(U,$)},get showPrintModal(){return e(C)},set showPrintModal($){g(C,$)},get selectedProducts(){return e(h)},set selectedProducts($){g(h,$)},$$legacy:!0});var L=a(y,2),K=r(L),de=a(r(K),2),pe=r(de,!0);t(de),t(K);var we=a(K,2),_e=a(r(we),2),$e=r(_e,!0);t(_e),t(we);var Ce=a(we,2),ge=a(r(Ce),2),Ee=r(ge,!0);t(ge),t(Ce),t(L);var ze=a(L,2);ga(ze,{toggleProduct:Y,openEditModal:q,get filteredProducts(){return e(b)},set filteredProducts($){g(b,$)},get selectedProducts(){return e(h)},set selectedProducts($){g(h,$)},get showSoldItems(){return e(U)},set showSoldItems($){g(U,$)},$$legacy:!0});var Ne=a(ze,2);{var Pe=$=>{var me=Ma(),he=r(me),Q=r(he,!0);t(he),t(me),ne(()=>V(Q,e(h).length===e(b).length?"Deselect All":"Select All")),F("click",he,oe),p($,me)};P(Ne,$=>{e(b).length>0&&$(Pe)})}ne(($,me)=>{V(pe,e(m).length),V($e,$),V(Ee,me)},[()=>e(m).filter($=>!$.sold).length,()=>e(m).filter($=>$.sold).length],Ae),p(H,x)};P(d,H=>{e(D)?H(M):H(k,!1)},c)}};P(j,d=>{e(E)?d(ye):d(xe,!1)})}t(S);var ue=a(S,2);{var be=d=>{var c=Ca(),M=r(c);Dt(M,{size:30});var k=a(M,2),H=r(k,!0);t(k),t(c),ne(()=>V(H,e(h).length)),F("click",c,ce),p(d,c)};P(ue,d=>{e(h).length>0&&d(be)})}var ae=a(ue,2);{var fe=d=>{ea(d,{get editedProduct(){return e(u)},set editedProduct(c){g(u,c)},get showEditProductModal(){return e(s)},set showEditProductModal(c){g(s,c)},get activeTab(){return e(T)},set activeTab(c){g(T,c)},get products(){return e(m)},set products(c){g(m,c)},$$legacy:!0})};P(ae,d=>{e(s)&&d(fe)})}var ee=a(ae,2);{var le=d=>{Or(d,{get showAddProductModal(){return e(_)},set showAddProductModal(c){g(_,c)},get products(){return e(m)},set products(c){g(m,c)},$$legacy:!0})};P(ee,d=>{e(_)&&d(le)})}var ie=a(ee,2);{var te=d=>{va(d,{get selectedProducts(){return e(h)},set selectedProducts(c){g(h,c)},get showPrintModal(){return e(C)},set showPrintModal(c){g(C,c)},get products(){return e(m)},set products(c){g(m,c)},$$legacy:!0})};P(ie,d=>{e(C)&&d(te)})}t(ve),p(v,ve),Ve()}export{Ta as component};
