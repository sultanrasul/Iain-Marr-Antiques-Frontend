import{k as it,l as nt,o as $e,p as ct,c as Ce,a as j,t as K,s as k,q as z,r as vt}from"../chunks/0CMQfg7Z.js";import{i as ye}from"../chunks/BeKQhX7B.js";import{h as fe,a as Re,d as Ne,b as ut,E as bt,c as gt,aK as ft,ae as xt,af as mt,P as De,O as Fe,H as pt,p as ht,Q as _t,ao as wt,aL as yt,u as Je,r as Qe,s as ke,x as t,t as we,z as r,y as e,v as te,$ as Me,w as Pe,l as s,aM as Be,aN as $,F as x,ab as kt,aO as We,aP as Pt,aQ as St}from"../chunks/BIvejz7r.js";import{l as Ee,p as _,s as Xe,i as ee}from"../chunks/CqEeePiw.js";import{e as Ie,i as ze,s as Ue,a as Ve,b as _e,r as F}from"../chunks/BEquNJGV.js";function Mt(d,l,a,n,c,v){let u=fe;fe&&Re();var g,w,i=null;fe&&Ne.nodeType===1&&(i=Ne,Re());var m=fe?Ne:d,S;ut(()=>{const P=l()||null;var C=ft;P!==g&&(S&&(P===null?ht(S,()=>{S=null,w=null}):P===w?_t(S):wt(S)),P&&P!==w&&(S=gt(()=>{if(i=fe?i:document.createElementNS(C,P),it(i,i),n){fe&&nt(P)&&i.append(document.createComment(""));var M=fe?xt(i):i.appendChild(mt());fe&&(M===null?De(!1):Fe(M)),n(i,M)}pt.nodes_end=i,m.before(i)})),g=P,g&&(w=g))},bt),u&&(De(!0),Fe(m))}function q(d,l,a=l){var n=yt();$e(d,"input",c=>{var v=c?d.defaultValue:d.value;if(v=Le(d)?Te(v):v,a(v),n&&v!==(v=l())){var u=d.selectionStart,g=d.selectionEnd;d.value=v??"",g!==null&&(d.selectionStart=u,d.selectionEnd=Math.min(g,d.value.length))}}),(fe&&d.defaultValue!==d.value||Je(l)==null&&d.value)&&a(Le(d)?Te(d.value):d.value),Qe(()=>{var c=l();Le(d)&&c===Te(d.value)||d.type==="date"&&!c&&!d.value||c!==d.value&&(d.value=c??"")})}function Ge(d,l,a=l){$e(d,"change",n=>{var c=n?d.defaultChecked:d.checked;a(c)}),(fe&&d.defaultChecked!==d.checked||Je(l)==null)&&a(d.checked),Qe(()=>{var n=l();d.checked=!!n})}function Le(d){var l=d.type;return l==="number"||l==="range"}function Te(d){return d===""?null:+d}function Et(d){return function(...l){var a=l[0];return a.stopPropagation(),d==null?void 0:d.apply(this,l)}}/**
 * @license lucide-svelte v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var jt=ct("<svg><!><!></svg>");function Ye(d,l){const a=Ee(l,["children","$$slots","$$events","$$legacy"]),n=Ee(a,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);ke(l,!1);let c=_(l,"name",8,void 0),v=_(l,"color",8,"currentColor"),u=_(l,"size",8,24),g=_(l,"strokeWidth",8,2),w=_(l,"absoluteStrokeWidth",8,!1),i=_(l,"iconNode",24,()=>[]);const m=(...f)=>f.filter((N,O,W)=>!!N&&W.indexOf(N)===O).join(" ");ye();var S=jt();let P;var C=t(S);Ie(C,1,i,ze,(f,N)=>{let O=()=>s(N)[0],W=()=>s(N)[1];var R=Ce(),G=we(R);Mt(G,O,!0,(re,ae)=>{let U;te(()=>U=Ve(re,U,{...W()}))}),j(f,R)});var M=r(C);Ue(M,l,"default",{},null),e(S),te((f,N)=>P=Ve(S,P,{...Ct,...n,width:u(),height:u(),stroke:v(),"stroke-width":f,class:N}),[()=>w()?Number(g())*24/Number(u()):g(),()=>m("lucide-icon","lucide",c()?`lucide-${c()}`:"",a.class)],Me),j(d,S),Pe()}function Nt(d,l){const a=Ee(l,["children","$$slots","$$events","$$legacy"]);Ye(d,Xe({name:"folder-sync"},()=>a,{iconNode:[["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v.5"}],["path",{d:"M12 10v4h4"}],["path",{d:"m12 14 1.535-1.605a5 5 0 0 1 8 1.5"}],["path",{d:"M22 22v-4h-4"}],["path",{d:"m22 18-1.535 1.605a5 5 0 0 1-8-1.5"}]],children:(c,v)=>{var u=Ce(),g=we(u);Ue(g,l,"default",{},null),j(c,u)},$$slots:{default:!0}}))}function Lt(d,l){const a=Ee(l,["children","$$slots","$$events","$$legacy"]);Ye(d,Xe({name:"printer"},()=>a,{iconNode:[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1"}]],children:(c,v)=>{var u=Ce(),g=we(u);Ue(g,l,"default",{},null),j(c,u)},$$slots:{default:!0}}))}var Tt=K('<div class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><label class="block text-sm font-medium text-gray-700 mb-1">SKU</label> <input type="text" class="text-black/50 w-full px-4 py-2.5 rounded-lg border border-gray-300 bg-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-not-allowed" disabled></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">IM SKU</label> <input type="text" class="text-black w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">Product Name</label> <input type="text" class="text-black w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><label class="text-black block text-sm font-medium text-gray-700 mb-1">Selling Price (£)</label> <input type="number" step="0.01" class="text-black w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">Purchase Price (£)</label> <input type="number" step="0.01" class="text-black w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><label class="block text-sm font-medium text-gray-700 mb-1">Seller</label> <input type="text" class="text-black w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">Location</label> <input type="text" class="text-black w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><label class="block text-sm font-medium text-gray-700 mb-1">Date Bought</label> <input type="text" class="text-black w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">On Website</label> <div class="flex items-center mt-2"><input type="checkbox" id="onWebsite" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"> <label for="onWebsite" class="ml-2 block text-sm text-gray-900">Published on website</label></div></div></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">Sold Status</label> <div class="flex items-center"><input type="checkbox" id="soldCheckbox" class="text-black h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"> <label for="soldCheckbox" class="ml-2 block text-sm text-gray-900">Mark as sold</label></div></div></div>'),Bt=K('<div class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-3 gap-6"><div class="bg-blue-50 p-4 rounded-lg"><div class="text-sm text-blue-700">Profit Potential</div> <div class="text-xl font-bold text-blue-800"> </div></div> <div class="bg-green-50 p-4 rounded-lg"><div class="text-sm text-green-700">Commission</div> <div class="text-xl font-bold text-green-800"> </div></div> <div class="bg-purple-50 p-4 rounded-lg"><div class="text-sm text-purple-700">Net Value</div> <div class="text-xl font-bold text-purple-800"> </div></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><label class="block text-sm font-medium text-gray-700 mb-1">Commission (£)</label> <input type="number" step="0.01" class="text-black w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">Date Sold</label> <input type="text" class="text-black w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">Invoice No</label> <input type="text" class="text-black w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div> <div class="bg-yellow-50 p-4 rounded-lg mt-4"><div class="text-sm text-yellow-700">Financial Summary</div> <div class="mt-2 space-y-1"><div class="flex justify-between"><span>Purchase Price:</span> <span> </span></div> <div class="flex justify-between"><span>Selling Price:</span> <span> </span></div> <div class="flex justify-between"><span>Commission:</span> <span> </span></div> <div class="flex justify-between border-t border-gray-300 pt-1 font-medium"><span>Net Profit:</span> <span> </span></div></div></div></div>'),It=K('<div class="bg-gray-50 p-4 rounded-lg mb-4"><div class="flex items-center"><svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path></svg> <h3 class="font-medium">Label Preview</h3></div> <p class="text-sm text-gray-600 mt-1">This is a preview of how the label will look</p></div> <div class="border border-gray-300 rounded-lg p-6 max-w-xs mx-auto"><div class="text-center mb-4"><div class="text-xl font-bold">Iain Marr Antiques</div> <div class="text-xs text-gray-500">Est. 1990</div></div> <div class="text-center mb-2"><div class="font-semibold text-lg"> </div> <div class="text-2xl font-bold text-blue-700"> </div></div> <div class="flex justify-between text-xs mt-4"><div> </div> <div> </div></div> <div class="mt-6 text-center text-xs text-gray-500"><div> </div> <div> </div></div></div>',1),zt=K('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"><div class="p-6 border-b flex justify-between items-center"><h2 class="text-xl font-bold text-gray-800">Edit Product</h2> <button class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="border-b"><div class="flex"><button>Product Details</button> <button>Financial Details</button> <button>Print Preview</button></div></div> <div class="flex-1 overflow-y-auto p-6"><!></div> <div class="p-6 border-t flex justify-end space-x-3"><button class="px-5 py-2.5 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50"> </button> <button class="px-5 py-2.5 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50">Cancel</button> <button class="px-5 py-2.5 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700">Save Changes</button></div></div></div>');function Ut(d,l){ke(l,!1);let a=_(l,"editedProduct",12),n=_(l,"showEditProductModal",12),c=_(l,"activeTab",12),v=_(l,"saveEditedProduct",8);_(l,"printSelected",8),_(l,"selectedProducts",8),_(l,"openEditModal",8);const u=p=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(p);ye();var g=zt(),w=t(g),i=t(w),m=r(t(i),2);e(i);var S=r(i,2),P=t(S),C=t(P),M=r(C,2),f=r(M,2);e(P),e(S);var N=r(S,2),O=t(N);{var W=p=>{var I=Ce(),X=we(I);{var se=J=>{var ne=Tt(),Y=t(ne),Z=t(Y),o=r(t(Z),2);F(o),e(Z);var b=r(Z,2),h=r(t(b),2);F(h),e(b),e(Y);var V=r(Y,2),T=r(t(V),2);F(T),e(V);var B=r(V,2),y=t(B),A=r(t(y),2);F(A),e(y);var D=r(y,2),Q=r(t(D),2);F(Q),e(D),e(B);var le=r(B,2),oe=t(le),ce=r(t(oe),2);F(ce),e(oe);var ve=r(oe,2),de=r(t(ve),2);F(de),e(ve),e(le);var ue=r(le,2),be=t(ue),ge=r(t(be),2);F(ge),e(be);var xe=r(be,2),me=r(t(xe),2),E=t(me);F(E),Be(2),e(me),e(xe),e(ue);var ie=r(ue,2),pe=r(t(ie),2),Se=t(pe);F(Se),Be(2),e(pe),e(ie),e(ne),q(o,()=>a().sku,L=>a(a().sku=L,!0)),q(h,()=>a().imSKU,L=>a(a().imSKU=L,!0)),q(T,()=>a().name,L=>a(a().name=L,!0)),q(A,()=>a().price,L=>a(a().price=L,!0)),q(Q,()=>a().purchasePrice,L=>a(a().purchasePrice=L,!0)),q(ce,()=>a().seller,L=>a(a().seller=L,!0)),q(de,()=>a().location,L=>a(a().location=L,!0)),q(ge,()=>a().dateBought,L=>a(a().dateBought=L,!0)),Ge(E,()=>a().onWebsite,L=>a(a().onWebsite=L,!0)),Ge(Se,()=>a().sold,L=>a(a().sold=L,!0)),j(J,ne)},H=(J,ne)=>{{var Y=o=>{var b=Bt(),h=t(b),V=t(h),T=r(t(V),2),B=t(T,!0);e(T),e(V);var y=r(V,2),A=r(t(y),2),D=t(A,!0);e(A),e(y);var Q=r(y,2),le=r(t(Q),2),oe=t(le,!0);e(le),e(Q),e(h);var ce=r(h,2),ve=t(ce),de=r(t(ve),2);F(de),e(ve);var ue=r(ve,2),be=r(t(ue),2);F(be),e(ue),e(ce);var ge=r(ce,2),xe=r(t(ge),2);F(xe),e(ge);var me=r(ge,2),E=r(t(me),2),ie=t(E),pe=r(t(ie),2),Se=t(pe,!0);e(pe),e(ie);var L=r(ie,2),Ae=r(t(L),2),Ze=t(Ae,!0);e(Ae),e(L);var je=r(L,2),Ke=r(t(je),2),et=t(Ke);e(Ke),e(je);var Oe=r(je,2),He=r(t(Oe),2),tt=t(He,!0);e(He),e(Oe),e(E),e(me),e(b),te((he,rt,at,st,lt,ot,dt)=>{k(B,he),k(D,rt),k(oe,at),k(Se,st),k(Ze,lt),k(et,`-${ot??""}`),k(tt,dt)},[()=>u(a().price-a().purchasePrice),()=>u(a().commission),()=>u(a().price-a().commission),()=>u(a().purchasePrice),()=>u(a().price),()=>u(a().commission),()=>u(a().price-a().purchasePrice-a().commission)],Me),q(de,()=>a().commission,he=>a(a().commission=he,!0)),q(be,()=>a().dateSold,he=>a(a().dateSold=he,!0)),q(xe,()=>a().invoiceNo,he=>a(a().invoiceNo=he,!0)),j(o,b)},Z=o=>{var b=It(),h=r(we(b),2),V=r(t(h),2),T=t(V),B=t(T,!0);e(T);var y=r(T,2),A=t(y);e(y),e(V);var D=r(V,2),Q=t(D),le=t(Q);e(Q);var oe=r(Q,2),ce=t(oe);e(oe),e(D);var ve=r(D,2),de=t(ve),ue=t(de,!0);e(de);var be=r(de,2),ge=t(be,!0);e(be),e(ve),e(h),te((xe,me)=>{k(B,a().name),k(A,`£${xe??""}`),k(le,`SKU: ${a().sku??""}`),k(ce,`IM: ${a().imSKU??""}`),k(ue,a().location),k(ge,me)},[()=>a().price.toFixed(2),()=>new Date().toLocaleDateString("en-GB")],Me),j(o,b)};ee(J,o=>{c()==="financial"?o(Y):o(Z,!1)},ne)}};ee(X,J=>{c()==="products"?J(se):J(H,!1)})}j(p,I)};ee(O,p=>{a()&&p(W)})}e(N);var R=r(N,2),G=t(R),re=t(G,!0);e(G);var ae=r(G,2),U=r(ae,2);e(R),e(w),e(g),te(()=>{_e(C,1,`px-6 py-3 font-medium text-sm ${c()==="products"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"}`),_e(M,1,`px-6 py-3 font-medium text-sm ${c()==="financial"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"}`),_e(f,1,`px-6 py-3 font-medium text-sm ${c()==="print"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"}`),f.disabled=!a(),k(re,c()==="print"?"Back to Details":"Next")}),z("click",m,()=>{n(!1)}),z("click",C,()=>c("products")),z("click",M,()=>c("financial")),z("click",f,()=>c("print")),z("click",G,()=>{c()==="products"?c("financial"):c()==="financial"?c("print"):c("products")}),z("click",ae,()=>{n(!1)}),z("click",U,function(...p){var I;(I=v())==null||I.apply(this,p)}),j(d,g),Pe()}var At=K('<div class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><label class="block text-sm font-medium text-gray-700 mb-1">SKU</label> <input type="text" class="text-black/50 w-full px-4 py-2.5 rounded-lg border border-gray-300 bg-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-not-allowed" disabled></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">IM SKU</label> <input type="text" class="text-black w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">Product Name</label> <input type="text" class="text-black w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div> <div><label class="text-black block text-sm font-medium text-gray-700 mb-1">Selling Price (£)</label> <input type="number" step="0.01" class="text-black w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div></div>'),Kt=K('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"><div class="p-6 border-b flex justify-between items-center"><h2 class="text-xl font-bold text-gray-800">Edit Product</h2> <button class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex-1 overflow-y-auto p-6"><!></div> <div class="p-6 border-t flex justify-end space-x-3"><button class="px-5 py-2.5 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50">print</button> <button class="px-5 py-2.5 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50">Cancel</button> <button class="px-5 py-2.5 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700">Save Changes</button></div></div></div>');function Ot(d,l){ke(l,!1);let a=_(l,"showEditPrintModal",12),n=_(l,"editedProduct",12),c=_(l,"selectedProducts",12);function v(){n()&&(c(c().map(O=>O.id===n().id?n():O)),n(null),a(!1))}ye();var u=Kt(),g=t(u),w=t(g),i=r(t(w),2);e(w);var m=r(w,2),S=t(m);{var P=O=>{var W=At(),R=t(W),G=t(R),re=r(t(G),2);F(re),e(G);var ae=r(G,2),U=r(t(ae),2);F(U),e(ae),e(R);var p=r(R,2),I=r(t(p),2);F(I),e(p);var X=r(p,2),se=r(t(X),2);F(se),e(X),e(W),q(re,()=>n().sku,H=>n(n().sku=H,!0)),q(U,()=>n().imSKU,H=>n(n().imSKU=H,!0)),q(I,()=>n().name,H=>n(n().name=H,!0)),q(se,()=>n().price,H=>n(n().price=H,!0)),j(O,W)};ee(S,O=>{n()&&O(P)})}e(m);var C=r(m,2),M=t(C),f=r(M,2),N=r(f,2);e(C),e(g),e(u),z("click",i,()=>{a(!1)}),z("click",M,()=>{}),z("click",f,()=>{a(!1)}),z("click",N,v),j(d,u),Pe()}var Ht=K('<span class="ml-2 px-2 py-0.5 bg-red-100 text-red-800 text-xs rounded-full">Sold</span>'),Rt=K('<div><div class="flex-1 min-w-0"><div class="flex items-center"><h3 class="font-semibold text-gray-800 truncate"> </h3> <!></div> <div class="flex items-center mt-1 text-sm"><span class="font-medium text-blue-600"> </span> <span class="mx-2 text-gray-300">•</span> <span class="text-gray-600 truncate"> </span></div></div> <button class="ml-4 text-blue-600 hover:text-blue-800 flex items-center text-sm">Edit Print Info <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button></div>'),Dt=K('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"><div class="p-6 border-b flex justify-between items-center"><h2 class="text-xl font-bold text-gray-800">Print Receipts</h2> <button class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex-1 overflow-y-auto p-6"><div><div class="mb-4"><p class="text-gray-600"> </p></div> <div class="space-y-3 max-h-96 overflow-y-auto"></div></div></div> <div class="p-6 border-t flex justify-end space-x-3"><button class="px-5 py-2.5 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50">Back</button> <button class="px-5 py-2.5 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700">Print Receipts</button></div></div></div> <!>',1);function Ft(d,l){ke(l,!1);let a=_(l,"showPrintModal",12),n=_(l,"selectedProducts",12),c=_(l,"printSelected",8),v=$(),u=$(null);ye();var g=Dt(),w=we(g),i=t(w),m=t(i),S=r(t(m),2);e(m);var P=r(m,2),C=t(P),M=t(C),f=t(M),N=t(f);e(f),e(M);var O=r(M,2);Ie(O,5,n,ze,(U,p)=>{var I=Rt(),X=t(I),se=t(X),H=t(se),J=t(H,!0);e(H);var ne=r(H,2);{var Y=B=>{var y=Ht();j(B,y)};ee(ne,B=>{s(p).sold&&B(Y)})}e(se);var Z=r(se,2),o=t(Z),b=t(o);e(o);var h=r(o,4),V=t(h,!0);e(h),e(Z),e(X);var T=r(X,2);e(I),te(B=>{_e(I,1,`flex items-center p-3 border rounded-lg hover:bg-gray-50
                            ${s(p).sold?"bg-red-50 border-red-200":""}`),k(J,s(p).name),k(b,`£${B??""}`),k(V,s(p).sku)},[()=>s(p).price.toFixed(2)],Me),z("click",T,()=>{x(u,s(p)),x(v,!0)}),j(U,I)}),e(O),e(C),e(P);var W=r(P,2),R=t(W),G=r(R,2);e(W),e(i),e(w);var re=r(w,2);{var ae=U=>{Ot(U,{get showEditPrintModal(){return s(v)},set showEditPrintModal(p){x(v,p)},get editedProduct(){return s(u)},set editedProduct(p){x(u,p)},get selectedProducts(){return n()},set selectedProducts(p){n(p)},$$legacy:!0})};ee(re,U=>{s(v)&&U(ae)})}te(()=>k(N,`You're about to print Receipts for ${n().length??""} products.`)),z("click",S,()=>{a(!1)}),z("click",R,()=>{a(!1)}),z("click",G,function(...U){var p;(p=c())==null||p.apply(this,U)}),j(d,g),Pe()}var Wt=K('<div class="absolute top-3 right-3 px-2 py-1 bg-red-100 text-red-800 text-xs font-bold rounded-full">SOLD</div>'),Vt=K('<span class="ml-2 text-sm text-red-600">(Sold)</span>'),Gt=K('<div><!> <div class="p-4"><div class="flex justify-between items-start"><div class="pr-2  w-[90%]"><h3 class="font-semibold text-gray-800 truncate"> </h3> <div class="mt-1"><span class="text-xl font-bold text-blue-600"> </span> <!></div></div> <button title="Edit product"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button></div> <div class="mt-3 space-y-2 text-sm text-gray-600"><div class="flex items-center"><svg class="w-4 h-4 mr-1 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path></svg> <span> </span></div> <div class="flex items-center"><svg class="w-4 h-4 mr-1 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path></svg> <span> </span></div> <div class="flex items-center"><svg class="w-4 h-4 mr-1 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <span class="truncate"> </span></div> <div class="flex items-center"><svg class="w-4 h-4 mr-1 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> <span class="truncate"> </span></div></div></div> <div> </div></div>'),qt=K('<div class="col-span-full text-center py-12"><div class="text-gray-400 mb-4"><svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <h3 class="text-xl font-semibold text-gray-700">No products found</h3> <p class="text-gray-500 mt-2"> </p></div>'),$t=K('<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>');function Jt(d,l){ke(l,!1);let a=_(l,"filteredProducts",8),n=_(l,"selectedProducts",8),c=_(l,"toggleProduct",8),v=_(l,"openEditModal",8),u=_(l,"showSoldItems",8);ye();var g=$t();Ie(g,5,a,ze,(w,i)=>{var m=Gt(),S=t(m);{var P=y=>{var A=Wt();j(y,A)};ee(S,y=>{s(i).sold&&y(P)})}var C=r(S,2),M=t(C),f=t(M),N=t(f),O=t(N,!0);e(N);var W=r(N,2),R=t(W),G=t(R);e(R);var re=r(R,2);{var ae=y=>{var A=Vt();j(y,A)};ee(re,y=>{s(i).sold&&y(ae)})}e(W),e(f);var U=r(f,2);e(M);var p=r(M,2),I=t(p),X=r(t(I),2),se=t(X);e(X),e(I);var H=r(I,2),J=r(t(H),2),ne=t(J);e(J),e(H);var Y=r(H,2),Z=r(t(Y),2),o=t(Z);e(Z),e(Y);var b=r(Y,2),h=r(t(b),2),V=t(h);e(h),e(b),e(p),e(C);var T=r(C,2),B=t(T,!0);e(T),e(m),te((y,A,D)=>{_e(m,1,y),k(O,s(i).name),k(G,`£${A??""}`),_e(U,1,`z-10 text-gray-400 hover:text-blue-500 p-1 flex-shrink-0
                            ${s(i).sold?"opacity-70":""}`),k(se,`SKU: ${s(i).sku??""}`),k(ne,`IM SKU: ${s(i).imSKU??""}`),k(o,`Seller: ${s(i).seller??""}`),k(V,`Location: ${s(i).location??""}`),_e(T,1,D),k(B,s(i).sold?"Sold - Selected":"Selected")},[()=>`bg-white rounded-xl shadow-md overflow-hidden border-2 transition-all duration-200 relative cursor-pointer
                ${n().find(y=>y.id===s(i).id)?"border-blue-500 shadow-lg":"border-transparent"}
                ${s(i).sold?"opacity-80":""}`,()=>s(i).price.toFixed(2),()=>`py-1 text-center text-sm font-medium
                ${n().find(y=>y.id===s(i).id)?s(i).sold?"bg-red-100 text-red-700":"bg-blue-50 text-blue-700":"hidden"}`],Me),z("click",U,Et(()=>v()(s(i)))),z("click",m,()=>c()(s(i))),j(w,m)},w=>{var i=qt(),m=r(t(i),4),S=t(m,!0);e(m),e(i),te(()=>k(S,u()?"No sold items match your search":"No available items match your search")),j(w,i)}),e(g),j(d,g),Pe()}var Qt=K('<div class="bg-white rounded-xl shadow-lg p-4 mb-6 flex flex-col md:flex-row justify-between items-center gap-4"><div class="relative w-full"><div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"><svg class="w-5 h-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div> <input type="text" class="text-black w-full pl-10 pr-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Search by name, SKU, IM SKU, seller or location..."></div> <button class="flex items-center min-w-[220px] w-full md:w-auto px-4 py-2.5 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"><!> </button> <button class="px-4 py-2.5 rounded-lg font-medium flex items-center bg-green-600/80 text-white hover:bg-green-600 transition-colors" title="Refresh stock"><!> Refresh</button></div>');function Xt(d,l){ke(l,!1);let a=_(l,"searchTerm",12,""),n=_(l,"fetchProducts",8),c=_(l,"showPrintModal",12);_(l,"activeTab",8);let v=_(l,"selectedProducts",8);_(l,"products",8),_(l,"sortConfig",8),_(l,"filteredProducts",8),_(l,"openPrintModal",8),ye();var u=Qt(),g=t(u),w=r(t(g),2);F(w),e(g);var i=r(g,2),m=t(i);Lt(m,{size:30,class:"mr-2"});var S=r(m);e(i);var P=r(i,2),C=t(P);Nt(C,{size:30,class:"pr-2"}),Be(),e(P),e(u),te(()=>{i.disabled=v().length===0,k(S,` Print Selected (${v().length??""})`)}),q(w,a),z("click",i,()=>{c(!0)}),z("click",P,function(...M){var f;(f=n())==null||f.apply(this,M)}),j(d,u),Pe()}const qe="http://127.0.0.1:8080";var Yt=K('<div class="flex justify-center items-center h-64"><div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"></div> <span class="ml-3 text-gray-600">Loading products...</span></div>'),Zt=K('<div class="bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-red-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><p class="text-sm text-red-700"> </p> <button class="mt-2 px-3 py-1 bg-red-100 text-red-700 rounded text-sm hover:bg-red-200">Retry</button></div></div></div>'),er=K('<div class="mt-6 flex justify-center"><button class="px-4 py-2 text-sm font-medium rounded-lg border border-gray-300 hover:bg-gray-50 text-gray-700"> </button></div>'),tr=K('<!> <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"><div class="bg-white rounded-xl shadow p-5"><div class="text-gray-500 flex items-center"><svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg> <span class="font-medium">Total Items</span></div> <div class="text-3xl text-black font-bold mt-2"> </div></div> <div class="bg-white rounded-xl shadow p-5"><div class="text-gray-500 flex items-center"><svg class="w-6 h-6 mr-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="font-medium">Available</span></div> <div class="text-3xl font-bold mt-2 text-black"> </div></div> <div class="bg-white rounded-xl shadow p-5"><div class="text-gray-500 flex items-center"><svg class="w-6 h-6 mr-2 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="font-medium">Sold</span></div> <div class="text-3xl font-bold mt-2 text-black"> </div></div></div> <!> <!>',1),rr=K('<div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 p-4 md:p-8"><div class="max-w-7xl mx-auto"><div class="mb-8 text-center"><h1 class="text-3xl md:text-4xl font-bold text-gray-800">Iain Marr Antiques</h1> <p class="text-gray-600 mt-2">Inventory Management System</p></div> <!></div> <!> <!></div>');function ir(d,l){ke(l,!1);const a=$(),n=$();let c=$([]),v=$([]),u=$(""),g=$(!1),w=$(null),i=$("products"),m=$(!1),S=$(!1),P=$(null),C=$(!0),M=$({key:"sku",direction:"asc"});const f=(o,b,h="")=>o[b]!==void 0&&o[b]!==""?o[b]:h;async function N(){try{x(S,!0),x(P,null);const o=await fetch(qe+"/get_stock",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({})});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const b=await o.json();x(c,b.map(h=>({id:f(h,"SKU NO.",""),name:f(h,"ITEM DESCRIPTION",""),price:Number(f(h,"SELLING PRICE",0)),imSKU:f(h,"IM SKU",""),sku:f(h,"SKU NO.",""),purchasePrice:Number(f(h,"PURCHASE PRICE",0)),seller:f(h,"NAME/ADDRESS SELLER",""),dateBought:f(h,"DATE BOUGHT",""),sold:f(h,"SOLD","FALSE")==="TRUE",commission:f(h,"Commission £",0),dateSold:f(h,"DATE SOLD",""),invoiceNo:f(h,"INVOICE NO. XERO",""),onWebsite:f(h,"ON WEBSITE","FALSE")==="TRUE",location:f(h,"location","")})))}catch(o){console.error("Failed to fetch products:",o),x(P,"Failed to load products. Please try again later.")}finally{x(S,!1)}}async function O(){try{const o=await fetch(qe+"/print_labels",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({selectedProducts:s(v)})});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);alert(`Successfully printed ${s(v).length} labels!`),x(v,[]),x(m,!1)}catch(o){console.error("Failed to print labels",o),alert("Failed to print labels. Please check the console for details.")}}kt(N);function W(o){s(v).find(b=>b.id===o.id)?x(v,s(v).filter(b=>b.id!==o.id)):x(v,[...s(v),{...o}])}function R(){s(v).length===s(n).length?x(v,[]):x(v,[...s(n)])}function G(o){x(w,{...o}),x(i,"products"),x(g,!0)}function re(){x(m,!0)}function ae(){s(w)&&(x(c,s(c).map(o=>o.id===s(w).id?s(w):o)),x(w,null),x(g,!1))}function U(){O()}We(()=>(s(c),s(M)),()=>{x(a,[...s(c)].sort((o,b)=>o[s(M).key]<b[s(M).key]?s(M).direction==="asc"?-1:1:o[s(M).key]>b[s(M).key]?s(M).direction==="asc"?1:-1:0))}),We(()=>(s(a),s(C),s(u)),()=>{x(n,s(a).filter(o=>(s(C)||!o.sold)&&(String(o.name||"").toLowerCase().includes(s(u).toLowerCase())||String(o.imSKU||"").toLowerCase().includes(s(u).toLowerCase())||String(o.sku||"").toLowerCase().includes(s(u).toLowerCase())||String(o.seller||"").toLowerCase().includes(s(u).toLowerCase())||String(o.location||"").toLowerCase().includes(s(u).toLowerCase()))))}),Pt(),ye();var p=rr();vt(o=>{St.title="Iain Marr Antiques"});var I=t(p),X=r(t(I),2);{var se=o=>{var b=Yt();j(o,b)},H=(o,b)=>{{var h=T=>{var B=Zt(),y=t(B),A=r(t(y),2),D=t(A),Q=t(D,!0);e(D);var le=r(D,2);e(A),e(y),e(B),te(()=>k(Q,s(P))),z("click",le,N),j(T,B)},V=T=>{var B=tr(),y=we(B);Xt(y,{openPrintModal:re,fetchProducts:N,get searchTerm(){return s(u)},set searchTerm(E){x(u,E)},get showSoldItems(){return s(C)},set showSoldItems(E){x(C,E)},get showPrintModal(){return s(m)},set showPrintModal(E){x(m,E)},get selectedProducts(){return s(v)},set selectedProducts(E){x(v,E)},$$legacy:!0});var A=r(y,2),D=t(A),Q=r(t(D),2),le=t(Q,!0);e(Q),e(D);var oe=r(D,2),ce=r(t(oe),2),ve=t(ce,!0);e(ce),e(oe);var de=r(oe,2),ue=r(t(de),2),be=t(ue,!0);e(ue),e(de),e(A);var ge=r(A,2);Jt(ge,{toggleProduct:W,openEditModal:G,get filteredProducts(){return s(n)},set filteredProducts(E){x(n,E)},get selectedProducts(){return s(v)},set selectedProducts(E){x(v,E)},get showSoldItems(){return s(C)},set showSoldItems(E){x(C,E)},$$legacy:!0});var xe=r(ge,2);{var me=E=>{var ie=er(),pe=t(ie),Se=t(pe,!0);e(pe),e(ie),te(()=>k(Se,s(v).length===s(n).length?"Deselect All":"Select All")),z("click",pe,R),j(E,ie)};ee(xe,E=>{s(n).length>0&&E(me)})}te((E,ie)=>{k(le,s(c).length),k(ve,E),k(be,ie)},[()=>s(c).filter(E=>!E.sold).length,()=>s(c).filter(E=>E.sold).length],Me),j(T,B)};ee(o,T=>{s(P)?T(h):T(V,!1)},b)}};ee(X,o=>{s(S)?o(se):o(H,!1)})}e(I);var J=r(I,2);{var ne=o=>{Ut(o,{saveEditedProduct:ae,get editedProduct(){return s(w)},set editedProduct(b){x(w,b)},get showEditProductModal(){return s(g)},set showEditProductModal(b){x(g,b)},get activeTab(){return s(i)},set activeTab(b){x(i,b)},$$legacy:!0})};ee(J,o=>{s(g)&&o(ne)})}var Y=r(J,2);{var Z=o=>{Ft(o,{printSelected:U,get selectedProducts(){return s(v)},set selectedProducts(b){x(v,b)},get showPrintModal(){return s(m)},set showPrintModal(b){x(m,b)},$$legacy:!0})};ee(Y,o=>{s(m)&&o(Z)})}e(p),j(d,p),Pe()}export{ir as component};
