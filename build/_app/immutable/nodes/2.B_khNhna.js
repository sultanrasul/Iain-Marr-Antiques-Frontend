import{k as ar,l as lr,o as zt,p as Vt,a as u,c as Be,t as k,q as Z,s as Y,b as ft,r as sr}from"../chunks/foFxs5JA.js";import{i as He}from"../chunks/DIZ1sQIQ.js";import{h as Ae,a as Ot,d as Ct,b as or,E as ir,c as dr,aM as nr,af as cr,ag as vr,P as It,O as Ut,H as ur,p as br,Q as fr,ap as pr,aN as gr,u as Wt,r as Dt,e as qt,f as Ve,j as r,s as a,k as t,t as be,$ as ze,i as We,g as _e,w as e,aO as W,aP as Pe,F as m,aQ as Ee,ac as Jt,aR as lt,x as jt,aS as Bt,aT as mr,aU as xr}from"../chunks/z9wYe7VO.js";import{b as hr,l as Te,p as K,s as De,i as M}from"../chunks/BYMvGGKb.js";import"../chunks/CtOFwUFK.js";import{e as gt,i as mt,s as Re,a as Rt,r as R,b as D,t as st,c as yr}from"../chunks/fw6KHUEd.js";function wr(i,o,l,c,b,g){let v=Ae;Ae&&Ot();var s,S,w=null;Ae&&Ct.nodeType===1&&(w=Ct,Ot());var z=Ae?Ct:i,$;or(()=>{const B=o()||null;var ee=nr;B!==s&&($&&(B===null?br($,()=>{$=null,S=null}):B===S?fr($):pr($)),B&&B!==S&&($=dr(()=>{if(w=Ae?w:document.createElementNS(ee,B),ar(w,w),c){Ae&&lr(B)&&w.append(document.createComment(""));var F=Ae?cr(w):w.appendChild(vr());Ae&&(F===null?It(!1):Ut(F)),c(w,F)}ur.nodes_end=w,z.before(w)})),s=B,s&&(S=s))},ir),v&&(It(!0),Ut(z))}function X(i,o,l=o){var c=gr();zt(i,"input",b=>{var g=b?i.defaultValue:i.value;if(g=Et(i)?Nt(g):g,l(g),c&&g!==(g=o())){var v=i.selectionStart,s=i.selectionEnd;i.value=g??"",s!==null&&(i.selectionStart=v,i.selectionEnd=Math.min(s,i.value.length))}}),(Ae&&i.defaultValue!==i.value||Wt(o)==null&&i.value)&&l(Et(i)?Nt(i.value):i.value),Dt(()=>{var b=o();Et(i)&&b===Nt(i.value)||i.type==="date"&&!b&&!i.value||b!==i.value&&(i.value=b??"")})}function xt(i,o,l=o){zt(i,"change",c=>{var b=c?i.defaultChecked:i.checked;l(b)}),(Ae&&i.defaultChecked!==i.checked||Wt(o)==null)&&l(i.checked),Dt(()=>{var c=o();i.checked=!!c})}function Et(i){var o=i.type;return o==="number"||o==="range"}function Nt(i){return i===""?null:+i}function Zt(i,o,l){if(i.multiple)return Pr(i,o);for(var c of i.options){var b=pt(c);if(hr(b,o)){c.selected=!0;return}}(!l||o!==void 0)&&(i.selectedIndex=-1)}function _r(i,o){qt(()=>{var l=new MutationObserver(()=>{var c=i.__value;Zt(i,c)});return l.observe(i,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{l.disconnect()}})}function kr(i,o,l=o){var c=!0;zt(i,"change",b=>{var g=b?"[selected]":":checked",v;if(i.multiple)v=[].map.call(i.querySelectorAll(g),pt);else{var s=i.querySelector(g)??i.querySelector("option:not([disabled])");v=s&&pt(s)}l(v)}),qt(()=>{var b=o();if(Zt(i,b,c),c&&b===void 0){var g=i.querySelector(":checked");g!==null&&(b=pt(g),l(b))}i.__value=b,c=!1}),_r(i)}function Pr(i,o){for(var l of i.options)l.selected=~o.indexOf(pt(l))}function pt(i){return"__value"in i?i.__value:i.value}function Sr(i){return function(...o){var l=o[0];return l.stopPropagation(),i==null?void 0:i.apply(this,o)}}/**
 * @license lucide-svelte v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var $r=Vt("<svg><!><!></svg>");function qe(i,o){const l=Te(o,["children","$$slots","$$events","$$legacy"]),c=Te(l,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);Ve(o,!1);let b=K(o,"name",8,void 0),g=K(o,"color",8,"currentColor"),v=K(o,"size",8,24),s=K(o,"strokeWidth",8,2),S=K(o,"absoluteStrokeWidth",8,!1),w=K(o,"iconNode",24,()=>[]);const z=(...O)=>O.filter((H,C,x)=>!!H&&x.indexOf(H)===C).join(" ");He();var $=$r();let B;var ee=r($);gt(ee,1,w,mt,(O,H)=>{let C=()=>e(H)[0],x=()=>e(H)[1];var E=Be(),U=_e(E);wr(U,C,!0,(V,re)=>{let G;be(()=>G=Rt(V,G,{...x()}))}),u(O,E)});var F=a(ee);Re(F,o,"default",{},null),t($),be((O,H)=>B=Rt($,B,{...Mr,...c,width:v(),height:v(),stroke:g(),"stroke-width":O,class:H}),[()=>S()?Number(s())*24/Number(v()):s(),()=>z("lucide-icon","lucide",b()?`lucide-${b()}`:"",l.class)],ze),u(i,$),We()}function Cr(i,o){const l=Te(o,["children","$$slots","$$events","$$legacy"]);qe(i,De({name:"circle-plus"},()=>l,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M8 12h8"}],["path",{d:"M12 8v8"}]],children:(b,g)=>{var v=Be(),s=_e(v);Re(s,o,"default",{},null),u(b,v)},$$slots:{default:!0}}))}function Er(i,o){const l=Te(o,["children","$$slots","$$events","$$legacy"]);qe(i,De({name:"folder-sync"},()=>l,{iconNode:[["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v.5"}],["path",{d:"M12 10v4h4"}],["path",{d:"m12 14 1.535-1.605a5 5 0 0 1 8 1.5"}],["path",{d:"M22 22v-4h-4"}],["path",{d:"m22 18-1.535 1.605a5 5 0 0 1-8-1.5"}]],children:(b,g)=>{var v=Be(),s=_e(v);Re(s,o,"default",{},null),u(b,v)},$$slots:{default:!0}}))}function Kt(i,o){const l=Te(o,["children","$$slots","$$events","$$legacy"]);qe(i,De({name:"power"},()=>l,{iconNode:[["path",{d:"M12 2v10"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04"}]],children:(b,g)=>{var v=Be(),s=_e(v);Re(s,o,"default",{},null),u(b,v)},$$slots:{default:!0}}))}function Gt(i,o){const l=Te(o,["children","$$slots","$$events","$$legacy"]);qe(i,De({name:"printer"},()=>l,{iconNode:[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1"}]],children:(b,g)=>{var v=Be(),s=_e(v);Re(s,o,"default",{},null),u(b,v)},$$slots:{default:!0}}))}function Nr(i,o){const l=Te(o,["children","$$slots","$$events","$$legacy"]);qe(i,De({name:"refresh-cw"},()=>l,{iconNode:[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]],children:(b,g)=>{var v=Be(),s=_e(v);Re(s,o,"default",{},null),u(b,v)},$$slots:{default:!0}}))}function jr(i,o){const l=Te(o,["children","$$slots","$$events","$$legacy"]);qe(i,De({name:"settings"},()=>l,{iconNode:[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]],children:(b,g)=>{var v=Be(),s=_e(v);Re(s,o,"default",{},null),u(b,v)},$$slots:{default:!0}}))}function Ft(i,o){const l=Te(o,["children","$$slots","$$events","$$legacy"]);qe(i,De({name:"wifi-off"},()=>l,{iconNode:[["path",{d:"M12 20h.01"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764"}],["path",{d:"m2 2 20 20"}]],children:(b,g)=>{var v=Be(),s=_e(v);Re(s,o,"default",{},null),u(b,v)},$$slots:{default:!0}}))}function Ht(i,o){const l=Te(o,["children","$$slots","$$events","$$legacy"]);qe(i,De({name:"wifi"},()=>l,{iconNode:[["path",{d:"M12 20h.01"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0"}]],children:(b,g)=>{var v=Be(),s=_e(v);Re(s,o,"default",{},null),u(b,v)},$$slots:{default:!0}}))}const Xe="http://printpi:8080";var zr=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Br=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Lr=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Zero</span>'),Ar=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Zero</span>'),Tr=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Or=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Ir=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Ur=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Rr=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Zero</span>'),Kr=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Fr=k('<svg class=" animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span class="text-white">Adding...</span>',1),Hr=k('<span class="text-white">Add Product</span>'),Vr=k(`<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"><div class="p-6 border-b flex justify-between items-center"><h2 class="text-xl font-bold text-gray-800">Add Product</h2> <button class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex-1 overflow-y-auto p-6"><div class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">SKU</label></div> <input type="text"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">IM SKU</label> <!></div> <input type="text"></div></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Product Name</label> <!></div> <input type="text"></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="text-black block text-sm font-medium text-gray-700">Selling Price (£)</label> <!></div> <input type="number" step="0.01"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Purchase Price (£)</label> <!></div> <input type="number" step="0.01"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Seller</label> <!></div> <input type="text"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Location</label> <!></div> <input type="text"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Date Bought</label> <!></div> <input type="text"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Date Sold</label> <!></div> <input type="text"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Commission (£)</label> <!></div> <input type="number" step="0.01"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Invoice No</label> <!></div> <input type="text"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><label class="block text-sm font-medium text-gray-700 mb-1">On Website</label> <div class="flex items-center mt-2"><input type="checkbox" id="onWebsite" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"> <label for="onWebsite" class="ml-2 block text-sm text-gray-900">Published on website</label></div></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">Sold Status</label> <div class="flex items-center"><input type="checkbox" id="soldCheckbox" class="text-black h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"> <label for="soldCheckbox" class="ml-2 block text-sm text-gray-900">Mark as sold</label></div></div></div> <div class="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg"><div class="flex items-center text-yellow-800"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <span class="font-medium">Note on empty fields</span></div> <p class="text-sm text-yellow-700 mt-2">Yellow highlighted fields are empty or contain zero values. These fields are not required, 
                        but you may want to review them before saving.</p></div></div></div> <div class="p-6 border-t flex justify-end space-x-3"><button class="px-5 py-2.5 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50">Cancel</button> <button><!></button></div></div></div>`);function Wr(i,o){Ve(o,!1),K(o,"saveEditedProduct",8);let l=K(o,"showAddProductModal",12),c=K(o,"products",8),b=W(!1);function g(d){const I=d.match(/^([A-Za-z\s]*)(\d+)([A-Za-z]*)$/);if(!I)return console.error("Invalid SKU format:",d),d;const Qe=I[1],vt=parseInt(I[2],10),ut=I[3],Fe=vt+1;return`${Qe}${Fe}${ut}`}let v=c()[c().length-1].sku;console.log(v);let s=W({id:g(v),name:"",price:0,imSKU:"",sku:g(v),purchasePrice:0,seller:"",dateBought:"",sold:!1,commission:0,dateSold:"",invoiceNo:"",onWebsite:!1,location:""});async function S(){m(b,!0);try{const d=await fetch(Xe+"/add_product",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({product:e(s)})});if(!d.ok)throw new Error(`HTTP error! status: ${d.status}`);const I=await d.json();st.success("Product added successfully!"),l(!1)}catch(d){console.error("Failed to add product:",d),st.error("Failed to add product. Please try again.")}finally{m(b,!1)}}function w(d){return d===""||d===0||d===null||d===void 0}He();var z=Vr(),$=r(z),B=r($),ee=a(r(B),2);t(B);var F=a(B,2),O=r(F),H=r(O),C=r(H),x=a(r(C),2);R(x),D(x,1,"border-gray-300 bg-gray-100 text-black/50 w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-not-allowed"),t(C);var E=a(C,2),U=r(E),V=a(r(U),2);{var re=d=>{var I=zr();u(d,I)};M(V,d=>{w(e(s).imSKU)&&d(re)})}t(U);var G=a(U,2);R(G),t(E),t(H);var le=a(H,2),se=r(le),N=a(r(se),2);{var j=d=>{var I=Br();u(d,I)};M(N,d=>{w(e(s).name)&&d(j)})}t(se);var ue=a(se,2);R(ue),t(le);var fe=a(le,2),pe=r(fe),te=r(pe),Q=a(r(te),2);{var ne=d=>{var I=Lr();u(d,I)};M(Q,d=>{e(s).price===0&&d(ne)})}t(te);var ae=a(te,2);R(ae),t(pe);var oe=a(pe,2),ce=r(oe),f=a(r(ce),2);{var n=d=>{var I=Ar();u(d,I)};M(f,d=>{e(s).purchasePrice===0&&d(n)})}t(ce);var P=a(ce,2);R(P),t(oe),t(fe);var _=a(fe,2),q=r(_),J=r(q),h=a(r(J),2);{var y=d=>{var I=Tr();u(d,I)};M(h,d=>{w(e(s).seller)&&d(y)})}t(J);var L=a(J,2);R(L),t(q);var A=a(q,2),ve=r(A),ge=a(r(ve),2);{var he=d=>{var I=Or();u(d,I)};M(ge,d=>{w(e(s).location)&&d(he)})}t(ve);var ye=a(ve,2);R(ye),t(A),t(_);var ke=a(_,2),Se=r(ke),xe=r(Se),Me=a(r(xe),2);{var T=d=>{var I=Ir();u(d,I)};M(Me,d=>{w(e(s).dateBought)&&d(T)})}t(xe);var $e=a(xe,2);R($e),t(Se);var Ne=a(Se,2),Le=r(Ne),je=a(r(Le),2);{var Ce=d=>{var I=Ur();u(d,I)};M(je,d=>{w(e(s).dateSold)&&d(Ce)})}t(Le);var ie=a(Le,2);R(ie),t(Ne),t(ke);var we=a(ke,2),Oe=r(we),Ie=r(Oe),me=a(r(Ie),2);{var Ke=d=>{var I=Rr();u(d,I)};M(me,d=>{e(s).commission===0&&d(Ke)})}t(Ie);var Je=a(Ie,2);R(Je),t(Oe);var ht=a(Oe,2),ot=r(ht),et=a(r(ot),2);{var it=d=>{var I=Kr();u(d,I)};M(et,d=>{w(e(s).invoiceNo)&&d(it)})}t(ot);var Ze=a(ot,2);R(Ze),t(ht),t(we);var tt=a(we,2),dt=r(tt),yt=a(r(dt),2),Ge=r(yt);R(Ge),Pe(2),t(yt),t(dt);var nt=a(dt,2),rt=a(r(nt),2),wt=r(rt);R(wt),Pe(2),t(rt),t(nt),t(tt),Pe(2),t(O),t(F);var _t=a(F,2),Ye=r(_t),Ue=a(Ye,2);let at;var ct=r(Ue);{var Pt=d=>{var I=Fr();Pe(2),u(d,I)},St=d=>{var I=Hr();u(d,I)};M(ct,d=>{e(b)?d(Pt):d(St,!1)})}t(Ue),t(_t),t($),t(z),be((d,I,Qe,vt,ut,Fe,kt,bt)=>{D(G,1,d),D(ue,1,I),D(ae,1,`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${e(s).price===0?"border-yellow-400 bg-yellow-50":"border-gray-300"}`),D(P,1,`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${e(s).purchasePrice===0?"border-yellow-400 bg-yellow-50":"border-gray-300"}`),D(L,1,Qe),D(ye,1,vt),D($e,1,ut),D(ie,1,Fe),D(Je,1,`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${e(s).commission===0?"border-yellow-400 bg-yellow-50":"border-gray-300"}`),D(Ze,1,kt),at=D(Ue,1,"px-5 py-2.5 rounded-lg flex items-center justify-center min-w-[120px] disabled:opacity-50 disabled:cursor-not-allowed",null,at,bt),Ue.disabled=e(b)},[()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${w(e(s).imSKU)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                            ${w(e(s).name)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${w(e(s).seller)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${w(e(s).location)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${w(e(s).dateBought)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${w(e(s).dateSold)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${w(e(s).invoiceNo)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>({"bg-blue-600":!e(b),"bg-gray-400":e(b),"hover:bg-blue-700":!e(b)})],ze),Z("click",ee,()=>{l(!1)}),X(x,()=>e(s).sku,d=>Ee(s,e(s).sku=d)),X(G,()=>e(s).imSKU,d=>Ee(s,e(s).imSKU=d)),X(ue,()=>e(s).name,d=>Ee(s,e(s).name=d)),X(ae,()=>e(s).price,d=>Ee(s,e(s).price=d)),X(P,()=>e(s).purchasePrice,d=>Ee(s,e(s).purchasePrice=d)),X(L,()=>e(s).seller,d=>Ee(s,e(s).seller=d)),X(ye,()=>e(s).location,d=>Ee(s,e(s).location=d)),X($e,()=>e(s).dateBought,d=>Ee(s,e(s).dateBought=d)),X(ie,()=>e(s).dateSold,d=>Ee(s,e(s).dateSold=d)),X(Je,()=>e(s).commission,d=>Ee(s,e(s).commission=d)),X(Ze,()=>e(s).invoiceNo,d=>Ee(s,e(s).invoiceNo=d)),xt(Ge,()=>e(s).onWebsite,d=>Ee(s,e(s).onWebsite=d)),xt(wt,()=>e(s).sold,d=>Ee(s,e(s).sold=d)),Z("click",Ye,()=>{l(!1)}),Z("click",Ue,S),u(i,z),We()}var Dr=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),qr=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Jr=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Zr=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Zero</span>'),Gr=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Zero</span>'),Yr=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Qr=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Xr=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),ea=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),ta=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Zero</span>'),ra=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),aa=k(`<div class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">SKU</label> <!></div> <input type="text" disabled></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">IM SKU</label> <!></div> <input type="text"></div></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Product Name</label> <!></div> <input type="text"></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="text-black block text-sm font-medium text-gray-700">Selling Price (£)</label> <!></div> <input type="number" step="0.01"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Purchase Price (£)</label> <!></div> <input type="number" step="0.01"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Seller</label> <!></div> <input type="text"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Location</label> <!></div> <input type="text"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Date Bought</label> <!></div> <input type="text"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Date Sold</label> <!></div> <input type="text"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Commission (£)</label> <!></div> <input type="number" step="0.01"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Invoice No</label> <!></div> <input type="text"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><label class="block text-sm font-medium text-gray-700 mb-1">On Website</label> <div class="flex items-center mt-2"><input type="checkbox" id="onWebsite" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded svelte-1mfa054"> <label for="onWebsite" class="ml-2 block text-sm text-gray-900">Published on website</label></div></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">Sold Status</label> <div class="flex items-center"><input type="checkbox" id="soldCheckbox" class="text-black h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded svelte-1mfa054"> <label for="soldCheckbox" class="ml-2 block text-sm text-gray-900">Mark as sold</label></div></div></div> <div class="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg svelte-1mfa054"><div class="flex items-center text-yellow-800"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <span class="font-medium">Note on empty fields</span></div> <p class="text-sm text-yellow-700 mt-2">Yellow highlighted fields are empty or contain zero values. These fields are not required, 
                                but you may want to review them before saving.</p></div></div>`),la=k('<div class="bg-gray-50 p-4 rounded-lg mb-4"><div class="flex items-center"><svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path></svg> <h3 class="font-medium">Label Preview</h3></div> <p class="text-sm text-gray-600 mt-1">This is a preview of how the label will look</p></div> <div class="border border-gray-300 rounded-lg p-6 max-w-xs mx-auto"><div class="text-center mb-4"><div class="text-xl font-bold">Iain Marr Antiques</div> <div class="text-xs text-gray-500">Est. 1990</div></div> <div class="text-center mb-2"><div class="font-semibold text-lg"> </div> <div class="text-2xl font-bold text-blue-700"> </div></div> <div class="flex justify-between text-xs mt-4"><div> </div> <div> </div></div> <div class="mt-6 text-center text-xs text-gray-500"><div> </div> <div> </div></div></div>',1),sa=k('<svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white svelte-1mfa054" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span class="text-white">Saving...</span>',1),oa=k('<span class="text-white">Save Changes</span>'),ia=k('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"><div class="p-6 border-b flex justify-between items-center"><h2 class="text-xl font-bold text-gray-800">Edit Product</h2> <button class="text-gray-400 hover:text-gray-600 svelte-1mfa054"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>  <div class="flex-1 overflow-y-auto p-6"><!></div> <div class="p-6 border-t flex justify-end space-x-3"><button class="px-5 py-2.5 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50 svelte-1mfa054">Cancel</button> <button><!></button></div></div></div>');function da(i,o){Ve(o,!1);let l=K(o,"editedProduct",12),c=K(o,"showEditProductModal",12),b=K(o,"activeTab",8),g=K(o,"products",12),v=W(!1),s=W(null);function S(N){return N===""||N===0||N===null||N===void 0}function w(){return JSON.stringify(e(s))!==JSON.stringify(l())}async function z(N){try{const j=await fetch(Xe+"/modify_product",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({editedProduct:N})});if(!j.ok)throw new Error(`HTTP error! status: ${j.status}`);return await j.json()}catch(j){throw console.error("Failed to update product:",j),new Error("Failed to update product. Please try again later.")}}async function $(){if(w()){m(v,!0);try{await z(l()),g(g().map(N=>N.id===l().id?l():N)),m(s,JSON.parse(JSON.stringify(l()))),st.success("Product updated successfully!"),c(!1)}catch(N){console.error("Save error:",N),st.error(N.message||"Failed to update product","error")}finally{m(v,!1)}}}Jt(()=>{l()&&(m(s,JSON.parse(JSON.stringify(l()))),console.log(e(s)))}),lt(()=>(jt(l()),e(s)),()=>{l()&&!e(s)&&m(s,JSON.parse(JSON.stringify(l())))}),Bt(),He();var B=ia(),ee=r(B),F=r(ee),O=a(r(F),2);t(F);var H=a(F,2),C=r(H);{var x=N=>{var j=Be(),ue=_e(j);{var fe=te=>{var Q=aa(),ne=r(Q),ae=r(ne),oe=r(ae),ce=a(r(oe),2);{var f=p=>{var de=Dr();u(p,de)};M(ce,p=>{S(l().sku)&&p(f)})}t(oe);var n=a(oe,2);R(n),t(ae);var P=a(ae,2),_=r(P),q=a(r(_),2);{var J=p=>{var de=qr();u(p,de)};M(q,p=>{S(l().imSKU)&&p(J)})}t(_);var h=a(_,2);R(h),t(P),t(ne);var y=a(ne,2),L=r(y),A=a(r(L),2);{var ve=p=>{var de=Jr();u(p,de)};M(A,p=>{S(l().name)&&p(ve)})}t(L);var ge=a(L,2);R(ge),t(y);var he=a(y,2),ye=r(he),ke=r(ye),Se=a(r(ke),2);{var xe=p=>{var de=Zr();u(p,de)};M(Se,p=>{l().price===0&&p(xe)})}t(ke);var Me=a(ke,2);R(Me),t(ye);var T=a(ye,2),$e=r(T),Ne=a(r($e),2);{var Le=p=>{var de=Gr();u(p,de)};M(Ne,p=>{l().purchasePrice===0&&p(Le)})}t($e);var je=a($e,2);R(je),t(T),t(he);var Ce=a(he,2),ie=r(Ce),we=r(ie),Oe=a(r(we),2);{var Ie=p=>{var de=Yr();u(p,de)};M(Oe,p=>{S(l().seller)&&p(Ie)})}t(we);var me=a(we,2);R(me),t(ie);var Ke=a(ie,2),Je=r(Ke),ht=a(r(Je),2);{var ot=p=>{var de=Qr();u(p,de)};M(ht,p=>{S(l().location)&&p(ot)})}t(Je);var et=a(Je,2);R(et),t(Ke),t(Ce);var it=a(Ce,2),Ze=r(it),tt=r(Ze),dt=a(r(tt),2);{var yt=p=>{var de=Xr();u(p,de)};M(dt,p=>{S(l().dateBought)&&p(yt)})}t(tt);var Ge=a(tt,2);R(Ge),t(Ze);var nt=a(Ze,2),rt=r(nt),wt=a(r(rt),2);{var _t=p=>{var de=ea();u(p,de)};M(wt,p=>{S(l().dateSold)&&p(_t)})}t(rt);var Ye=a(rt,2);R(Ye),t(nt),t(it);var Ue=a(it,2),at=r(Ue),ct=r(at),Pt=a(r(ct),2);{var St=p=>{var de=ta();u(p,de)};M(Pt,p=>{l().commission===0&&p(St)})}t(ct);var d=a(ct,2);R(d),t(at);var I=a(at,2),Qe=r(I),vt=a(r(Qe),2);{var ut=p=>{var de=ra();u(p,de)};M(vt,p=>{S(l().invoiceNo)&&p(ut)})}t(Qe);var Fe=a(Qe,2);R(Fe),t(I),t(Ue);var kt=a(Ue,2),bt=r(kt),Lt=a(r(bt),2),Mt=r(Lt);R(Mt),Pe(2),t(Lt),t(bt);var At=a(bt,2),Tt=a(r(At),2),$t=r(Tt);R($t),Pe(2),t(Tt),t(At),t(kt),Pe(2),t(Q),be((p,de,Yt,Qt,Xt,er,tr,rr)=>{D(n,1,p,"svelte-1mfa054"),D(h,1,de,"svelte-1mfa054"),h.disabled=e(v),D(ge,1,Yt,"svelte-1mfa054"),ge.disabled=e(v),D(Me,1,`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${l().price===0?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,"svelte-1mfa054"),Me.disabled=e(v),D(je,1,`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${l().purchasePrice===0?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,"svelte-1mfa054"),je.disabled=e(v),D(me,1,Qt,"svelte-1mfa054"),me.disabled=e(v),D(et,1,Xt,"svelte-1mfa054"),et.disabled=e(v),D(Ge,1,er,"svelte-1mfa054"),Ge.disabled=e(v),D(Ye,1,tr,"svelte-1mfa054"),Ye.disabled=e(v),D(d,1,`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${l().commission===0?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,"svelte-1mfa054"),d.disabled=e(v),D(Fe,1,rr,"svelte-1mfa054"),Fe.disabled=e(v),Mt.disabled=e(v),$t.disabled=e(v)},[()=>`text-black/50 w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-not-allowed
                                        ${S(l().sku)?"border-yellow-400 bg-yellow-50":"border-gray-300 bg-gray-100"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${S(l().imSKU)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                    ${S(l().name)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${S(l().seller)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${S(l().location)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${S(l().dateBought)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${S(l().dateSold)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${S(l().invoiceNo)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`],ze),X(n,()=>l().sku,p=>l(l().sku=p,!0)),X(h,()=>l().imSKU,p=>l(l().imSKU=p,!0)),X(ge,()=>l().name,p=>l(l().name=p,!0)),X(Me,()=>l().price,p=>l(l().price=p,!0)),X(je,()=>l().purchasePrice,p=>l(l().purchasePrice=p,!0)),X(me,()=>l().seller,p=>l(l().seller=p,!0)),X(et,()=>l().location,p=>l(l().location=p,!0)),X(Ge,()=>l().dateBought,p=>l(l().dateBought=p,!0)),X(Ye,()=>l().dateSold,p=>l(l().dateSold=p,!0)),X(d,()=>l().commission,p=>l(l().commission=p,!0)),X(Fe,()=>l().invoiceNo,p=>l(l().invoiceNo=p,!0)),xt(Mt,()=>l().onWebsite,p=>l(l().onWebsite=p,!0)),xt($t,()=>l().sold,p=>l(l().sold=p,!0)),u(te,Q)},pe=te=>{var Q=la(),ne=a(_e(Q),2),ae=a(r(ne),2),oe=r(ae),ce=r(oe,!0);t(oe);var f=a(oe,2),n=r(f);t(f),t(ae);var P=a(ae,2),_=r(P),q=r(_);t(_);var J=a(_,2),h=r(J);t(J),t(P);var y=a(P,2),L=r(y),A=r(L,!0);t(L);var ve=a(L,2),ge=r(ve,!0);t(ve),t(y),t(ne),be((he,ye)=>{Y(ce,l().name),Y(n,`£${he??""}`),Y(q,`SKU: ${l().sku??""}`),Y(h,`IM: ${l().imSKU??""}`),Y(A,l().location),Y(ge,ye)},[()=>l().price.toFixed(2),()=>new Date().toLocaleDateString("en-GB")],ze),u(te,Q)};M(ue,te=>{b()==="products"?te(fe):te(pe,!1)})}u(N,j)};M(C,N=>{l()&&N(x)})}t(H);var E=a(H,2),U=r(E),V=a(U,2);let re;var G=r(V);{var le=N=>{var j=sa();Pe(2),u(N,j)},se=N=>{var j=oa();u(N,j)};M(G,N=>{e(v)?N(le):N(se,!1)})}t(V),t(E),t(ee),t(B),be((N,j)=>{O.disabled=e(v),U.disabled=e(v),re=D(V,1,"px-5 py-2.5 rounded-lg flex items-center justify-center min-w-[120px] disabled:opacity-50 disabled:cursor-not-allowed svelte-1mfa054",null,re,N),V.disabled=j},[()=>({"bg-blue-600":!e(v)&&w(),"bg-gray-400":!w()||e(v),"hover:bg-blue-700":!e(v)&&w()}),()=>!w()||e(v)],ze),Z("click",O,()=>{c(!1)}),Z("click",U,()=>{c(!1)}),Z("click",V,$),u(i,B),We()}var na=k('<div class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><label class="block text-sm font-medium text-gray-700 mb-1">SKU</label> <input type="text" class="text-black/50 w-full px-4 py-2.5 rounded-lg border border-gray-300 bg-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-not-allowed" disabled></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">IM SKU</label> <input type="text" class="text-black w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">Product Name</label> <input type="text" class="text-black w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div> <div><label class="text-black block text-sm font-medium text-gray-700 mb-1">Selling Price (£)</label> <input type="number" step="0.01" class="text-black w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div></div>'),ca=k('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"><div class="p-6 border-b flex justify-between items-center"><h2 class="text-xl font-bold text-gray-800">Edit Product</h2> <button class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex-1 overflow-y-auto p-6"><!></div> <div class="p-6 border-t flex justify-end space-x-3"><button class="px-5 py-2.5 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50">Cancel</button> <button class="px-5 py-2.5 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700">Save Changes</button></div></div></div>');function va(i,o){Ve(o,!1);let l=K(o,"showEditPrintModal",12),c=K(o,"editedProduct",12),b=K(o,"selectedProducts",12);function g(){c()&&(b(b().map(H=>H.id===c().id?c():H)),c(null),l(!1))}He();var v=ca(),s=r(v),S=r(s),w=a(r(S),2);t(S);var z=a(S,2),$=r(z);{var B=H=>{var C=na(),x=r(C),E=r(x),U=a(r(E),2);R(U),t(E);var V=a(E,2),re=a(r(V),2);R(re),t(V),t(x);var G=a(x,2),le=a(r(G),2);R(le),t(G);var se=a(G,2),N=a(r(se),2);R(N),t(se),t(C),X(U,()=>c().sku,j=>c(c().sku=j,!0)),X(re,()=>c().imSKU,j=>c(c().imSKU=j,!0)),X(le,()=>c().name,j=>c(c().name=j,!0)),X(N,()=>c().price,j=>c(c().price=j,!0)),u(H,C)};M($,H=>{c()&&H(B)})}t(z);var ee=a(z,2),F=r(ee),O=a(F,2);t(ee),t(s),t(v),Z("click",w,()=>{l(!1)}),Z("click",F,()=>{l(!1)}),Z("click",O,g),u(i,v),We()}var ua=k('<p class="text-sm text-gray-500 mt-1">Click the X button to remove items from the list</p>'),ba=k('<span class="ml-2 px-2 py-0.5 bg-red-100 text-red-800 text-xs rounded-full">Sold</span>'),fa=k('<div><div class="flex-1 min-w-0"><div class="flex items-center"><h3 class="font-semibold text-gray-800 truncate"> </h3> <!></div> <div class="flex items-center mt-1 text-sm"><span class="font-medium text-blue-600"> </span> <span class="mx-2 text-gray-300">•</span> <span class="text-gray-600 truncate"> </span></div></div> <div class="flex items-center space-x-2"><button class="p-2 bg-blue-50 rounded-full hover:bg-blue-100 transition-colors flex items-center group" title="Edit Print Info"><svg class="w-5 h-5 text-blue-600 group-hover:text-blue-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg> <span class="ml-1 text-sm font-medium text-blue-600 group-hover:text-blue-800 hidden md:inline">Edit</span></button> <button class="p-2 bg-red-50 rounded-full hover:bg-red-100 transition-colors flex items-center group" title="Remove from list"><svg class="w-5 h-5 text-red-500 group-hover:text-red-700" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> <span class="ml-1 text-sm font-medium text-red-500 group-hover:text-red-700 hidden md:inline">Remove</span></button></div></div>'),pa=k('<div class="text-center py-8"><svg class="w-16 h-16 mx-auto text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"></path></svg> <h3 class="mt-4 text-lg font-medium text-gray-900">No products selected</h3> <p class="mt-1 text-gray-500">Select items from your inventory to print receipts</p></div>'),ga=k('<svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span class="text-white">Printing...</span>',1),ma=k('<span class="text-white"> </span>'),xa=k('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"><div class="p-6 border-b flex justify-between items-center"><h2 class="text-xl font-bold text-gray-800">Print Receipts</h2> <button class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex-1 overflow-y-auto p-6"><div class="mb-6"><label for="customerName" class="block text-sm font-medium text-gray-700 mb-2">Customer Name (Optional)</label> <input id="customerName" type="text" placeholder="Enter customer name for receipt" class="w-full px-4 py-2 border text-black border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"> <p class="mt-1 text-sm text-gray-500">The customer name will be printed on the receipt if provided.</p></div>  <div class="mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200 cursor-pointer"><div class="flex items-center"><input id="markAsSold" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"> <div class="ml-2 block text-sm font-medium text-gray-700">Mark as Sold and Add to Sold Inventory</div></div> <p class="mt-1 text-sm text-blue-600"><!></p></div> <div><div class="mb-4"><p class="text-gray-600"> </p> <!></div> <div class="space-y-3 max-h-96 overflow-y-auto"></div></div></div> <div class="p-6 border-t flex justify-end space-x-3"><button class="px-5 py-2.5 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50">Back</button> <button><!></button></div></div></div> <!>',1);function ha(i,o){Ve(o,!1);let l=K(o,"showPrintModal",12),c=K(o,"selectedProducts",12),b=K(o,"products",12),g=W(!1),v=W(),s=W(null),S=W(""),w=W(!0);async function z(){m(g,!0);try{const h=await fetch(Xe+"/print_labels",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({selectedProducts:c(),customerName:e(S),logSold:e(w)})}),y=await h.json();if(!h.ok)throw y.error?new Error(y.error):new Error(`HTTP error! status: ${h.status}`);if(e(w)){const L=new Set(c().map(A=>A.id));b(b().map(A=>L.has(A.id)?{...A,sold:!0}:A)),c(c().map(A=>({...A,sold:!0})))}st.success(`Successfully printed ${c().length} label(s)!`),c([]),m(S,""),m(w,!1),l(!1)}catch(h){console.error("Failed to print labels",h),st.error(h.message||"Failed to print labels. Please check the console for details.")}finally{m(g,!1)}}function $(h){c(c().filter(y=>y.id!==h.id))}He();var B=xa(),ee=_e(B),F=r(ee),O=r(F),H=a(r(O),2);t(O);var C=a(O,2),x=r(C),E=a(r(x),2);R(E),Pe(2),t(x);var U=a(x,2),V=r(U),re=r(V);R(re),Pe(2),t(V);var G=a(V,2),le=r(G);{var se=h=>{var y=ft("Items will be marked as sold in your inventory and added to the sold items sheet.");u(h,y)},N=h=>{var y=ft("Items will remain available in your inventory after printing.");u(h,y)};M(le,h=>{e(w)?h(se):h(N,!1)})}t(G),t(U);var j=a(U,2),ue=r(j),fe=r(ue),pe=r(fe);t(fe);var te=a(fe,2);{var Q=h=>{var y=ua();u(h,y)};M(te,h=>{c().length>0&&h(Q)})}t(ue);var ne=a(ue,2);gt(ne,5,c,mt,(h,y)=>{var L=fa(),A=r(L),ve=r(A),ge=r(ve),he=r(ge,!0);t(ge);var ye=a(ge,2);{var ke=Ce=>{var ie=ba();u(Ce,ie)};M(ye,Ce=>{e(y).sold&&Ce(ke)})}t(ve);var Se=a(ve,2),xe=r(Se),Me=r(xe);t(xe);var T=a(xe,4),$e=r(T,!0);t(T),t(Se),t(A);var Ne=a(A,2),Le=r(Ne),je=a(Le,2);t(Ne),t(L),be(Ce=>{D(L,1,`flex items-center p-3 border rounded-lg hover:bg-gray-50
                ${e(y).sold?"bg-red-50 border-red-200":""}`),Y(he,e(y).name),Y(Me,`£${Ce??""}`),Y($e,e(y).sku)},[()=>e(y).price.toFixed(2)],ze),Z("click",Le,()=>{m(s,e(y)),m(v,!0)}),Z("click",je,()=>$(e(y))),u(h,L)},h=>{var y=pa();u(h,y)}),t(ne),t(j),t(C);var ae=a(C,2),oe=r(ae),ce=a(oe,2);let f;var n=r(ce);{var P=h=>{var y=ga();Pe(2),u(h,y)},_=h=>{var y=ma(),L=r(y,!0);t(y),be(()=>Y(L,e(w)?"Print & Mark Sold":"Print Receipts")),u(h,y)};M(n,h=>{e(g)?h(P):h(_,!1)})}t(ce),t(ae),t(F),t(ee);var q=a(ee,2);{var J=h=>{va(h,{get showEditPrintModal(){return e(v)},set showEditPrintModal(y){m(v,y)},get editedProduct(){return e(s)},set editedProduct(y){m(s,y)},get selectedProducts(){return c()},set selectedProducts(y){c(y)},$$legacy:!0})};M(q,h=>{e(v)&&h(J)})}be(h=>{Y(pe,`You're about to print Receipts for ${c().length??""} products.`),f=D(ce,1,"px-5 py-2.5 rounded-lg flex items-center justify-center min-w-[120px] disabled:opacity-50 disabled:cursor-not-allowed",null,f,h),ce.disabled=e(g)||c().length===0},[()=>({"bg-blue-600":!e(g),"bg-gray-400":e(g),"hover:bg-blue-700":!e(g)})],ze),Z("click",H,()=>{l(!1),m(S,""),m(w,!1)}),X(E,()=>e(S),h=>m(S,h)),xt(re,()=>e(w),h=>m(w,h)),Z("click",U,()=>{m(w,!e(w))}),Z("click",oe,()=>{l(!1),m(S,""),m(w,!1)}),Z("click",ce,z),u(i,B),We()}var ya=k('<div class="absolute top-14 right-3 px-2 py-1 bg-red-100 text-red-800 text-xs font-bold rounded-full">SOLD</div>'),wa=k('<div><!> <div class="p-4"><div class="flex justify-between items-start"><div class="pr-2  w-[79%]"><h3 class="font-semibold text-gray-800 truncate"> </h3> <div class="mt-1"><span class="text-xl font-bold text-blue-600"> </span></div></div> <button title="Edit Print Info"><svg class="w-5 h-5 text-blue-600 group-hover:text-blue-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg> <span class="ml-1 text-sm font-medium text-blue-600 group-hover:text-blue-800 hidden md:inline">Edit</span></button></div> <div class="mt-3 space-y-2 text-sm text-gray-600"><div class="flex items-center"><svg class="w-4 h-4 mr-1 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path></svg> <span> </span></div> <div class="flex items-center"><svg class="w-4 h-4 mr-1 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path></svg> <span> </span></div> <div class="flex items-center"><svg class="w-4 h-4 mr-1 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <span class="truncate"> </span></div> <div class="flex items-center"><svg class="w-4 h-4 mr-1 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> <span class="truncate"> </span></div></div></div> <div> </div></div>'),_a=k('<div class="col-span-full text-center py-12"><div class="text-gray-400 mb-4"><svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <h3 class="text-xl font-semibold text-gray-700">No products found</h3> <p class="text-gray-500 mt-2"> </p></div>'),ka=k('<span class="px-2 py-1.5 text-gray-500">...</span>'),Pa=k("<button> </button>"),Sa=k('<div class="mt-8 flex flex-col sm:flex-row items-center justify-between gap-4"><div class="text-sm text-gray-600"> </div> <div class="flex items-center gap-1"><button class="px-3 py-1.5 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors" title="Previous page"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button> <!> <button class="px-3 py-1.5 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors" title="Next page"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button></div> <div class="flex items-center gap-2 text-sm"><label for="itemsPerPage" class="text-gray-600">Items per page:</label> <select id="itemsPerPage" class="px-2 py-1 border border-gray-300 text-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>12</option><option>24</option><option>48</option><option>96</option></select></div></div>'),Ma=k('<div class="products-container"><div class="products-grid grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div> <!></div>');function $a(i,o){Ve(o,!1);const l=W(),c=W(),b=W();let g=K(o,"filteredProducts",8),v=K(o,"selectedProducts",8),s=K(o,"toggleProduct",8),S=K(o,"openEditModal",8),w=K(o,"showSoldItems",8),z=W(1),$=W(24);function B(C){if(C>=1&&C<=e(c)){m(z,C);const x=document.getElementById("searchBar");x&&x.scrollIntoView({behavior:"smooth"})}}lt(()=>(jt(g()),e(z),e($)),()=>{m(l,g().slice((e(z)-1)*e($),e(z)*e($)))}),lt(()=>(jt(g()),e($)),()=>{m(c,Math.ceil(g().length/e($)))}),lt(()=>(e(c),e(z)),()=>{m(b,(()=>{const C=[];if(e(c)<=5)for(let E=1;E<=e(c);E++)C.push(E);else{C.push(1);let E=Math.max(2,e(z)-1),U=Math.min(e(c)-1,e(z)+1);e(z)<=3&&(U=4),e(z)>=e(c)-2&&(E=e(c)-3),E>2&&C.push("...");for(let V=E;V<=U;V++)C.push(V);U<e(c)-1&&C.push("..."),e(c)>1&&C.push(e(c))}return C})())}),Bt(),He();var ee=Ma(),F=r(ee);gt(F,5,()=>e(l),mt,(C,x)=>{var E=wa(),U=r(E);{var V=A=>{var ve=ya();u(A,ve)};M(U,A=>{e(x).sold&&A(V)})}var re=a(U,2),G=r(re),le=r(G),se=r(le),N=r(se,!0);t(se);var j=a(se,2),ue=r(j),fe=r(ue);t(ue),t(j),t(le);var pe=a(le,2);D(pe,1,"p-2 bg-blue-50 rounded-full hover:bg-blue-100 transition-colors flex items-center group "),t(G);var te=a(G,2),Q=r(te),ne=a(r(Q),2),ae=r(ne);t(ne),t(Q);var oe=a(Q,2),ce=a(r(oe),2),f=r(ce);t(ce),t(oe);var n=a(oe,2),P=a(r(n),2),_=r(P);t(P),t(n);var q=a(n,2),J=a(r(q),2),h=r(J);t(J),t(q),t(te),t(re);var y=a(re,2),L=r(y,!0);t(y),t(E),be((A,ve,ge)=>{D(E,1,A),Y(N,e(x).name),Y(fe,`£${ve??""}`),Y(ae,`SKU: ${e(x).sku??""}`),Y(f,`IM SKU: ${e(x).imSKU??""}`),Y(_,`Seller: ${e(x).seller??""}`),Y(h,`Location: ${e(x).location??""}`),D(y,1,ge),Y(L,e(x).sold?"Sold - Selected":"Selected")},[()=>`bg-white rounded-xl shadow-md overflow-hidden border-2 transition-all duration-200 relative cursor-pointer
                    ${v().find(A=>A.id===e(x).id)?"border-blue-500 shadow-lg":"border-transparent"}`,()=>e(x).price.toFixed(2),()=>`py-1 text-center text-sm font-medium
                    ${v().find(A=>A.id===e(x).id)?e(x).sold?"bg-red-100 text-red-700":"bg-blue-50 text-blue-700":"hidden"}`],ze),Z("click",pe,Sr(()=>S()(e(x)))),Z("click",E,()=>s()(e(x))),u(C,E)},C=>{var x=_a(),E=a(r(x),4),U=r(E,!0);t(E),t(x),be(()=>Y(U,w()?"No sold items match your search":"No available items match your search")),u(C,x)}),t(F);var O=a(F,2);{var H=C=>{var x=Sa(),E=r(x),U=r(E);t(E);var V=a(E,2),re=r(V),G=a(re,2);gt(G,1,()=>e(b),mt,(te,Q)=>{var ne=Be(),ae=_e(ne);{var oe=f=>{var n=ka();u(f,n)},ce=f=>{var n=Pa(),P=r(n,!0);t(n),be(()=>{D(n,1,`px-3 py-1.5 rounded-md border transition-colors
                                ${e(z)===e(Q)?"bg-blue-600 border-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-50"}`),Y(P,e(Q))}),Z("click",n,()=>B(e(Q))),u(f,n)};M(ae,f=>{e(Q)==="..."?f(oe):f(ce,!1)})}u(te,ne)});var le=a(G,2);t(V);var se=a(V,2),N=a(r(se),2);be(()=>{e($),mr(()=>{})});var j=r(N);j.value=(j.__value=12)==null?"":12;var ue=a(j);ue.value=(ue.__value=24)==null?"":24;var fe=a(ue);fe.value=(fe.__value=48)==null?"":48;var pe=a(fe);pe.value=(pe.__value=96)==null?"":96,t(N),t(se),t(x),be((te,Q)=>{Y(U,`Showing ${te??""} 
                to ${Q??""} 
                of ${g().length??""} products`),re.disabled=e(z)===1,le.disabled=e(z)===e(c)},[()=>Math.min((e(z)-1)*e($)+1,g().length),()=>Math.min(e(z)*e($),g().length)],ze),Z("click",re,()=>B(e(z)-1)),Z("click",le,()=>B(e(z)+1)),kr(N,()=>e($),te=>m($,te)),u(C,x)};M(O,C=>{g().length>e($)&&C(H)})}t(ee),u(i,ee),We()}var Ca=Vt('<svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>'),Ea=k("<button><span> </span> <!></button>"),Na=k('<div class="animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-500"></div>'),ja=k('<div class="animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-500 mr-2"></div>'),za=k('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-2xl shadow-xl w-full max-w-md"><div class="p-6 border-b flex justify-between items-center"><h2 class="text-xl font-bold text-gray-800">System Settings</h2> <button class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 space-y-4"><div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg text-black"><div class="flex items-center"><!> <span>Printer Status:</span></div> <span class="font-medium"><!></span></div> <button class="w-full flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"><!> </button> <button class="w-full flex items-center justify-center px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors"><!> Restart Raspberry Pi</button> <button class="w-full flex items-center justify-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"><!> Shutdown Raspberry Pi</button></div></div></div>'),Ba=k('<div class="bg-white rounded-xl shadow-lg p-4 mb-2" id="searchBar"><div class="relative mb-4"><div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"><svg class="w-5 h-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div> <input type="text" class="text-black w-full pl-10 pr-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Search by name, SKU, seller or location..."></div> <div class="flex flex-wrap gap-2 mt-2 justify-between items-center"><div class="flex flex-wrap gap-2"></div> <div class="flex flex-wrap gap-2 items-center"><div class="flex items-center mr-2"><!></div> <button class="flex items-center min-w-[220px] px-4 py-2.5 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"><!> </button> <button class="px-4 py-2.5 rounded-lg font-medium flex items-center bg-green-600/80 text-white hover:bg-green-600 transition-colors" title="Refresh stock"><!></button> <button class="px-4 py-2.5 rounded-lg font-medium flex items-center bg-green-600/80 text-white hover:bg-green-600 transition-colors" title="Add stock"><!></button> <button class="px-4 py-2.5 rounded-lg font-medium flex items-center bg-gray-600/80 text-white hover:bg-gray-600 transition-colors" title="Settings"><!></button></div></div></div> <!>',1);function La(i,o){Ve(o,!1);let l=K(o,"searchTerm",12,""),c=K(o,"fetchProducts",8),b=K(o,"showPrintModal",12),g=K(o,"selectedProducts",8),v=K(o,"showAddProductModal",12),s=K(o,"handleSort",8),S=K(o,"sortConfig",8),w=K(o,"sortOptions",24,()=>[]),z=W(!1),$=K(o,"printerConnected",12),B=W(!1);async function ee(){m(B,!0);try{const n=await fetch(`${Xe}/reconnect_printer`);if(n.ok){const P=await n.json();$(P.connected)}else $(!1)}catch(n){console.error("Failed to check printer status:",n),$(!1)}finally{m(B,!1)}}async function F(){if(confirm("Are you sure you want to restart the Raspberry Pi?"))try{(await fetch(`${Xe}/restart`,{method:"POST"})).ok?alert("Raspberry Pi is restarting..."):alert("Failed to restart Raspberry Pi")}catch(n){console.error("Failed to restart Pi:",n),alert("Failed to restart Raspberry Pi")}}async function O(){if(confirm("Are you sure you want to shutdown the Raspberry Pi?"))try{(await fetch(`${Xe}/shutdown`,{method:"POST"})).ok?alert("Raspberry Pi is shutting down..."):alert("Failed to shutdown Raspberry Pi")}catch(n){console.error("Failed to shutdown Pi:",n),alert("Failed to shutdown Raspberry Pi")}}He();var H=Ba(),C=_e(H),x=r(C),E=a(r(x),2);R(E),t(x);var U=a(x,2),V=r(U);gt(V,5,w,mt,(n,P)=>{var _=Ea(),q=r(_),J=r(q,!0);t(q);var h=a(q,2);{var y=L=>{var A=Ca();be(()=>D(A,0,`ml-1.5 w-4 h-4 ${S().direction==="asc"?"":"transform rotate-180"}`)),u(L,A)};M(h,L=>{S().key===e(P).id&&L(y)})}t(_),be(()=>{D(_,1,`px-3 py-1.5 text-sm rounded-full border transition-colors flex items-center
                  ${S().key===e(P).id?"bg-blue-100 border-blue-300 text-blue-700":"bg-gray-100 border-gray-200 text-gray-700 hover:bg-gray-200"}`),Y(J,e(P).name)}),Z("click",_,()=>s()(e(P).id)),u(n,_)}),t(V);var re=a(V,2),G=r(re),le=r(G);{var se=n=>{var P=Na();u(n,P)},N=(n,P)=>{{var _=J=>{Ht(J,{size:20,class:"text-green-500"})},q=J=>{Ft(J,{size:20,class:"text-red-500"})};M(n,J=>{$()?J(_):J(q,!1)},P)}};M(le,n=>{e(B)?n(se):n(N,!1)})}t(G);var j=a(G,2),ue=r(j);Gt(ue,{size:30,class:"mr-2"});var fe=a(ue);t(j);var pe=a(j,2),te=r(pe);Er(te,{size:30,class:""}),t(pe);var Q=a(pe,2),ne=r(Q);Cr(ne,{size:30,class:""}),t(Q);var ae=a(Q,2),oe=r(ae);jr(oe,{size:30,class:""}),t(ae),t(re),t(U),t(C);var ce=a(C,2);{var f=n=>{var P=za(),_=r(P),q=r(_),J=a(r(q),2);t(q);var h=a(q,2),y=r(h),L=r(y),A=r(L);{var ve=ie=>{var we=ja();u(ie,we)},ge=(ie,we)=>{{var Oe=me=>{Ht(me,{size:20,class:"text-green-500 mr-2"})},Ie=me=>{Ft(me,{size:20,class:"text-red-500 mr-2"})};M(ie,me=>{$()?me(Oe):me(Ie,!1)},we)}};M(A,ie=>{e(B)?ie(ve):ie(ge,!1)})}Pe(2),t(L);var he=a(L,2),ye=r(he);{var ke=ie=>{var we=ft("Checking...");u(ie,we)},Se=(ie,we)=>{{var Oe=me=>{var Ke=ft("Connected");u(me,Ke)},Ie=me=>{var Ke=ft("Disconnected");u(me,Ke)};M(ie,me=>{$()?me(Oe):me(Ie,!1)},we)}};M(ye,ie=>{e(B)?ie(ke):ie(Se,!1)})}t(he),t(y);var xe=a(y,2),Me=r(xe);const T=ze(()=>e(B)?"animate-spin ":"");Nr(Me,{size:18,get class(){return`mr-2 ${e(T)??""}`}});var $e=a(Me);t(xe);var Ne=a(xe,2),Le=r(Ne);Kt(Le,{size:18,class:"mr-2"}),Pe(),t(Ne);var je=a(Ne,2),Ce=r(je);Kt(Ce,{size:18,class:"mr-2"}),Pe(),t(je),t(h),t(_),t(P),be(()=>{xe.disabled=e(B),Y($e,` ${(e(B)?"Reconnecting...":"Reconnect Printer")??""}`)}),Z("click",J,()=>m(z,!1)),Z("click",xe,ee),Z("click",Ne,F),Z("click",je,O),u(n,P)};M(ce,n=>{e(z)&&n(f)})}be(()=>{yr(G,"title",$()?"Printer connected":"Printer disconnected"),j.disabled=g().length===0,Y(fe,` Print Selected (${g().length??""})`)}),X(E,l),Z("click",j,()=>{b(!0)}),Z("click",pe,function(...n){var P;(P=c())==null||P.apply(this,n)}),Z("click",Q,()=>{v(!0)}),Z("click",ae,()=>m(z,!0)),u(i,H),We()}var Aa=k('<div class="flex justify-center items-center h-64"><div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"></div> <span class="ml-3 text-gray-600">Loading products...</span></div>'),Ta=k('<div class="bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-red-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><p class="text-sm text-red-700"> </p> <button class="mt-2 px-3 py-1 bg-red-100 text-red-700 rounded text-sm hover:bg-red-200">Retry</button></div></div></div>'),Oa=k('<!> <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"><div class="bg-white rounded-xl shadow p-5"><div class="text-gray-500 flex items-center"><svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg> <span class="font-medium">Total Items</span></div> <div class="text-3xl text-black font-bold mt-2"> </div></div> <div class="bg-white rounded-xl shadow p-5"><div class="text-gray-500 flex items-center"><svg class="w-6 h-6 mr-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="font-medium">Available</span></div> <div class="text-3xl font-bold mt-2 text-black"> </div></div> <div class="bg-white rounded-xl shadow p-5"><div class="text-gray-500 flex items-center"><svg class="w-6 h-6 mr-2 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="font-medium">Sold</span></div> <div class="text-3xl font-bold mt-2 text-black"> </div></div></div> <!>',1),Ia=k('<button class="fab-enter fixed bottom-6 right-6 z-50 p-4 bg-blue-600 rounded-full shadow-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 text-white flex items-center justify-center svelte-7fy406"><!> <span class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center"> </span></button>'),Ua=k('<div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 p-4 md:p-8"><div class="max-w-7xl mx-auto"><div class="mb-8 text-center"><h1 class="text-3xl md:text-4xl font-bold text-gray-800">Iain Marr Antiques</h1> <p class="text-gray-600 mt-2">Inventory Management System</p></div> <!></div> <!> <!> <!> <!></div>');function Da(i,o){Ve(o,!1);const l=W(),c=W();let b=W([]),g=W([]),v=W(""),s=W(!1),S=W(!1),w=W(null),z=W("products"),$=W(!1),B=W(!1),ee=W(null),F=W(!0),O=W({key:"sku",direction:"asc"}),H=W([{id:"sku",name:"SKU"},{id:"name",name:"Name"},{id:"price",name:"Price"}]),C=W();const x=(f,n,P="")=>f[n]!==void 0&&f[n]!==""?f[n]:P;async function E(){try{m(B,!0),m(ee,null);const f=await fetch(Xe+"/get_stock",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({})});if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);const n=await f.json(),P=n.data;m(C,n.printer_connected),m(b,P.map(_=>({id:x(_,"SKU NO.",""),name:x(_,"ITEM DESCRIPTION",""),price:Number(x(_,"SELLING PRICE",0)),imSKU:x(_,"IM SKU",""),sku:x(_,"SKU NO.",""),purchasePrice:Number(x(_,"PURCHASE PRICE",0)),seller:x(_,"NAME/ADDRESS SELLER",""),dateBought:x(_,"DATE BOUGHT",""),sold:x(_,"SOLD","FALSE")==="TRUE",commission:x(_,"Commission £",0),dateSold:x(_,"DATE SOLD",""),invoiceNo:x(_,"INVOICE NO. XERO",""),onWebsite:x(_,"ON WEBSITE","FALSE")==="TRUE",location:x(_,"location","")})))}catch(f){console.error("Failed to fetch products:",f),m(ee,"Failed to load products. Please try again later.")}finally{m(B,!1)}}Jt(E);function U(f){let n="asc";e(O).key===f&&e(O).direction==="asc"&&(n="desc"),m(O,{key:f,direction:n})}function V(f){e(g).find(n=>n.id===f.id)?m(g,e(g).filter(n=>n.id!==f.id)):m(g,[...e(g),{...f}])}function re(f){m(w,{...f}),m(z,"products"),m(s,!0)}function G(){m($,!0)}lt(()=>(e(b),e(O)),()=>{m(l,[...e(b)].sort((f,n)=>{let P=f[e(O).key],_=n[e(O).key];if(e(O).key==="sku")return e(O).direction==="asc"?0:-1;if(typeof P=="number"&&typeof _=="number")return e(O).direction==="asc"?P-_:_-P;if(typeof P=="string"&&typeof _=="string"){if(P=P.toLowerCase(),_=_.toLowerCase(),P<_)return e(O).direction==="asc"?-1:1;if(P>_)return e(O).direction==="asc"?1:-1}return 0}))}),lt(()=>(e(l),e(F),e(v)),()=>{m(c,e(l).filter(f=>(e(F)||!f.sold)&&(String(f.name||"").toLowerCase().includes(e(v).toLowerCase())||String(f.imSKU||"").toLowerCase().includes(e(v).toLowerCase())||String(f.sku||"").toLowerCase().includes(e(v).toLowerCase())||String(f.seller||"").toLowerCase().includes(e(v).toLowerCase())||String(f.location||"").toLowerCase().includes(e(v).toLowerCase()))))}),Bt(),He();var le=Ua();sr(f=>{xr.title="Iain Marr Antiques"});var se=r(le),N=a(r(se),2);{var j=f=>{var n=Aa();u(f,n)},ue=(f,n)=>{{var P=q=>{var J=Ta(),h=r(J),y=a(r(h),2),L=r(y),A=r(L,!0);t(L);var ve=a(L,2);t(y),t(h),t(J),be(()=>Y(A,e(ee))),Z("click",ve,E),u(q,J)},_=q=>{var J=Oa(),h=_e(J);La(h,{handleSort:U,openPrintModal:G,fetchProducts:E,get printerConnected(){return e(C)},set printerConnected(T){m(C,T)},get sortConfig(){return e(O)},set sortConfig(T){m(O,T)},get sortOptions(){return e(H)},set sortOptions(T){m(H,T)},get showAddProductModal(){return e(S)},set showAddProductModal(T){m(S,T)},get searchTerm(){return e(v)},set searchTerm(T){m(v,T)},get showSoldItems(){return e(F)},set showSoldItems(T){m(F,T)},get showPrintModal(){return e($)},set showPrintModal(T){m($,T)},get selectedProducts(){return e(g)},set selectedProducts(T){m(g,T)},$$legacy:!0});var y=a(h,2),L=r(y),A=a(r(L),2),ve=r(A,!0);t(A),t(L);var ge=a(L,2),he=a(r(ge),2),ye=r(he,!0);t(he),t(ge);var ke=a(ge,2),Se=a(r(ke),2),xe=r(Se,!0);t(Se),t(ke),t(y);var Me=a(y,2);$a(Me,{toggleProduct:V,openEditModal:re,get filteredProducts(){return e(c)},set filteredProducts(T){m(c,T)},get selectedProducts(){return e(g)},set selectedProducts(T){m(g,T)},get showSoldItems(){return e(F)},set showSoldItems(T){m(F,T)},$$legacy:!0}),be((T,$e)=>{Y(ve,e(b).length),Y(ye,T),Y(xe,$e)},[()=>e(b).filter(T=>!T.sold).length,()=>e(b).filter(T=>T.sold).length],ze),u(q,J)};M(f,q=>{e(ee)?q(P):q(_,!1)},n)}};M(N,f=>{e(B)?f(j):f(ue,!1)})}t(se);var fe=a(se,2);{var pe=f=>{var n=Ia(),P=r(n);Gt(P,{size:30});var _=a(P,2),q=r(_,!0);t(_),t(n),be(()=>Y(q,e(g).length)),Z("click",n,G),u(f,n)};M(fe,f=>{e(g).length>0&&f(pe)})}var te=a(fe,2);{var Q=f=>{da(f,{get editedProduct(){return e(w)},set editedProduct(n){m(w,n)},get showEditProductModal(){return e(s)},set showEditProductModal(n){m(s,n)},get activeTab(){return e(z)},set activeTab(n){m(z,n)},get products(){return e(b)},set products(n){m(b,n)},$$legacy:!0})};M(te,f=>{e(s)&&f(Q)})}var ne=a(te,2);{var ae=f=>{Wr(f,{get showAddProductModal(){return e(S)},set showAddProductModal(n){m(S,n)},get products(){return e(b)},set products(n){m(b,n)},$$legacy:!0})};M(ne,f=>{e(S)&&f(ae)})}var oe=a(ne,2);{var ce=f=>{ha(f,{get selectedProducts(){return e(g)},set selectedProducts(n){m(g,n)},get showPrintModal(){return e($)},set showPrintModal(n){m($,n)},get products(){return e(b)},set products(n){m(b,n)},$$legacy:!0})};M(oe,f=>{e($)&&f(ce)})}t(le),u(i,le),We()}export{Da as component};
