import{k as ar,l as lr,o as zt,p as Vt,a as b,c as Le,t as _,q as J,s as Z,b as ft,r as sr}from"../chunks/foFxs5JA.js";import{i as He}from"../chunks/DIZ1sQIQ.js";import{h as Ae,a as Ot,d as Ct,b as or,E as ir,c as dr,aM as nr,af as cr,ag as vr,P as It,O as Ut,H as ur,p as br,Q as fr,ap as pr,aN as gr,u as Wt,r as Dt,e as qt,f as Ve,j as r,s as a,k as t,t as ve,$ as Be,i as We,g as Pe,w as e,aO as D,aP as Me,F as m,aQ as je,ac as Jt,aR as lt,x as jt,aS as Bt,aT as mr,aU as xr}from"../chunks/z9wYe7VO.js";import{b as hr,l as Te,p as F,s as De,i as P}from"../chunks/BYMvGGKb.js";import"../chunks/CfKNTpO6.js";import{e as gt,i as mt,s as Ke,a as Kt,r as R,b as q,t as st,c as yr}from"../chunks/fw6KHUEd.js";function wr(d,o,l,c,f,g){let v=Ae;Ae&&Ot();var s,S,w=null;Ae&&Ct.nodeType===1&&(w=Ct,Ot());var B=Ae?Ct:d,M;or(()=>{const L=o()||null;var X=nr;L!==s&&(M&&(L===null?br(M,()=>{M=null,S=null}):L===S?fr(M):pr(M)),L&&L!==S&&(M=dr(()=>{if(w=Ae?w:document.createElementNS(X,L),ar(w,w),c){Ae&&lr(L)&&w.append(document.createComment(""));var H=Ae?cr(w):w.appendChild(vr());Ae&&(H===null?It(!1):Ut(H)),c(w,H)}ur.nodes_end=w,B.before(w)})),s=L,s&&(S=s))},ir),v&&(It(!0),Ut(B))}function Q(d,o,l=o){var c=gr();zt(d,"input",f=>{var g=f?d.defaultValue:d.value;if(g=Et(d)?Nt(g):g,l(g),c&&g!==(g=o())){var v=d.selectionStart,s=d.selectionEnd;d.value=g??"",s!==null&&(d.selectionStart=v,d.selectionEnd=Math.min(s,d.value.length))}}),(Ae&&d.defaultValue!==d.value||Wt(o)==null&&d.value)&&l(Et(d)?Nt(d.value):d.value),Dt(()=>{var f=o();Et(d)&&f===Nt(d.value)||d.type==="date"&&!f&&!d.value||f!==d.value&&(d.value=f??"")})}function xt(d,o,l=o){zt(d,"change",c=>{var f=c?d.defaultChecked:d.checked;l(f)}),(Ae&&d.defaultChecked!==d.checked||Wt(o)==null)&&l(d.checked),Dt(()=>{var c=o();d.checked=!!c})}function Et(d){var o=d.type;return o==="number"||o==="range"}function Nt(d){return d===""?null:+d}function Zt(d,o,l){if(d.multiple)return Pr(d,o);for(var c of d.options){var f=pt(c);if(hr(f,o)){c.selected=!0;return}}(!l||o!==void 0)&&(d.selectedIndex=-1)}function _r(d,o){qt(()=>{var l=new MutationObserver(()=>{var c=d.__value;Zt(d,c)});return l.observe(d,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{l.disconnect()}})}function kr(d,o,l=o){var c=!0;zt(d,"change",f=>{var g=f?"[selected]":":checked",v;if(d.multiple)v=[].map.call(d.querySelectorAll(g),pt);else{var s=d.querySelector(g)??d.querySelector("option:not([disabled])");v=s&&pt(s)}l(v)}),qt(()=>{var f=o();if(Zt(d,f,c),c&&f===void 0){var g=d.querySelector(":checked");g!==null&&(f=pt(g),l(f))}d.__value=f,c=!1}),_r(d)}function Pr(d,o){for(var l of d.options)l.selected=~o.indexOf(pt(l))}function pt(d){return"__value"in d?d.__value:d.value}function Sr(d){return function(...o){var l=o[0];return l.stopPropagation(),d==null?void 0:d.apply(this,o)}}/**
 * @license lucide-svelte v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var $r=Vt("<svg><!><!></svg>");function qe(d,o){const l=Te(o,["children","$$slots","$$events","$$legacy"]),c=Te(l,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);Ve(o,!1);let f=F(o,"name",8,void 0),g=F(o,"color",8,"currentColor"),v=F(o,"size",8,24),s=F(o,"strokeWidth",8,2),S=F(o,"absoluteStrokeWidth",8,!1),w=F(o,"iconNode",24,()=>[]);const B=(...O)=>O.filter((V,$,h)=>!!V&&h.indexOf(V)===$).join(" ");He();var M=$r();let L;var X=r(M);gt(X,1,w,mt,(O,V)=>{let $=()=>e(V)[0],h=()=>e(V)[1];var N=Le(),U=Pe(N);wr(U,$,!0,(W,ae)=>{let G;ve(()=>G=Kt(W,G,{...h()}))}),b(O,N)});var H=a(X);Ke(H,o,"default",{},null),t(M),ve((O,V)=>L=Kt(M,L,{...Mr,...c,width:v(),height:v(),stroke:g(),"stroke-width":O,class:V}),[()=>S()?Number(s())*24/Number(v()):s(),()=>B("lucide-icon","lucide",f()?`lucide-${f()}`:"",l.class)],Be),b(d,M),We()}function Cr(d,o){const l=Te(o,["children","$$slots","$$events","$$legacy"]);qe(d,De({name:"circle-plus"},()=>l,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M8 12h8"}],["path",{d:"M12 8v8"}]],children:(f,g)=>{var v=Le(),s=Pe(v);Ke(s,o,"default",{},null),b(f,v)},$$slots:{default:!0}}))}function Er(d,o){const l=Te(o,["children","$$slots","$$events","$$legacy"]);qe(d,De({name:"folder-sync"},()=>l,{iconNode:[["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v.5"}],["path",{d:"M12 10v4h4"}],["path",{d:"m12 14 1.535-1.605a5 5 0 0 1 8 1.5"}],["path",{d:"M22 22v-4h-4"}],["path",{d:"m22 18-1.535 1.605a5 5 0 0 1-8-1.5"}]],children:(f,g)=>{var v=Le(),s=Pe(v);Ke(s,o,"default",{},null),b(f,v)},$$slots:{default:!0}}))}function Rt(d,o){const l=Te(o,["children","$$slots","$$events","$$legacy"]);qe(d,De({name:"power"},()=>l,{iconNode:[["path",{d:"M12 2v10"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04"}]],children:(f,g)=>{var v=Le(),s=Pe(v);Ke(s,o,"default",{},null),b(f,v)},$$slots:{default:!0}}))}function Gt(d,o){const l=Te(o,["children","$$slots","$$events","$$legacy"]);qe(d,De({name:"printer"},()=>l,{iconNode:[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1"}]],children:(f,g)=>{var v=Le(),s=Pe(v);Ke(s,o,"default",{},null),b(f,v)},$$slots:{default:!0}}))}function Nr(d,o){const l=Te(o,["children","$$slots","$$events","$$legacy"]);qe(d,De({name:"refresh-cw"},()=>l,{iconNode:[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]],children:(f,g)=>{var v=Le(),s=Pe(v);Ke(s,o,"default",{},null),b(f,v)},$$slots:{default:!0}}))}function jr(d,o){const l=Te(o,["children","$$slots","$$events","$$legacy"]);qe(d,De({name:"settings"},()=>l,{iconNode:[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]],children:(f,g)=>{var v=Le(),s=Pe(v);Ke(s,o,"default",{},null),b(f,v)},$$slots:{default:!0}}))}function Ft(d,o){const l=Te(o,["children","$$slots","$$events","$$legacy"]);qe(d,De({name:"wifi-off"},()=>l,{iconNode:[["path",{d:"M12 20h.01"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764"}],["path",{d:"m2 2 20 20"}]],children:(f,g)=>{var v=Le(),s=Pe(v);Ke(s,o,"default",{},null),b(f,v)},$$slots:{default:!0}}))}function Ht(d,o){const l=Te(o,["children","$$slots","$$events","$$legacy"]);qe(d,De({name:"wifi"},()=>l,{iconNode:[["path",{d:"M12 20h.01"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0"}]],children:(f,g)=>{var v=Le(),s=Pe(v);Ke(s,o,"default",{},null),b(f,v)},$$slots:{default:!0}}))}const Xe="http://192.168.178.49:8080";var zr=_('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Br=_('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Lr=_('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Zero</span>'),Ar=_('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Zero</span>'),Tr=_('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Or=_('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Ir=_('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Ur=_('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Kr=_('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Zero</span>'),Rr=_('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Fr=_('<svg class=" animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span class="text-white">Adding...</span>',1),Hr=_('<span class="text-white">Add Product</span>'),Vr=_(`<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"><div class="p-6 border-b flex justify-between items-center"><h2 class="text-xl font-bold text-gray-800">Add Product</h2> <button class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex-1 overflow-y-auto p-6"><div class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">SKU</label></div> <input type="text"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">IM SKU</label> <!></div> <input type="text"></div></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Product Name</label> <!></div> <input type="text"></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="text-black block text-sm font-medium text-gray-700">Selling Price (£)</label> <!></div> <input type="number" step="0.01"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Purchase Price (£)</label> <!></div> <input type="number" step="0.01"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Seller</label> <!></div> <input type="text"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Location</label> <!></div> <input type="text"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Date Bought</label> <!></div> <input type="text"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Date Sold</label> <!></div> <input type="text"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Commission (£)</label> <!></div> <input type="number" step="0.01"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Invoice No</label> <!></div> <input type="text"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><label class="block text-sm font-medium text-gray-700 mb-1">On Website</label> <div class="flex items-center mt-2"><input type="checkbox" id="onWebsite" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"> <label for="onWebsite" class="ml-2 block text-sm text-gray-900">Published on website</label></div></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">Sold Status</label> <div class="flex items-center"><input type="checkbox" id="soldCheckbox" class="text-black h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"> <label for="soldCheckbox" class="ml-2 block text-sm text-gray-900">Mark as sold</label></div></div></div> <div class="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg"><div class="flex items-center text-yellow-800"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <span class="font-medium">Note on empty fields</span></div> <p class="text-sm text-yellow-700 mt-2">Yellow highlighted fields are empty or contain zero values. These fields are not required, 
                        but you may want to review them before saving.</p></div></div></div> <div class="p-6 border-t flex justify-end space-x-3"><button class="px-5 py-2.5 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50">Cancel</button> <button><!></button></div></div></div>`);function Wr(d,o){Ve(o,!1),F(o,"saveEditedProduct",8);let l=F(o,"showAddProductModal",12),c=F(o,"products",8),f=D(!1);function g(n){const I=n.match(/^([A-Za-z\s]*)(\d+)([A-Za-z]*)$/);if(!I)return console.error("Invalid SKU format:",n),n;const Qe=I[1],vt=parseInt(I[2],10),ut=I[3],Fe=vt+1;return`${Qe}${Fe}${ut}`}let v=c()[c().length-1].sku;console.log(v);let s=D({id:g(v),name:"",price:0,imSKU:"",sku:g(v),purchasePrice:0,seller:"",dateBought:"",sold:!1,commission:0,dateSold:"",invoiceNo:"",onWebsite:!1,location:""});async function S(){m(f,!0);try{const n=await fetch(Xe+"/add_product",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({product:e(s)})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const I=await n.json();st.success("Product added successfully!"),l(!1)}catch(n){console.error("Failed to add product:",n),st.error("Failed to add product. Please try again.")}finally{m(f,!1)}}function w(n){return n===""||n===0||n===null||n===void 0}He();var B=Vr(),M=r(B),L=r(M),X=a(r(L),2);t(L);var H=a(L,2),O=r(H),V=r(O),$=r(V),h=a(r($),2);R(h),q(h,1,"border-gray-300 bg-gray-100 text-black/50 w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-not-allowed"),t($);var N=a($,2),U=r(N),W=a(r(U),2);{var ae=n=>{var I=zr();b(n,I)};P(W,n=>{w(e(s).imSKU)&&n(ae)})}t(U);var G=a(U,2);R(G),t(N),t(V);var de=a(V,2),le=r(de),C=a(r(le),2);{var j=n=>{var I=Br();b(n,I)};P(C,n=>{w(e(s).name)&&n(j)})}t(le);var ue=a(le,2);R(ue),t(de);var me=a(de,2),be=r(me),ee=r(be),Y=a(r(ee),2);{var fe=n=>{var I=Lr();b(n,I)};P(Y,n=>{e(s).price===0&&n(fe)})}t(ee);var te=a(ee,2);R(te),t(be);var se=a(be,2),ne=r(se),ce=a(r(ne),2);{var i=n=>{var I=Ar();b(n,I)};P(ce,n=>{e(s).purchasePrice===0&&n(i)})}t(ne);var u=a(ne,2);R(u),t(se),t(me);var E=a(me,2),k=r(E),K=r(k),x=a(r(K),2);{var y=n=>{var I=Tr();b(n,I)};P(x,n=>{w(e(s).seller)&&n(y)})}t(K);var T=a(K,2);R(T),t(k);var A=a(k,2),oe=r(A),pe=a(r(oe),2);{var we=n=>{var I=Or();b(n,I)};P(pe,n=>{w(e(s).location)&&n(we)})}t(oe);var _e=a(oe,2);R(_e),t(A),t(E);var $e=a(E,2),Ce=r($e),xe=r(Ce),Ee=a(r(xe),2);{var ze=n=>{var I=Ir();b(n,I)};P(Ee,n=>{w(e(s).dateBought)&&n(ze)})}t(xe);var Ne=a(xe,2);R(Ne),t(Ce);var Se=a(Ce,2),z=r(Se),he=a(r(z),2);{var ye=n=>{var I=Ur();b(n,I)};P(he,n=>{w(e(s).dateSold)&&n(ye)})}t(z);var re=a(z,2);R(re),t(Se),t($e);var ke=a($e,2),Oe=r(ke),Ie=r(Oe),ge=a(r(Ie),2);{var Re=n=>{var I=Kr();b(n,I)};P(ge,n=>{e(s).commission===0&&n(Re)})}t(Ie);var Je=a(Ie,2);R(Je),t(Oe);var ht=a(Oe,2),ot=r(ht),et=a(r(ot),2);{var it=n=>{var I=Rr();b(n,I)};P(et,n=>{w(e(s).invoiceNo)&&n(it)})}t(ot);var Ze=a(ot,2);R(Ze),t(ht),t(ke);var tt=a(ke,2),dt=r(tt),yt=a(r(dt),2),Ge=r(yt);R(Ge),Me(2),t(yt),t(dt);var nt=a(dt,2),rt=a(r(nt),2),wt=r(rt);R(wt),Me(2),t(rt),t(nt),t(tt),Me(2),t(O),t(H);var _t=a(H,2),Ye=r(_t),Ue=a(Ye,2);let at;var ct=r(Ue);{var Pt=n=>{var I=Fr();Me(2),b(n,I)},St=n=>{var I=Hr();b(n,I)};P(ct,n=>{e(f)?n(Pt):n(St,!1)})}t(Ue),t(_t),t(M),t(B),ve((n,I,Qe,vt,ut,Fe,kt,bt)=>{q(G,1,n),q(ue,1,I),q(te,1,`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${e(s).price===0?"border-yellow-400 bg-yellow-50":"border-gray-300"}`),q(u,1,`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${e(s).purchasePrice===0?"border-yellow-400 bg-yellow-50":"border-gray-300"}`),q(T,1,Qe),q(_e,1,vt),q(Ne,1,ut),q(re,1,Fe),q(Je,1,`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${e(s).commission===0?"border-yellow-400 bg-yellow-50":"border-gray-300"}`),q(Ze,1,kt),at=q(Ue,1,"px-5 py-2.5 rounded-lg flex items-center justify-center min-w-[120px] disabled:opacity-50 disabled:cursor-not-allowed",null,at,bt),Ue.disabled=e(f)},[()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${w(e(s).imSKU)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                            ${w(e(s).name)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${w(e(s).seller)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${w(e(s).location)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${w(e(s).dateBought)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${w(e(s).dateSold)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                ${w(e(s).invoiceNo)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>({"bg-blue-600":!e(f),"bg-gray-400":e(f),"hover:bg-blue-700":!e(f)})],Be),J("click",X,()=>{l(!1)}),Q(h,()=>e(s).sku,n=>je(s,e(s).sku=n)),Q(G,()=>e(s).imSKU,n=>je(s,e(s).imSKU=n)),Q(ue,()=>e(s).name,n=>je(s,e(s).name=n)),Q(te,()=>e(s).price,n=>je(s,e(s).price=n)),Q(u,()=>e(s).purchasePrice,n=>je(s,e(s).purchasePrice=n)),Q(T,()=>e(s).seller,n=>je(s,e(s).seller=n)),Q(_e,()=>e(s).location,n=>je(s,e(s).location=n)),Q(Ne,()=>e(s).dateBought,n=>je(s,e(s).dateBought=n)),Q(re,()=>e(s).dateSold,n=>je(s,e(s).dateSold=n)),Q(Je,()=>e(s).commission,n=>je(s,e(s).commission=n)),Q(Ze,()=>e(s).invoiceNo,n=>je(s,e(s).invoiceNo=n)),xt(Ge,()=>e(s).onWebsite,n=>je(s,e(s).onWebsite=n)),xt(wt,()=>e(s).sold,n=>je(s,e(s).sold=n)),J("click",Ye,()=>{l(!1)}),J("click",Ue,S),b(d,B),We()}var Dr=_('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),qr=_('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Jr=_('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Zr=_('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Zero</span>'),Gr=_('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Zero</span>'),Yr=_('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Qr=_('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Xr=_('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),ea=_('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),ta=_('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Zero</span>'),ra=_('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),aa=_(`<div class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">SKU</label> <!></div> <input type="text" disabled></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">IM SKU</label> <!></div> <input type="text"></div></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Product Name</label> <!></div> <input type="text"></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="text-black block text-sm font-medium text-gray-700">Selling Price (£)</label> <!></div> <input type="number" step="0.01"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Purchase Price (£)</label> <!></div> <input type="number" step="0.01"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Seller</label> <!></div> <input type="text"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Location</label> <!></div> <input type="text"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Date Bought</label> <!></div> <input type="text"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Date Sold</label> <!></div> <input type="text"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Commission (£)</label> <!></div> <input type="number" step="0.01"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Invoice No</label> <!></div> <input type="text"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><label class="block text-sm font-medium text-gray-700 mb-1">On Website</label> <div class="flex items-center mt-2"><input type="checkbox" id="onWebsite" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded svelte-1mfa054"> <label for="onWebsite" class="ml-2 block text-sm text-gray-900">Published on website</label></div></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">Sold Status</label> <div class="flex items-center"><input type="checkbox" id="soldCheckbox" class="text-black h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded svelte-1mfa054"> <label for="soldCheckbox" class="ml-2 block text-sm text-gray-900">Mark as sold</label></div></div></div> <div class="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg svelte-1mfa054"><div class="flex items-center text-yellow-800"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <span class="font-medium">Note on empty fields</span></div> <p class="text-sm text-yellow-700 mt-2">Yellow highlighted fields are empty or contain zero values. These fields are not required, 
                                but you may want to review them before saving.</p></div></div>`),la=_('<div class="bg-gray-50 p-4 rounded-lg mb-4"><div class="flex items-center"><svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path></svg> <h3 class="font-medium">Label Preview</h3></div> <p class="text-sm text-gray-600 mt-1">This is a preview of how the label will look</p></div> <div class="border border-gray-300 rounded-lg p-6 max-w-xs mx-auto"><div class="text-center mb-4"><div class="text-xl font-bold">Iain Marr Antiques</div> <div class="text-xs text-gray-500">Est. 1990</div></div> <div class="text-center mb-2"><div class="font-semibold text-lg"> </div> <div class="text-2xl font-bold text-blue-700"> </div></div> <div class="flex justify-between text-xs mt-4"><div> </div> <div> </div></div> <div class="mt-6 text-center text-xs text-gray-500"><div> </div> <div> </div></div></div>',1),sa=_('<svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white svelte-1mfa054" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span class="text-white">Saving...</span>',1),oa=_('<span class="text-white">Save Changes</span>'),ia=_('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"><div class="p-6 border-b flex justify-between items-center"><h2 class="text-xl font-bold text-gray-800">Edit Product</h2> <button class="text-gray-400 hover:text-gray-600 svelte-1mfa054"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>  <div class="flex-1 overflow-y-auto p-6"><!></div> <div class="p-6 border-t flex justify-end space-x-3"><button class="px-5 py-2.5 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50 svelte-1mfa054">Cancel</button> <button><!></button></div></div></div>');function da(d,o){Ve(o,!1);let l=F(o,"editedProduct",12),c=F(o,"showEditProductModal",12),f=F(o,"activeTab",8),g=F(o,"products",12),v=D(!1),s=D(null);function S(C){return C===""||C===0||C===null||C===void 0}function w(){return JSON.stringify(e(s))!==JSON.stringify(l())}async function B(C){try{const j=await fetch(Xe+"/modify_product",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({editedProduct:C})});if(!j.ok)throw new Error(`HTTP error! status: ${j.status}`);return await j.json()}catch(j){throw console.error("Failed to update product:",j),new Error("Failed to update product. Please try again later.")}}async function M(){if(w()){m(v,!0);try{await B(l()),g(g().map(C=>C.id===l().id?l():C)),m(s,JSON.parse(JSON.stringify(l()))),st.success("Product updated successfully!"),c(!1)}catch(C){console.error("Save error:",C),st.error(C.message||"Failed to update product","error")}finally{m(v,!1)}}}Jt(()=>{l()&&(m(s,JSON.parse(JSON.stringify(l()))),console.log(e(s)))}),lt(()=>(jt(l()),e(s)),()=>{l()&&!e(s)&&m(s,JSON.parse(JSON.stringify(l())))}),Bt(),He();var L=ia(),X=r(L),H=r(X),O=a(r(H),2);t(H);var V=a(H,2),$=r(V);{var h=C=>{var j=Le(),ue=Pe(j);{var me=ee=>{var Y=aa(),fe=r(Y),te=r(fe),se=r(te),ne=a(r(se),2);{var ce=p=>{var ie=Dr();b(p,ie)};P(ne,p=>{S(l().sku)&&p(ce)})}t(se);var i=a(se,2);R(i),t(te);var u=a(te,2),E=r(u),k=a(r(E),2);{var K=p=>{var ie=qr();b(p,ie)};P(k,p=>{S(l().imSKU)&&p(K)})}t(E);var x=a(E,2);R(x),t(u),t(fe);var y=a(fe,2),T=r(y),A=a(r(T),2);{var oe=p=>{var ie=Jr();b(p,ie)};P(A,p=>{S(l().name)&&p(oe)})}t(T);var pe=a(T,2);R(pe),t(y);var we=a(y,2),_e=r(we),$e=r(_e),Ce=a(r($e),2);{var xe=p=>{var ie=Zr();b(p,ie)};P(Ce,p=>{l().price===0&&p(xe)})}t($e);var Ee=a($e,2);R(Ee),t(_e);var ze=a(_e,2),Ne=r(ze),Se=a(r(Ne),2);{var z=p=>{var ie=Gr();b(p,ie)};P(Se,p=>{l().purchasePrice===0&&p(z)})}t(Ne);var he=a(Ne,2);R(he),t(ze),t(we);var ye=a(we,2),re=r(ye),ke=r(re),Oe=a(r(ke),2);{var Ie=p=>{var ie=Yr();b(p,ie)};P(Oe,p=>{S(l().seller)&&p(Ie)})}t(ke);var ge=a(ke,2);R(ge),t(re);var Re=a(re,2),Je=r(Re),ht=a(r(Je),2);{var ot=p=>{var ie=Qr();b(p,ie)};P(ht,p=>{S(l().location)&&p(ot)})}t(Je);var et=a(Je,2);R(et),t(Re),t(ye);var it=a(ye,2),Ze=r(it),tt=r(Ze),dt=a(r(tt),2);{var yt=p=>{var ie=Xr();b(p,ie)};P(dt,p=>{S(l().dateBought)&&p(yt)})}t(tt);var Ge=a(tt,2);R(Ge),t(Ze);var nt=a(Ze,2),rt=r(nt),wt=a(r(rt),2);{var _t=p=>{var ie=ea();b(p,ie)};P(wt,p=>{S(l().dateSold)&&p(_t)})}t(rt);var Ye=a(rt,2);R(Ye),t(nt),t(it);var Ue=a(it,2),at=r(Ue),ct=r(at),Pt=a(r(ct),2);{var St=p=>{var ie=ta();b(p,ie)};P(Pt,p=>{l().commission===0&&p(St)})}t(ct);var n=a(ct,2);R(n),t(at);var I=a(at,2),Qe=r(I),vt=a(r(Qe),2);{var ut=p=>{var ie=ra();b(p,ie)};P(vt,p=>{S(l().invoiceNo)&&p(ut)})}t(Qe);var Fe=a(Qe,2);R(Fe),t(I),t(Ue);var kt=a(Ue,2),bt=r(kt),Lt=a(r(bt),2),Mt=r(Lt);R(Mt),Me(2),t(Lt),t(bt);var At=a(bt,2),Tt=a(r(At),2),$t=r(Tt);R($t),Me(2),t(Tt),t(At),t(kt),Me(2),t(Y),ve((p,ie,Yt,Qt,Xt,er,tr,rr)=>{q(i,1,p,"svelte-1mfa054"),q(x,1,ie,"svelte-1mfa054"),x.disabled=e(v),q(pe,1,Yt,"svelte-1mfa054"),pe.disabled=e(v),q(Ee,1,`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${l().price===0?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,"svelte-1mfa054"),Ee.disabled=e(v),q(he,1,`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${l().purchasePrice===0?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,"svelte-1mfa054"),he.disabled=e(v),q(ge,1,Qt,"svelte-1mfa054"),ge.disabled=e(v),q(et,1,Xt,"svelte-1mfa054"),et.disabled=e(v),q(Ge,1,er,"svelte-1mfa054"),Ge.disabled=e(v),q(Ye,1,tr,"svelte-1mfa054"),Ye.disabled=e(v),q(n,1,`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${l().commission===0?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,"svelte-1mfa054"),n.disabled=e(v),q(Fe,1,rr,"svelte-1mfa054"),Fe.disabled=e(v),Mt.disabled=e(v),$t.disabled=e(v)},[()=>`text-black/50 w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-not-allowed
                                        ${S(l().sku)?"border-yellow-400 bg-yellow-50":"border-gray-300 bg-gray-100"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${S(l().imSKU)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                    ${S(l().name)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${S(l().seller)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${S(l().location)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${S(l().dateBought)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${S(l().dateSold)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                        ${S(l().invoiceNo)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`],Be),Q(i,()=>l().sku,p=>l(l().sku=p,!0)),Q(x,()=>l().imSKU,p=>l(l().imSKU=p,!0)),Q(pe,()=>l().name,p=>l(l().name=p,!0)),Q(Ee,()=>l().price,p=>l(l().price=p,!0)),Q(he,()=>l().purchasePrice,p=>l(l().purchasePrice=p,!0)),Q(ge,()=>l().seller,p=>l(l().seller=p,!0)),Q(et,()=>l().location,p=>l(l().location=p,!0)),Q(Ge,()=>l().dateBought,p=>l(l().dateBought=p,!0)),Q(Ye,()=>l().dateSold,p=>l(l().dateSold=p,!0)),Q(n,()=>l().commission,p=>l(l().commission=p,!0)),Q(Fe,()=>l().invoiceNo,p=>l(l().invoiceNo=p,!0)),xt(Mt,()=>l().onWebsite,p=>l(l().onWebsite=p,!0)),xt($t,()=>l().sold,p=>l(l().sold=p,!0)),b(ee,Y)},be=ee=>{var Y=la(),fe=a(Pe(Y),2),te=a(r(fe),2),se=r(te),ne=r(se,!0);t(se);var ce=a(se,2),i=r(ce);t(ce),t(te);var u=a(te,2),E=r(u),k=r(E);t(E);var K=a(E,2),x=r(K);t(K),t(u);var y=a(u,2),T=r(y),A=r(T,!0);t(T);var oe=a(T,2),pe=r(oe,!0);t(oe),t(y),t(fe),ve((we,_e)=>{Z(ne,l().name),Z(i,`£${we??""}`),Z(k,`SKU: ${l().sku??""}`),Z(x,`IM: ${l().imSKU??""}`),Z(A,l().location),Z(pe,_e)},[()=>l().price.toFixed(2),()=>new Date().toLocaleDateString("en-GB")],Be),b(ee,Y)};P(ue,ee=>{f()==="products"?ee(me):ee(be,!1)})}b(C,j)};P($,C=>{l()&&C(h)})}t(V);var N=a(V,2),U=r(N),W=a(U,2);let ae;var G=r(W);{var de=C=>{var j=sa();Me(2),b(C,j)},le=C=>{var j=oa();b(C,j)};P(G,C=>{e(v)?C(de):C(le,!1)})}t(W),t(N),t(X),t(L),ve((C,j)=>{O.disabled=e(v),U.disabled=e(v),ae=q(W,1,"px-5 py-2.5 rounded-lg flex items-center justify-center min-w-[120px] disabled:opacity-50 disabled:cursor-not-allowed svelte-1mfa054",null,ae,C),W.disabled=j},[()=>({"bg-blue-600":!e(v)&&w(),"bg-gray-400":!w()||e(v),"hover:bg-blue-700":!e(v)&&w()}),()=>!w()||e(v)],Be),J("click",O,()=>{c(!1)}),J("click",U,()=>{c(!1)}),J("click",W,M),b(d,L),We()}var na=_('<div class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><label class="block text-sm font-medium text-gray-700 mb-1">SKU</label> <input type="text" class="text-black/50 w-full px-4 py-2.5 rounded-lg border border-gray-300 bg-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-not-allowed" disabled></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">IM SKU</label> <input type="text" class="text-black w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">Product Name</label> <input type="text" class="text-black w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div> <div><label class="text-black block text-sm font-medium text-gray-700 mb-1">Selling Price (£)</label> <input type="number" step="0.01" class="text-black w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div></div>'),ca=_('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"><div class="p-6 border-b flex justify-between items-center"><h2 class="text-xl font-bold text-gray-800">Edit Product</h2> <button class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex-1 overflow-y-auto p-6"><!></div> <div class="p-6 border-t flex justify-end space-x-3"><button class="px-5 py-2.5 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50">Cancel</button> <button class="px-5 py-2.5 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700">Save Changes</button></div></div></div>');function va(d,o){Ve(o,!1);let l=F(o,"showEditPrintModal",12),c=F(o,"editedProduct",12),f=F(o,"selectedProducts",12);function g(){c()&&(f(f().map(V=>V.id===c().id?c():V)),c(null),l(!1))}He();var v=ca(),s=r(v),S=r(s),w=a(r(S),2);t(S);var B=a(S,2),M=r(B);{var L=V=>{var $=na(),h=r($),N=r(h),U=a(r(N),2);R(U),t(N);var W=a(N,2),ae=a(r(W),2);R(ae),t(W),t(h);var G=a(h,2),de=a(r(G),2);R(de),t(G);var le=a(G,2),C=a(r(le),2);R(C),t(le),t($),Q(U,()=>c().sku,j=>c(c().sku=j,!0)),Q(ae,()=>c().imSKU,j=>c(c().imSKU=j,!0)),Q(de,()=>c().name,j=>c(c().name=j,!0)),Q(C,()=>c().price,j=>c(c().price=j,!0)),b(V,$)};P(M,V=>{c()&&V(L)})}t(B);var X=a(B,2),H=r(X),O=a(H,2);t(X),t(s),t(v),J("click",w,()=>{l(!1)}),J("click",H,()=>{l(!1)}),J("click",O,g),b(d,v),We()}var ua=_('<p class="text-sm text-gray-500 mt-1">Click the X button to remove items from the list</p>'),ba=_('<span class="ml-2 px-2 py-0.5 bg-red-100 text-red-800 text-xs rounded-full">Sold</span>'),fa=_('<div><div class="flex-1 min-w-0"><div class="flex items-center"><h3 class="font-semibold text-gray-800 truncate"> </h3> <!></div> <div class="flex items-center mt-1 text-sm"><span class="font-medium text-blue-600"> </span> <span class="mx-2 text-gray-300">•</span> <span class="text-gray-600 truncate"> </span></div></div> <div class="flex items-center space-x-2"><button class="p-2 bg-blue-50 rounded-full hover:bg-blue-100 transition-colors flex items-center group" title="Edit Print Info"><svg class="w-5 h-5 text-blue-600 group-hover:text-blue-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg> <span class="ml-1 text-sm font-medium text-blue-600 group-hover:text-blue-800 hidden md:inline">Edit</span></button> <button class="p-2 bg-red-50 rounded-full hover:bg-red-100 transition-colors flex items-center group" title="Remove from list"><svg class="w-5 h-5 text-red-500 group-hover:text-red-700" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> <span class="ml-1 text-sm font-medium text-red-500 group-hover:text-red-700 hidden md:inline">Remove</span></button></div></div>'),pa=_('<div class="text-center py-8"><svg class="w-16 h-16 mx-auto text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"></path></svg> <h3 class="mt-4 text-lg font-medium text-gray-900">No products selected</h3> <p class="mt-1 text-gray-500">Select items from your inventory to print receipts</p></div>'),ga=_('<svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span class="text-white">Printing...</span>',1),ma=_('<span class="text-white"> </span>'),xa=_('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"><div class="p-6 border-b flex justify-between items-center"><h2 class="text-xl font-bold text-gray-800">Print Receipts</h2> <button class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex-1 overflow-y-auto p-6"><div class="mb-6"><label for="customerName" class="block text-sm font-medium text-gray-700 mb-2">Customer Name (Optional)</label> <input id="customerName" type="text" placeholder="Enter customer name for receipt" class="w-full px-4 py-2 border text-black border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"> <p class="mt-1 text-sm text-gray-500">The customer name will be printed on the receipt if provided.</p></div>  <div class="mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200 cursor-pointer"><div class="flex items-center"><input id="markAsSold" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"> <div class="ml-2 block text-sm font-medium text-gray-700">Mark as Sold and Add to Sold Inventory</div></div> <p class="mt-1 text-sm text-blue-600"><!></p></div> <div><div class="mb-4"><p class="text-gray-600"> </p> <!></div> <div class="space-y-3 max-h-96 overflow-y-auto"></div></div></div> <div class="p-6 border-t flex justify-end space-x-3"><button class="px-5 py-2.5 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50">Back</button> <button><!></button></div></div></div> <!>',1);function ha(d,o){Ve(o,!1);let l=F(o,"showPrintModal",12),c=F(o,"selectedProducts",12),f=F(o,"products",12),g=D(!1),v=D(),s=D(null),S=D(""),w=D(!0);async function B(){m(g,!0);try{const x=await fetch(Xe+"/print_labels",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({selectedProducts:c(),customerName:e(S),logSold:e(w)})}),y=await x.json();if(!x.ok)throw y.error?new Error(y.error):new Error(`HTTP error! status: ${x.status}`);if(e(w)){const T=new Set(c().map(A=>A.id));f(f().map(A=>T.has(A.id)?{...A,sold:!0}:A)),c(c().map(A=>({...A,sold:!0})))}st.success(`Successfully printed ${c().length} label(s)!`),c([]),m(S,""),m(w,!1),l(!1)}catch(x){console.error("Failed to print labels",x),st.error(x.message||"Failed to print labels. Please check the console for details.")}finally{m(g,!1)}}function M(x){c(c().filter(y=>y.id!==x.id))}He();var L=xa(),X=Pe(L),H=r(X),O=r(H),V=a(r(O),2);t(O);var $=a(O,2),h=r($),N=a(r(h),2);R(N),Me(2),t(h);var U=a(h,2),W=r(U),ae=r(W);R(ae),Me(2),t(W);var G=a(W,2),de=r(G);{var le=x=>{var y=ft("Items will be marked as sold in your inventory and added to the sold items sheet.");b(x,y)},C=x=>{var y=ft("Items will remain available in your inventory after printing.");b(x,y)};P(de,x=>{e(w)?x(le):x(C,!1)})}t(G),t(U);var j=a(U,2),ue=r(j),me=r(ue),be=r(me);t(me);var ee=a(me,2);{var Y=x=>{var y=ua();b(x,y)};P(ee,x=>{c().length>0&&x(Y)})}t(ue);var fe=a(ue,2);gt(fe,5,c,mt,(x,y)=>{var T=fa(),A=r(T),oe=r(A),pe=r(oe),we=r(pe,!0);t(pe);var _e=a(pe,2);{var $e=ye=>{var re=ba();b(ye,re)};P(_e,ye=>{e(y).sold&&ye($e)})}t(oe);var Ce=a(oe,2),xe=r(Ce),Ee=r(xe);t(xe);var ze=a(xe,4),Ne=r(ze,!0);t(ze),t(Ce),t(A);var Se=a(A,2),z=r(Se),he=a(z,2);t(Se),t(T),ve(ye=>{q(T,1,`flex items-center p-3 border rounded-lg hover:bg-gray-50
                ${e(y).sold?"bg-red-50 border-red-200":""}`),Z(we,e(y).name),Z(Ee,`£${ye??""}`),Z(Ne,e(y).sku)},[()=>e(y).price.toFixed(2)],Be),J("click",z,()=>{m(s,e(y)),m(v,!0)}),J("click",he,()=>M(e(y))),b(x,T)},x=>{var y=pa();b(x,y)}),t(fe),t(j),t($);var te=a($,2),se=r(te),ne=a(se,2);let ce;var i=r(ne);{var u=x=>{var y=ga();Me(2),b(x,y)},E=x=>{var y=ma(),T=r(y,!0);t(y),ve(()=>Z(T,e(w)?"Print & Mark Sold":"Print Receipts")),b(x,y)};P(i,x=>{e(g)?x(u):x(E,!1)})}t(ne),t(te),t(H),t(X);var k=a(X,2);{var K=x=>{va(x,{get showEditPrintModal(){return e(v)},set showEditPrintModal(y){m(v,y)},get editedProduct(){return e(s)},set editedProduct(y){m(s,y)},get selectedProducts(){return c()},set selectedProducts(y){c(y)},$$legacy:!0})};P(k,x=>{e(v)&&x(K)})}ve(x=>{Z(be,`You're about to print Receipts for ${c().length??""} products.`),ce=q(ne,1,"px-5 py-2.5 rounded-lg flex items-center justify-center min-w-[120px] disabled:opacity-50 disabled:cursor-not-allowed",null,ce,x),ne.disabled=e(g)||c().length===0},[()=>({"bg-blue-600":!e(g),"bg-gray-400":e(g),"hover:bg-blue-700":!e(g)})],Be),J("click",V,()=>{l(!1),m(S,""),m(w,!1)}),Q(N,()=>e(S),x=>m(S,x)),xt(ae,()=>e(w),x=>m(w,x)),J("click",U,()=>{m(w,!e(w))}),J("click",se,()=>{l(!1),m(S,""),m(w,!1)}),J("click",ne,B),b(d,L),We()}var ya=_('<div class="absolute top-14 right-3 px-2 py-1 bg-red-100 text-red-800 text-xs font-bold rounded-full">SOLD</div>'),wa=_('<div><!> <div class="p-4"><div class="flex justify-between items-start"><div class="pr-2  w-[79%]"><h3 class="font-semibold text-gray-800 truncate"> </h3> <div class="mt-1"><span class="text-xl font-bold text-blue-600"> </span></div></div> <button title="Edit Print Info"><svg class="w-5 h-5 text-blue-600 group-hover:text-blue-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg> <span class="ml-1 text-sm font-medium text-blue-600 group-hover:text-blue-800 hidden md:inline">Edit</span></button></div> <div class="mt-3 space-y-2 text-sm text-gray-600"><div class="flex items-center"><svg class="w-4 h-4 mr-1 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path></svg> <span> </span></div> <div class="flex items-center"><svg class="w-4 h-4 mr-1 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path></svg> <span> </span></div> <div class="flex items-center"><svg class="w-4 h-4 mr-1 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <span class="truncate"> </span></div> <div class="flex items-center"><svg class="w-4 h-4 mr-1 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> <span class="truncate"> </span></div></div></div> <div> </div></div>'),_a=_('<div class="col-span-full text-center py-12"><div class="text-gray-400 mb-4"><svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <h3 class="text-xl font-semibold text-gray-700">No products found</h3> <p class="text-gray-500 mt-2"> </p></div>'),ka=_('<span class="px-2 py-1.5 text-gray-500">...</span>'),Pa=_("<button> </button>"),Sa=_('<div class="mt-8 flex flex-col sm:flex-row items-center justify-between gap-4"><div class="text-sm text-gray-600"> </div> <div class="flex items-center gap-1"><button class="px-3 py-1.5 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors" title="Previous page"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button> <!> <button class="px-3 py-1.5 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors" title="Next page"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button></div> <div class="flex items-center gap-2 text-sm"><label for="itemsPerPage" class="text-gray-600">Items per page:</label> <select id="itemsPerPage" class="px-2 py-1 border border-gray-300 text-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>12</option><option>24</option><option>48</option><option>96</option></select></div></div>'),Ma=_('<div class="products-container svelte-1k5pt1v"><div class="products-grid grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 svelte-1k5pt1v"></div> <!></div>');function $a(d,o){Ve(o,!1);const l=D(),c=D(),f=D();let g=F(o,"filteredProducts",8),v=F(o,"selectedProducts",8),s=F(o,"toggleProduct",8),S=F(o,"openEditModal",8),w=F(o,"showSoldItems",8),B=D(1),M=D(24);function L($){if($>=1&&$<=e(c)){m(B,$);const h=document.getElementById("searchBar");h&&h.scrollIntoView({behavior:"smooth"})}}lt(()=>(jt(g()),e(B),e(M)),()=>{m(l,g().slice((e(B)-1)*e(M),e(B)*e(M)))}),lt(()=>(jt(g()),e(M)),()=>{m(c,Math.ceil(g().length/e(M)))}),lt(()=>(e(c),e(B)),()=>{m(f,(()=>{const $=[];if(e(c)<=5)for(let N=1;N<=e(c);N++)$.push(N);else{$.push(1);let N=Math.max(2,e(B)-1),U=Math.min(e(c)-1,e(B)+1);e(B)<=3&&(U=4),e(B)>=e(c)-2&&(N=e(c)-3),N>2&&$.push("...");for(let W=N;W<=U;W++)$.push(W);U<e(c)-1&&$.push("..."),e(c)>1&&$.push(e(c))}return $})())}),Bt(),He();var X=Ma(),H=r(X);gt(H,5,()=>e(l),mt,($,h)=>{var N=wa(),U=r(N);{var W=A=>{var oe=ya();b(A,oe)};P(U,A=>{e(h).sold&&A(W)})}var ae=a(U,2),G=r(ae),de=r(G),le=r(de),C=r(le,!0);t(le);var j=a(le,2),ue=r(j),me=r(ue);t(ue),t(j),t(de);var be=a(de,2);q(be,1,"p-2 bg-blue-50 rounded-full hover:bg-blue-100 transition-colors flex items-center group ","svelte-1k5pt1v"),t(G);var ee=a(G,2),Y=r(ee),fe=a(r(Y),2),te=r(fe);t(fe),t(Y);var se=a(Y,2),ne=a(r(se),2),ce=r(ne);t(ne),t(se);var i=a(se,2),u=a(r(i),2),E=r(u);t(u),t(i);var k=a(i,2),K=a(r(k),2),x=r(K);t(K),t(k),t(ee),t(ae);var y=a(ae,2),T=r(y,!0);t(y),t(N),ve((A,oe,pe)=>{q(N,1,A,"svelte-1k5pt1v"),Z(C,e(h).name),Z(me,`£${oe??""}`),Z(te,`SKU: ${e(h).sku??""}`),Z(ce,`IM SKU: ${e(h).imSKU??""}`),Z(E,`Seller: ${e(h).seller??""}`),Z(x,`Location: ${e(h).location??""}`),q(y,1,pe,"svelte-1k5pt1v"),Z(T,e(h).sold?"Sold - Selected":"Selected")},[()=>`bg-white rounded-xl shadow-md overflow-hidden border-2 transition-all duration-200 relative cursor-pointer
                    ${v().find(A=>A.id===e(h).id)?"border-blue-500 shadow-lg":"border-transparent"}`,()=>e(h).price.toFixed(2),()=>`py-1 text-center text-sm font-medium
                    ${v().find(A=>A.id===e(h).id)?e(h).sold?"bg-red-100 text-red-700":"bg-blue-50 text-blue-700":"hidden"}`],Be),J("click",be,Sr(()=>S()(e(h)))),J("click",N,()=>s()(e(h))),b($,N)},$=>{var h=_a(),N=a(r(h),4),U=r(N,!0);t(N),t(h),ve(()=>Z(U,w()?"No sold items match your search":"No available items match your search")),b($,h)}),t(H);var O=a(H,2);{var V=$=>{var h=Sa(),N=r(h),U=r(N);t(N);var W=a(N,2),ae=r(W),G=a(ae,2);gt(G,1,()=>e(f),mt,(ee,Y)=>{var fe=Le(),te=Pe(fe);{var se=ce=>{var i=ka();b(ce,i)},ne=ce=>{var i=Pa(),u=r(i,!0);t(i),ve(()=>{q(i,1,`px-3 py-1.5 rounded-md border transition-colors
                                ${e(B)===e(Y)?"bg-blue-600 border-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,"svelte-1k5pt1v"),Z(u,e(Y))}),J("click",i,()=>L(e(Y))),b(ce,i)};P(te,ce=>{e(Y)==="..."?ce(se):ce(ne,!1)})}b(ee,fe)});var de=a(G,2);t(W);var le=a(W,2),C=a(r(le),2);ve(()=>{e(M),mr(()=>{})});var j=r(C);j.value=(j.__value=12)==null?"":12;var ue=a(j);ue.value=(ue.__value=24)==null?"":24;var me=a(ue);me.value=(me.__value=48)==null?"":48;var be=a(me);be.value=(be.__value=96)==null?"":96,t(C),t(le),t(h),ve((ee,Y)=>{Z(U,`Showing ${ee??""} 
                to ${Y??""} 
                of ${g().length??""} products`),ae.disabled=e(B)===1,de.disabled=e(B)===e(c)},[()=>Math.min((e(B)-1)*e(M)+1,g().length),()=>Math.min(e(B)*e(M),g().length)],Be),J("click",ae,()=>L(e(B)-1)),J("click",de,()=>L(e(B)+1)),kr(C,()=>e(M),ee=>m(M,ee)),b($,h)};P(O,$=>{g().length>e(M)&&$(V)})}t(X),b(d,X),We()}var Ca=Vt('<svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>'),Ea=_("<button><span> </span> <!></button>"),Na=_('<div class="animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-500"></div>'),ja=_('<div class="animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-500 mr-2"></div>'),za=_('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-2xl shadow-xl w-full max-w-md"><div class="p-6 border-b flex justify-between items-center"><h2 class="text-xl font-bold text-gray-800">System Settings</h2> <button class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 space-y-4"><div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg text-black"><div class="flex items-center"><!> <span>Printer Status:</span></div> <span class="font-medium"><!></span></div> <button class="w-full flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"><!> </button> <button class="w-full flex items-center justify-center px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors"><!> Restart Raspberry Pi</button> <button class="w-full flex items-center justify-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"><!> Shutdown Raspberry Pi</button></div></div></div>'),Ba=_('<div class="bg-white rounded-xl shadow-lg p-4 mb-2" id="searchBar"><div class="relative mb-4"><div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"><svg class="w-5 h-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div> <input type="text" class="text-black w-full pl-10 pr-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Search by name, SKU, seller or location..."></div> <div class="flex flex-wrap gap-2 mt-2 justify-between items-center"><div class="flex flex-wrap gap-2"></div> <div class="flex flex-wrap gap-2 items-center"><div class="flex items-center mr-2"><!></div> <button class="flex items-center min-w-[220px] px-4 py-2.5 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"><!> </button> <button class="px-4 py-2.5 rounded-lg font-medium flex items-center bg-green-600/80 text-white hover:bg-green-600 transition-colors" title="Refresh stock"><!></button> <button class="px-4 py-2.5 rounded-lg font-medium flex items-center bg-green-600/80 text-white hover:bg-green-600 transition-colors" title="Add stock"><!></button> <button class="px-4 py-2.5 rounded-lg font-medium flex items-center bg-gray-600/80 text-white hover:bg-gray-600 transition-colors" title="Settings"><!></button></div></div></div> <!>',1);function La(d,o){Ve(o,!1);let l=F(o,"searchTerm",12,""),c=F(o,"fetchProducts",8),f=F(o,"showPrintModal",12),g=F(o,"selectedProducts",8),v=F(o,"showAddProductModal",12),s=F(o,"handleSort",8),S=F(o,"sortConfig",8),w=F(o,"sortOptions",24,()=>[]),B=D(!1),M=F(o,"printerConnected",12),L=D(!1);async function X(){m(L,!0);try{const i=await fetch(`${Xe}/reconnect_printer`);if(i.ok){const u=await i.json();M(u.connected)}else M(!1)}catch(i){console.error("Failed to check printer status:",i),M(!1)}finally{m(L,!1)}}async function H(){try{(await fetch(`${Xe}/restart`,{method:"POST"})).ok?alert("Raspberry Pi is restarting..."):alert("Failed to restart Raspberry Pi")}catch(i){console.error("Failed to restart Pi:",i),alert("Failed to restart Raspberry Pi")}}async function O(){if(confirm("Are you sure you want to shutdown the Raspberry Pi?"))try{(await fetch(`${Xe}/shutdown`,{method:"POST"})).ok?alert("Raspberry Pi is shutting down..."):alert("Failed to shutdown Raspberry Pi")}catch(i){console.error("Failed to shutdown Pi:",i),alert("Failed to shutdown Raspberry Pi")}}He();var V=Ba(),$=Pe(V),h=r($),N=a(r(h),2);R(N),t(h);var U=a(h,2),W=r(U);gt(W,5,w,mt,(i,u)=>{var E=Ea(),k=r(E),K=r(k,!0);t(k);var x=a(k,2);{var y=T=>{var A=Ca();ve(()=>q(A,0,`ml-1.5 w-4 h-4 ${S().direction==="asc"?"":"transform rotate-180"}`)),b(T,A)};P(x,T=>{S().key===e(u).id&&T(y)})}t(E),ve(()=>{q(E,1,`px-3 py-1.5 text-sm rounded-full border transition-colors flex items-center
                  ${S().key===e(u).id?"bg-blue-100 border-blue-300 text-blue-700":"bg-gray-100 border-gray-200 text-gray-700 hover:bg-gray-200"}`),Z(K,e(u).name)}),J("click",E,()=>s()(e(u).id)),b(i,E)}),t(W);var ae=a(W,2),G=r(ae),de=r(G);{var le=i=>{var u=Na();b(i,u)},C=(i,u)=>{{var E=K=>{Ht(K,{size:20,class:"text-green-500"})},k=K=>{Ft(K,{size:20,class:"text-red-500"})};P(i,K=>{M()?K(E):K(k,!1)},u)}};P(de,i=>{e(L)?i(le):i(C,!1)})}t(G);var j=a(G,2),ue=r(j);Gt(ue,{size:30,class:"mr-2"});var me=a(ue);t(j);var be=a(j,2),ee=r(be);Er(ee,{size:30,class:""}),t(be);var Y=a(be,2),fe=r(Y);Cr(fe,{size:30,class:""}),t(Y);var te=a(Y,2),se=r(te);jr(se,{size:30,class:""}),t(te),t(ae),t(U),t($);var ne=a($,2);{var ce=i=>{var u=za(),E=r(u),k=r(E),K=a(r(k),2);t(k);var x=a(k,2),y=r(x),T=r(y),A=r(T);{var oe=re=>{var ke=ja();b(re,ke)},pe=(re,ke)=>{{var Oe=ge=>{Ht(ge,{size:20,class:"text-green-500 mr-2"})},Ie=ge=>{Ft(ge,{size:20,class:"text-red-500 mr-2"})};P(re,ge=>{M()?ge(Oe):ge(Ie,!1)},ke)}};P(A,re=>{e(L)?re(oe):re(pe,!1)})}Me(2),t(T);var we=a(T,2),_e=r(we);{var $e=re=>{var ke=ft("Checking...");b(re,ke)},Ce=(re,ke)=>{{var Oe=ge=>{var Re=ft("Connected");b(ge,Re)},Ie=ge=>{var Re=ft("Disconnected");b(ge,Re)};P(re,ge=>{M()?ge(Oe):ge(Ie,!1)},ke)}};P(_e,re=>{e(L)?re($e):re(Ce,!1)})}t(we),t(y);var xe=a(y,2),Ee=r(xe);const ze=Be(()=>e(L)?"animate-spin ":"");Nr(Ee,{size:18,get class(){return`mr-2 ${e(ze)??""}`}});var Ne=a(Ee);t(xe);var Se=a(xe,2),z=r(Se);Rt(z,{size:18,class:"mr-2"}),Me(),t(Se);var he=a(Se,2),ye=r(he);Rt(ye,{size:18,class:"mr-2"}),Me(),t(he),t(x),t(E),t(u),ve(()=>{xe.disabled=e(L),Z(Ne,` ${(e(L)?"Reconnecting...":"Reconnect Printer")??""}`)}),J("click",K,()=>m(B,!1)),J("click",xe,X),J("click",Se,H),J("click",he,O),b(i,u)};P(ne,i=>{e(B)&&i(ce)})}ve(()=>{yr(G,"title",M()?"Printer connected":"Printer disconnected"),j.disabled=g().length===0,Z(me,` Print Selected (${g().length??""})`)}),Q(N,l),J("click",j,()=>{f(!0)}),J("click",be,function(...i){var u;(u=c())==null||u.apply(this,i)}),J("click",Y,()=>{v(!0)}),J("click",te,()=>m(B,!0)),b(d,V),We()}var Aa=_('<div class="flex justify-center items-center h-64"><div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"></div> <span class="ml-3 text-gray-600">Loading products...</span></div>'),Ta=_('<div class="bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-red-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><p class="text-sm text-red-700"> </p> <button class="mt-2 px-3 py-1 bg-red-100 text-red-700 rounded text-sm hover:bg-red-200">Retry</button></div></div></div>'),Oa=_('<div class="mt-6 flex justify-center"><button class="px-4 py-2 text-sm font-medium rounded-lg border border-gray-300 hover:bg-gray-50 text-gray-700"> </button></div>'),Ia=_('<!> <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"><div class="bg-white rounded-xl shadow p-5"><div class="text-gray-500 flex items-center"><svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg> <span class="font-medium">Total Items</span></div> <div class="text-3xl text-black font-bold mt-2"> </div></div> <div class="bg-white rounded-xl shadow p-5"><div class="text-gray-500 flex items-center"><svg class="w-6 h-6 mr-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="font-medium">Available</span></div> <div class="text-3xl font-bold mt-2 text-black"> </div></div> <div class="bg-white rounded-xl shadow p-5"><div class="text-gray-500 flex items-center"><svg class="w-6 h-6 mr-2 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="font-medium">Sold</span></div> <div class="text-3xl font-bold mt-2 text-black"> </div></div></div> <!> <!>',1),Ua=_('<button class="fab-enter fixed bottom-6 right-6 z-50 p-4 bg-blue-600 rounded-full shadow-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 text-white flex items-center justify-center svelte-7fy406"><!> <span class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center"> </span></button>'),Ka=_('<div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 p-4 md:p-8"><div class="max-w-7xl mx-auto"><div class="mb-8 text-center"><h1 class="text-3xl md:text-4xl font-bold text-gray-800">Iain Marr Antiques</h1> <p class="text-gray-600 mt-2">Inventory Management System</p></div> <!></div> <!> <!> <!> <!></div>');function qa(d,o){Ve(o,!1);const l=D(),c=D();let f=D([]),g=D([]),v=D(""),s=D(!1),S=D(!1),w=D(null),B=D("products"),M=D(!1),L=D(!1),X=D(null),H=D(!0),O=D({key:"sku",direction:"asc"}),V=D([{id:"sku",name:"SKU"},{id:"name",name:"Name"},{id:"price",name:"Price"}]),$=D();const h=(i,u,E="")=>i[u]!==void 0&&i[u]!==""?i[u]:E;async function N(){try{m(L,!0),m(X,null);const i=await fetch(Xe+"/get_stock",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({})});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const u=await i.json(),E=u.data;m($,u.printer_connected),m(f,E.map(k=>({id:h(k,"SKU NO.",""),name:h(k,"ITEM DESCRIPTION",""),price:Number(h(k,"SELLING PRICE",0)),imSKU:h(k,"IM SKU",""),sku:h(k,"SKU NO.",""),purchasePrice:Number(h(k,"PURCHASE PRICE",0)),seller:h(k,"NAME/ADDRESS SELLER",""),dateBought:h(k,"DATE BOUGHT",""),sold:h(k,"SOLD","FALSE")==="TRUE",commission:h(k,"Commission £",0),dateSold:h(k,"DATE SOLD",""),invoiceNo:h(k,"INVOICE NO. XERO",""),onWebsite:h(k,"ON WEBSITE","FALSE")==="TRUE",location:h(k,"location","")})))}catch(i){console.error("Failed to fetch products:",i),m(X,"Failed to load products. Please try again later.")}finally{m(L,!1)}}Jt(N);function U(i){let u="asc";e(O).key===i&&e(O).direction==="asc"&&(u="desc"),m(O,{key:i,direction:u})}function W(i){e(g).find(u=>u.id===i.id)?m(g,e(g).filter(u=>u.id!==i.id)):m(g,[...e(g),{...i}])}function ae(){e(g).length===e(c).length?m(g,[]):m(g,[...e(c)])}function G(i){m(w,{...i}),m(B,"products"),m(s,!0)}function de(){m(M,!0)}lt(()=>(e(f),e(O)),()=>{m(l,[...e(f)].sort((i,u)=>{let E=i[e(O).key],k=u[e(O).key];if(e(O).key==="sku")return e(O).direction==="asc"?0:-1;if(typeof E=="number"&&typeof k=="number")return e(O).direction==="asc"?E-k:k-E;if(typeof E=="string"&&typeof k=="string"){if(E=E.toLowerCase(),k=k.toLowerCase(),E<k)return e(O).direction==="asc"?-1:1;if(E>k)return e(O).direction==="asc"?1:-1}return 0}))}),lt(()=>(e(l),e(H),e(v)),()=>{m(c,e(l).filter(i=>(e(H)||!i.sold)&&(String(i.name||"").toLowerCase().includes(e(v).toLowerCase())||String(i.imSKU||"").toLowerCase().includes(e(v).toLowerCase())||String(i.sku||"").toLowerCase().includes(e(v).toLowerCase())||String(i.seller||"").toLowerCase().includes(e(v).toLowerCase())||String(i.location||"").toLowerCase().includes(e(v).toLowerCase()))))}),Bt(),He();var le=Ka();sr(i=>{xr.title="Iain Marr Antiques"});var C=r(le),j=a(r(C),2);{var ue=i=>{var u=Aa();b(i,u)},me=(i,u)=>{{var E=K=>{var x=Ta(),y=r(x),T=a(r(y),2),A=r(T),oe=r(A,!0);t(A);var pe=a(A,2);t(T),t(y),t(x),ve(()=>Z(oe,e(X))),J("click",pe,N),b(K,x)},k=K=>{var x=Ia(),y=Pe(x);La(y,{handleSort:U,openPrintModal:de,fetchProducts:N,get printerConnected(){return e($)},set printerConnected(z){m($,z)},get sortConfig(){return e(O)},set sortConfig(z){m(O,z)},get sortOptions(){return e(V)},set sortOptions(z){m(V,z)},get showAddProductModal(){return e(S)},set showAddProductModal(z){m(S,z)},get searchTerm(){return e(v)},set searchTerm(z){m(v,z)},get showSoldItems(){return e(H)},set showSoldItems(z){m(H,z)},get showPrintModal(){return e(M)},set showPrintModal(z){m(M,z)},get selectedProducts(){return e(g)},set selectedProducts(z){m(g,z)},$$legacy:!0});var T=a(y,2),A=r(T),oe=a(r(A),2),pe=r(oe,!0);t(oe),t(A);var we=a(A,2),_e=a(r(we),2),$e=r(_e,!0);t(_e),t(we);var Ce=a(we,2),xe=a(r(Ce),2),Ee=r(xe,!0);t(xe),t(Ce),t(T);var ze=a(T,2);$a(ze,{toggleProduct:W,openEditModal:G,get filteredProducts(){return e(c)},set filteredProducts(z){m(c,z)},get selectedProducts(){return e(g)},set selectedProducts(z){m(g,z)},get showSoldItems(){return e(H)},set showSoldItems(z){m(H,z)},$$legacy:!0});var Ne=a(ze,2);{var Se=z=>{var he=Oa(),ye=r(he),re=r(ye,!0);t(ye),t(he),ve(()=>Z(re,e(g).length===e(c).length?"Deselect All":"Select All")),J("click",ye,ae),b(z,he)};P(Ne,z=>{e(c).length>0&&z(Se)})}ve((z,he)=>{Z(pe,e(f).length),Z($e,z),Z(Ee,he)},[()=>e(f).filter(z=>!z.sold).length,()=>e(f).filter(z=>z.sold).length],Be),b(K,x)};P(i,K=>{e(X)?K(E):K(k,!1)},u)}};P(j,i=>{e(L)?i(ue):i(me,!1)})}t(C);var be=a(C,2);{var ee=i=>{var u=Ua(),E=r(u);Gt(E,{size:30});var k=a(E,2),K=r(k,!0);t(k),t(u),ve(()=>Z(K,e(g).length)),J("click",u,de),b(i,u)};P(be,i=>{e(g).length>0&&i(ee)})}var Y=a(be,2);{var fe=i=>{da(i,{get editedProduct(){return e(w)},set editedProduct(u){m(w,u)},get showEditProductModal(){return e(s)},set showEditProductModal(u){m(s,u)},get activeTab(){return e(B)},set activeTab(u){m(B,u)},get products(){return e(f)},set products(u){m(f,u)},$$legacy:!0})};P(Y,i=>{e(s)&&i(fe)})}var te=a(Y,2);{var se=i=>{Wr(i,{get showAddProductModal(){return e(S)},set showAddProductModal(u){m(S,u)},get products(){return e(f)},set products(u){m(f,u)},$$legacy:!0})};P(te,i=>{e(S)&&i(se)})}var ne=a(te,2);{var ce=i=>{ha(i,{get selectedProducts(){return e(g)},set selectedProducts(u){m(g,u)},get showPrintModal(){return e(M)},set showPrintModal(u){m(M,u)},get products(){return e(f)},set products(u){m(f,u)},$$legacy:!0})};P(ne,i=>{e(M)&&i(ce)})}t(le),b(d,le),We()}export{qa as component};
