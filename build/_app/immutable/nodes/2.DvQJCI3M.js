import{k as dr,l as cr,o as It,p as Zt,a as f,c as Re,t as k,s as F,q as A,b as tt,r as vr}from"../chunks/DYYJUyO7.js";import{i as rt}from"../chunks/BsqOVhRx.js";import{h as Le,a as Ht,d as Bt,b as ur,E as pr,c as fr,aM as br,af as gr,ag as mr,P as Vt,O as Ft,H as xr,p as hr,Q as _r,ap as yr,aN as wr,u as Gt,r as Yt,e as Xt,s as st,x as r,z as s,y as t,v as X,$ as Ve,w as at,t as Me,l as e,aO as He,F as i,aP as E,m as Rt,aQ as Ot,aR as At,aS as we,ac as er,aT as ke,a2 as Wt,aU as kr}from"../chunks/CSg0lNya.js";import{b as Pr,l as qe,p as H,s as Qe,i as j}from"../chunks/hspORyhj.js";import{e as Pt,i as Mt,s as Fe,a as Ut,b as se,r as Y,c as Mr,t as yt,d as $r}from"../chunks/DuVMRweu.js";function Cr(l,o,x,u,b,d){let n=Le;Le&&Ht();var y,N,I=null;Le&&Bt.nodeType===1&&(I=Bt,Ht());var C=Le?Bt:l,a;ur(()=>{const m=o()||null;var $=br;m!==y&&(a&&(m===null?hr(a,()=>{a=null,N=null}):m===N?_r(a):yr(a)),m&&m!==N&&(a=fr(()=>{if(I=Le?I:document.createElementNS($,m),dr(I,I),u){Le&&cr(m)&&I.append(document.createComment(""));var P=Le?gr(I):I.appendChild(mr());Le&&(P===null?Vt(!1):Ft(P)),u(I,P)}xr.nodes_end=I,C.before(I)})),y=m,y&&(N=y))},pr),n&&(Vt(!0),Ft(C))}function be(l,o,x=o){var u=wr();It(l,"input",b=>{var d=b?l.defaultValue:l.value;if(d=Lt(l)?qt(d):d,x(d),u&&d!==(d=o())){var n=l.selectionStart,y=l.selectionEnd;l.value=d??"",y!==null&&(l.selectionStart=n,l.selectionEnd=Math.min(y,l.value.length))}}),(Le&&l.defaultValue!==l.value||Gt(o)==null&&l.value)&&x(Lt(l)?qt(l.value):l.value),Yt(()=>{var b=o();Lt(l)&&b===qt(l.value)||l.type==="date"&&!b&&!l.value||b!==l.value&&(l.value=b??"")})}function wt(l,o,x=o){It(l,"change",u=>{var b=u?l.defaultChecked:l.checked;x(b)}),(Le&&l.defaultChecked!==l.checked||Gt(o)==null)&&x(l.checked),Yt(()=>{var u=o();l.checked=!!u})}function Lt(l){var o=l.type;return o==="number"||o==="range"}function qt(l){return l===""?null:+l}function tr(l,o,x){if(l.multiple)return Nr(l,o);for(var u of l.options){var b=kt(u);if(Pr(b,o)){u.selected=!0;return}}(!x||o!==void 0)&&(l.selectedIndex=-1)}function Sr(l,o){Xt(()=>{var x=new MutationObserver(()=>{var u=l.__value;tr(l,u)});return x.observe(l,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{x.disconnect()}})}function jr(l,o,x=o){var u=!0;It(l,"change",b=>{var d=b?"[selected]":":checked",n;if(l.multiple)n=[].map.call(l.querySelectorAll(d),kt);else{var y=l.querySelector(d)??l.querySelector("option:not([disabled])");n=y&&kt(y)}x(n)}),Xt(()=>{var b=o();if(tr(l,b,u),u&&b===void 0){var d=l.querySelector(":checked");d!==null&&(b=kt(d),x(b))}l.__value=b,u=!1}),Sr(l)}function Nr(l,o){for(var x of l.options)x.selected=~o.indexOf(kt(x))}function kt(l){return"__value"in l?l.__value:l.value}function Tt(l){return function(...o){var x=o[0];return x.stopPropagation(),l==null?void 0:l.apply(this,o)}}/**
 * @license lucide-svelte v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Er=Zt("<svg><!><!></svg>");function Ze(l,o){const x=qe(o,["children","$$slots","$$events","$$legacy"]),u=qe(x,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);st(o,!1);let b=H(o,"name",8,void 0),d=H(o,"color",8,"currentColor"),n=H(o,"size",8,24),y=H(o,"strokeWidth",8,2),N=H(o,"absoluteStrokeWidth",8,!1),I=H(o,"iconNode",24,()=>[]);const C=(...R)=>R.filter((V,h,w)=>!!V&&w.indexOf(V)===h).join(" ");rt();var a=Er();let m;var $=r(a);Pt($,1,I,Mt,(R,V)=>{let h=()=>e(V)[0],w=()=>e(V)[1];var B=Re(),W=Me(B);Cr(W,h,!0,(D,ee)=>{let J;X(()=>J=Ut(D,J,{...w()}))}),f(R,B)});var P=s($);Fe(P,o,"default",{},null),t(a),X((R,V)=>m=Ut(a,m,{...zr,...u,width:n(),height:n(),stroke:d(),"stroke-width":R,class:V}),[()=>N()?Number(y())*24/Number(n()):y(),()=>C("lucide-icon","lucide",b()?`lucide-${b()}`:"",x.class)],Ve),f(l,a),at()}function Br(l,o){const x=qe(o,["children","$$slots","$$events","$$legacy"]);Ze(l,Qe({name:"circle-plus"},()=>x,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M8 12h8"}],["path",{d:"M12 8v8"}]],children:(b,d)=>{var n=Re(),y=Me(n);Fe(y,o,"default",{},null),f(b,n)},$$slots:{default:!0}}))}function Lr(l,o){const x=qe(o,["children","$$slots","$$events","$$legacy"]);Ze(l,Qe({name:"folder-sync"},()=>x,{iconNode:[["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v.5"}],["path",{d:"M12 10v4h4"}],["path",{d:"m12 14 1.535-1.605a5 5 0 0 1 8 1.5"}],["path",{d:"M22 22v-4h-4"}],["path",{d:"m22 18-1.535 1.605a5 5 0 0 1-8-1.5"}]],children:(b,d)=>{var n=Re(),y=Me(n);Fe(y,o,"default",{},null),f(b,n)},$$slots:{default:!0}}))}function Kt(l,o){const x=qe(o,["children","$$slots","$$events","$$legacy"]);Ze(l,Qe({name:"power"},()=>x,{iconNode:[["path",{d:"M12 2v10"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04"}]],children:(b,d)=>{var n=Re(),y=Me(n);Fe(y,o,"default",{},null),f(b,n)},$$slots:{default:!0}}))}function rr(l,o){const x=qe(o,["children","$$slots","$$events","$$legacy"]);Ze(l,Qe({name:"printer"},()=>x,{iconNode:[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1"}]],children:(b,d)=>{var n=Re(),y=Me(n);Fe(y,o,"default",{},null),f(b,n)},$$slots:{default:!0}}))}function qr(l,o){const x=qe(o,["children","$$slots","$$events","$$legacy"]);Ze(l,Qe({name:"refresh-cw"},()=>x,{iconNode:[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]],children:(b,d)=>{var n=Re(),y=Me(n);Fe(y,o,"default",{},null),f(b,n)},$$slots:{default:!0}}))}function Rr(l,o){const x=qe(o,["children","$$slots","$$events","$$legacy"]);Ze(l,Qe({name:"settings"},()=>x,{iconNode:[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]],children:(b,d)=>{var n=Re(),y=Me(n);Fe(y,o,"default",{},null),f(b,n)},$$slots:{default:!0}}))}function Jt(l,o){const x=qe(o,["children","$$slots","$$events","$$legacy"]);Ze(l,Qe({name:"wifi-off"},()=>x,{iconNode:[["path",{d:"M12 20h.01"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764"}],["path",{d:"m2 2 20 20"}]],children:(b,d)=>{var n=Re(),y=Me(n);Fe(y,o,"default",{},null),f(b,n)},$$slots:{default:!0}}))}function Dt(l,o){const x=qe(o,["children","$$slots","$$events","$$legacy"]);Ze(l,Qe({name:"wifi"},()=>x,{iconNode:[["path",{d:"M12 20h.01"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0"}]],children:(b,d)=>{var n=Re(),y=Me(n);Fe(y,o,"default",{},null),f(b,n)},$$slots:{default:!0}}))}var Ar=k('<div class="absolute top-14 right-3 px-2 py-1 bg-red-100 text-red-800 text-xs font-bold rounded-full">SOLD</div>'),Tr=k('<div><div class="absolute bottom-3 right-3 px-2 py-1 bg-gray-100 text-gray-800 text-xs font-semibold rounded-full"> </div> <!> <div class="p-4"><div class="flex justify-between items-start"><div class="pr-2  w-[79%]"><h3 class="font-semibold text-gray-800 truncate"> </h3> <div class="mt-1"><span class="text-xl font-bold text-blue-600"> </span></div></div> <button title="Edit Print Info"><svg class="w-5 h-5 text-blue-600 group-hover:text-blue-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg> <span class="ml-1 text-sm font-medium text-blue-600 group-hover:text-blue-800 hidden md:inline">Edit</span></button></div> <div class="mt-3 space-y-2 text-sm text-gray-600"><div class="flex items-center"><svg class="w-4 h-4 mr-1 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path></svg> <span> </span></div> <div class="flex items-center"><svg class="w-4 h-4 mr-1 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path></svg> <span> </span></div> <div class="flex items-center"><svg class="w-4 h-4 mr-1 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <span class="truncate"> </span></div> <div class="flex items-center"><svg class="w-4 h-4 mr-1 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> <span class="truncate"> </span></div></div></div> <div> </div></div>'),Ir=k('<div class="col-span-full text-center py-12"><div class="text-gray-400 mb-4"><svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <h3 class="text-xl font-semibold text-gray-700">No products found</h3> <p class="text-gray-500 mt-2"> </p></div>'),Or=k('<span class="px-2 py-1.5 text-gray-500">...</span>'),Hr=k("<button> </button>"),Vr=k('<div class="mt-8 flex flex-col sm:flex-row items-center justify-between gap-4"><div class="text-sm text-gray-600"> </div> <div class="flex items-center gap-1"><button class="px-3 py-1.5 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors" title="Previous page"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button> <!>  <button class="px-3 py-1.5 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors" title="Next page"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button></div> <div class="flex items-center gap-2 text-sm"><label for="itemsPerPage" class="text-gray-600">Items per page:</label> <select id="itemsPerPage" class="px-2 py-1 border border-gray-300 text-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>12</option><option>24</option><option>48</option><option>96</option></select></div></div>'),Fr=k('<div class="products-container"><div class="products-grid grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div> <!></div>');function Wr(l,o){st(o,!1);const x=E(),u=E(),b=E();let d=H(o,"filteredProducts",8),n=H(o,"selectedProducts",8),y=H(o,"toggleProduct",8),N=H(o,"openEditModal",8),I=H(o,"showSoldItems",8),C=E(1),a=E(24);function m(h){if(h>=1&&h<=e(u)){i(C,h);const w=document.getElementById("searchBar");w&&w.scrollIntoView({behavior:"smooth"})}}He(()=>(Rt(d()),e(C),e(a)),()=>{i(x,d().slice((e(C)-1)*e(a),e(C)*e(a)))}),He(()=>(Rt(d()),e(a)),()=>{i(u,Math.ceil(d().length/e(a)))}),He(()=>(e(u),e(C)),()=>{i(b,(()=>{const h=[];if(e(u)<=5)for(let B=1;B<=e(u);B++)h.push(B);else{h.push(1);let B=Math.max(2,e(C)-1),W=Math.min(e(u)-1,e(C)+1);e(C)<=3&&(W=4),e(C)>=e(u)-2&&(B=e(u)-3),B>2&&h.push("...");for(let D=B;D<=W;D++)h.push(D);W<e(u)-1&&h.push("..."),e(u)>1&&h.push(e(u))}return h})())}),Ot(),rt();var $=Fr(),P=r($);Pt(P,5,()=>e(x),Mt,(h,w)=>{var B=Tr(),W=r(B),D=r(W);t(W);var ee=s(W,2);{var J=le=>{var _e=Ar();f(le,_e)};j(ee,le=>{e(w).sold&&le(J)})}var Z=s(ee,2),oe=r(Z),ge=r(oe),te=r(ge),me=r(te,!0);t(te);var xe=s(te,2),S=r(xe),T=r(S);t(S),t(xe),t(ge);var O=s(ge,2);se(O,1,"p-2 bg-blue-50 rounded-full hover:bg-blue-100 transition-colors flex items-center group "),t(oe);var ie=s(oe,2),ae=r(ie),g=s(r(ae),2),M=r(g);t(g),t(ae);var L=s(ae,2),_=s(r(L),2),q=r(_);t(_),t(L);var U=s(L,2),Q=s(r(U),2),K=r(Q);t(Q),t(U);var re=s(U,2),ne=s(r(re),2),ve=r(ne);t(ne),t(re),t(ie),t(Z);var he=s(Z,2),je=r(he,!0);t(he),t(B),X((le,_e)=>{se(B,1,le),F(D,`Qty: ${e(w).quantity??""}`),F(me,e(w).item_description),F(T,`£${e(w).selling_price??""}`),F(M,`SKU: ${e(w).sku_no??""}`),F(q,`IM SKU: ${e(w).im_sku??""}`),F(K,`Seller: ${e(w).seller_name_address??""}`),F(ve,`Location: ${e(w).location??""}`),se(he,1,_e),F(je,e(w).sold?"Sold - Selected":"Selected")},[()=>`bg-white rounded-xl shadow-md overflow-hidden border-2 transition-all duration-200 relative cursor-pointer
                    ${n().find(le=>le.sku_no===e(w).sku_no)?"border-blue-500 shadow-lg":"border-transparent"}`,()=>`py-1 text-center text-sm font-medium
                    ${n().find(le=>le.sku_no===e(w).sku_no)?e(w).sold?"bg-red-100 text-red-700":"bg-blue-50 text-blue-700":"hidden"}`],Ve),A("click",O,Tt(()=>N()(e(w)))),A("click",B,()=>y()(e(w))),f(h,B)},h=>{var w=Ir(),B=s(r(w),4),W=r(B,!0);t(B),t(w),X(()=>F(W,I()?"No sold items match your search":"No available items match your search")),f(h,w)}),t(P);var R=s(P,2);{var V=h=>{var w=Vr(),B=r(w),W=r(B);t(B);var D=s(B,2),ee=r(D),J=s(ee,2);Pt(J,1,()=>e(b),Mt,(T,O)=>{var ie=Re(),ae=Me(ie);{var g=L=>{var _=Or();f(L,_)},M=L=>{var _=Hr(),q=r(_,!0);t(_),X(()=>{se(_,1,`px-3 py-1.5 rounded-md border transition-colors
                                ${e(C)===e(O)?"bg-blue-600 border-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-50"}`),F(q,e(O))}),A("click",_,()=>m(Number(e(O)))),f(L,_)};j(ae,L=>{e(O)==="..."?L(g):L(M,!1)})}f(T,ie)});var Z=s(J,2);t(D);var oe=s(D,2),ge=s(r(oe),2);X(()=>{e(a),At(()=>{})});var te=r(ge);te.value=(te.__value=12)==null?"":12;var me=s(te);me.value=(me.__value=24)==null?"":24;var xe=s(me);xe.value=(xe.__value=48)==null?"":48;var S=s(xe);S.value=(S.__value=96)==null?"":96,t(ge),t(oe),t(w),X((T,O)=>{F(W,`Showing ${T??""} 
                to ${O??""} 
                of ${d().length??""} products`),ee.disabled=e(C)===1,Z.disabled=e(C)===e(u)},[()=>Math.min((e(C)-1)*e(a)+1,d().length),()=>Math.min(e(C)*e(a),d().length)],Ve),A("click",ee,()=>m(e(C)-1)),A("click",Z,()=>m(e(C)+1)),jr(ge,()=>e(a),T=>i(a,T)),f(h,w)};j(R,h=>{d().length>e(a)&&h(V)})}t($),f(l,$),at()}const dt="http://printpi:8080/api/v1";var Ur=Zt('<svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>'),Kr=k("<button><span> </span> <!></button>"),Jr=k('<div class="animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-500"></div>'),Dr=k('<div class="animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-500 mr-2"></div>'),Qr=k('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-2xl shadow-xl w-full max-w-md"><div class="p-6 border-b flex justify-between items-center"><h2 class="text-xl font-bold text-gray-800">System Settings</h2> <button class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 space-y-4"><div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg text-black"><div class="flex items-center"><!> <span>Printer Status:</span></div> <span class="font-medium"><!></span></div> <button class="w-full flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"><!> </button> <button class="w-full flex items-center justify-center px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors"><!> Restart Raspberry Pi</button> <button class="w-full flex items-center justify-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"><!> Shutdown Raspberry Pi</button></div></div></div>'),Zr=k('<div class="bg-white rounded-xl shadow-lg p-4 mb-2" id="searchBar"><div class="relative mb-4"><div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"><svg class="w-5 h-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div> <input type="text" class="text-black w-full pl-10 pr-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Search by name, SKU, seller or location..."></div> <div class="flex flex-wrap gap-2 mt-2 justify-between items-center"><div class="flex flex-wrap gap-2"></div> <div class="flex flex-wrap gap-2 items-center"><div class="flex items-center mr-2"><!></div> <button class="flex items-center min-w-[220px] px-4 py-2.5 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"><!> </button> <button class="px-4 py-2.5 rounded-lg font-medium flex items-center bg-green-600/80 text-white hover:bg-green-600 transition-colors" title="Refresh stock"><!></button> <button class="px-4 py-2.5 rounded-lg font-medium flex items-center bg-green-600/80 text-white hover:bg-green-600 transition-colors" title="Add stock"><!></button> <button class="px-4 py-2.5 rounded-lg font-medium flex items-center bg-gray-600/80 text-white hover:bg-gray-600 transition-colors" title="Settings"><!></button></div></div></div> <!>',1);function Gr(l,o){st(o,!1);let x=H(o,"searchTerm",12,""),u=H(o,"fetchProducts",8),b=H(o,"showPrintModal",12),d=H(o,"showAddProductModal",12),n=H(o,"selectedProducts",8),y=H(o,"handleSort",8),N=H(o,"printerConnected",12),I=H(o,"sortConfig",8),C=H(o,"sortOptions",24,()=>[]),a=E(!1),m=E(!1);async function $(){i(m,!0);try{const _=await fetch(`${dt}/system/reconnect-printer`);if(!_.ok)throw new Error("Failed");const q=await _.json();N(q.connected)}catch(_){console.error("Failed to check printer status:",_),N(!1)}finally{i(m,!1)}}async function P(){if(confirm("Are you sure you want to restart the Raspberry Pi?"))try{const _=await fetch(`${dt}/system/restart`);alert(_.ok?"Raspberry Pi is restarting...":"Failed to restart Raspberry Pi")}catch(_){console.error("Failed to restart Pi:",_),alert("Failed to restart Raspberry Pi")}}async function R(){if(confirm("Are you sure you want to shutdown the Raspberry Pi?"))try{const _=await fetch(`${dt}/system/shutdown`,{method:"POST"});alert(_.ok?"Raspberry Pi is shutting down...":"Failed to shutdown Raspberry Pi")}catch(_){console.error("Failed to shutdown Pi:",_),alert("Failed to shutdown Raspberry Pi")}}rt();var V=Zr(),h=Me(V),w=r(h),B=s(r(w),2);Y(B),t(w);var W=s(w,2),D=r(W);Pt(D,5,C,Mt,(_,q)=>{var U=Kr(),Q=r(U),K=r(Q,!0);t(Q);var re=s(Q,2);{var ne=ve=>{var he=Ur();X(()=>se(he,0,`ml-1.5 w-4 h-4 ${I().direction==="asc"?"":"transform rotate-180"}`)),f(ve,he)};j(re,ve=>{I().key===e(q).id&&ve(ne)})}t(U),X(()=>{se(U,1,`px-3 py-1.5 text-sm rounded-full border transition-colors flex items-center
                  ${I().key===e(q).id?"bg-blue-100 border-blue-300 text-blue-700":"bg-gray-100 border-gray-200 text-gray-700 hover:bg-gray-200"}`),F(K,e(q).name)}),A("click",U,()=>y()(e(q).id)),f(_,U)}),t(D);var ee=s(D,2),J=r(ee),Z=r(J);{var oe=_=>{var q=Jr();f(_,q)},ge=(_,q)=>{{var U=K=>{Dt(K,{size:20,class:"text-green-500"})},Q=K=>{Jt(K,{size:20,class:"text-red-500"})};j(_,K=>{N()?K(U):K(Q,!1)},q)}};j(Z,_=>{e(m)?_(oe):_(ge,!1)})}t(J);var te=s(J,2),me=r(te);rr(me,{size:30,class:"mr-2"});var xe=s(me);t(te);var S=s(te,2),T=r(S);Lr(T,{size:30,class:""}),t(S);var O=s(S,2),ie=r(O);Br(ie,{size:30,class:""}),t(O);var ae=s(O,2),g=r(ae);Rr(g,{size:30,class:""}),t(ae),t(ee),t(W),t(h);var M=s(h,2);{var L=_=>{var q=Qr(),U=r(q),Q=r(U),K=s(r(Q),2);t(Q);var re=s(Q,2),ne=r(re),ve=r(ne),he=r(ve);{var je=de=>{var Pe=Dr();f(de,Pe)},le=(de,Pe)=>{{var Se=ue=>{Dt(ue,{size:20,class:"text-green-500 mr-2"})},Be=ue=>{Jt(ue,{size:20,class:"text-red-500 mr-2"})};j(de,ue=>{N()?ue(Se):ue(Be,!1)},Pe)}};j(he,de=>{e(m)?de(je):de(le,!1)})}we(2),t(ve);var _e=s(ve,2),Ne=r(_e);{var ze=de=>{var Pe=tt("Checking...");f(de,Pe)},Ae=(de,Pe)=>{{var Se=ue=>{var Ge=tt("Connected");f(ue,Ge)},Be=ue=>{var Ge=tt("Disconnected");f(ue,Ge)};j(de,ue=>{N()?ue(Se):ue(Be,!1)},Pe)}};j(Ne,de=>{e(m)?de(ze):de(Ae,!1)})}t(_e),t(ne);var z=s(ne,2),We=r(z);const lt=Ve(()=>e(m)?"animate-spin ":"");qr(We,{size:18,get class(){return`mr-2 ${e(lt)??""}`}});var Ue=s(We);t(z);var Ee=s(z,2),Te=r(Ee);Kt(Te,{size:18,class:"mr-2"}),we(),t(Ee);var Ie=s(Ee,2),ct=r(Ie);Kt(ct,{size:18,class:"mr-2"}),we(),t(Ie),t(re),t(U),t(q),X(()=>{z.disabled=e(m),F(Ue,` ${(e(m)?"Reconnecting...":"Reconnect Printer")??""}`)}),A("click",K,()=>i(a,!1)),A("click",z,$),A("click",Ee,P),A("click",Ie,R),f(_,q)};j(M,_=>{e(a)&&_(L)})}X(()=>{Mr(J,"title",N()?"Printer connected":"Printer disconnected"),te.disabled=n().length===0,F(xe,` Print Selected (${n().length??""})`)}),be(B,x),A("click",te,()=>{b(!0)}),A("click",S,function(..._){var q;(q=u())==null||q.apply(this,_)}),A("click",O,()=>{d(!0)}),A("click",ae,()=>i(a,!0)),f(l,V),at()}var Yr=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),Xr=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),es=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),ts=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Zero</span>'),rs=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Zero</span>'),ss=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),as=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),ls=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),os=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),is=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Zero</span>'),ns=k('<span class="ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full">Empty</span>'),ds=k(`<div class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">SKU</label> <!></div> <input type="text"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">IM SKU</label> <!></div> <input type="text"></div></div> <div class="flex gap-3"><div class="w-[80%]"><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Product Name</label> <!></div> <input type="text"></div> <div class="w-[20%]"><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700 text-left w-full">Qty</label></div> <input type="number" min="1" step="1" class="text-black w-full px-2 py-2.5 rounded-lg border border-gray-300 text-center
                                    focus:ring-2 focus:ring-blue-500 focus:border-blue-500 svelte-1mfa054"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="text-black block text-sm font-medium text-gray-700">Selling Price (£)</label> <!></div> <input type="number" step="0.01"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Purchase Price (£)</label> <!></div> <input type="number" step="0.01"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Seller</label> <!></div> <input type="text"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Location</label> <!></div> <input type="text"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Date Bought</label> <!></div> <input type="text"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Date Sold</label> <!></div> <input type="text"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Commission (£)</label> <!></div> <input type="number" step="0.01"></div> <div><div class="flex items-center mb-1"><label class="block text-sm font-medium text-gray-700">Invoice No</label> <!></div> <input type="text"></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><label class="block text-sm font-medium text-gray-700 mb-1">On Website</label> <div class="flex items-center mt-2"><input type="checkbox" id="onWebsite" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded svelte-1mfa054"> <label for="onWebsite" class="ml-2 block text-sm text-gray-900">Published on website</label></div></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">Sold Status</label> <div class="flex items-center"><input type="checkbox" id="soldCheckbox" class="text-black h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded svelte-1mfa054"> <label for="soldCheckbox" class="ml-2 block text-sm text-gray-900">Mark as sold</label></div></div></div> <div class="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg svelte-1mfa054"><div class="flex items-center text-yellow-800"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <span class="font-medium">Note on empty fields</span></div> <p class="text-sm text-yellow-700 mt-2">Yellow highlighted fields are empty or contain zero values. These fields are not required, 
                            but you may want to review them before saving.</p></div></div>`),cs=k('<svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white svelte-1mfa054" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span class="text-white">Saving...</span>',1),vs=k('<span class="text-white"> </span>'),us=k('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"><div class="p-6 border-b flex justify-between items-center"><h2 class="text-xl font-bold text-gray-800"></h2> <button class="text-gray-400 hover:text-gray-600 svelte-1mfa054"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex-1 overflow-y-auto p-6"><!></div> <div class="p-6 border-t flex justify-end space-x-3"><button class="px-5 py-2.5 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50 svelte-1mfa054">Cancel</button> <button><!></button></div></div></div>');function Qt(l,o){st(o,!1);let x=H(o,"show",12,!1),u=H(o,"products",24,()=>[]),b=H(o,"fetchProducts",8),d=H(o,"product",8,null);console.log("Selected Product: ",d());let n=E(!1),y=null;const N=!!d();function I(S){const T=S.match(/^(\d+)-(\d+)$/);if(!T)return S;let[O,ie,ae]=T,g=parseInt(ae,10);if(g===999)return`${parseInt(ie,10)+1}-00`;g+=1;const M=ae.length;return`${ie}-${g.toString().padStart(M,"0")}`}function C(){var T,O;const S=((O=(T=u())==null?void 0:T[u().length-1])==null?void 0:O.sku_no)??"0";return{sku_no:I(S),im_sku:"",item_description:"",selling_price:0,purchase_price:0,seller_name_address:"",date_bought:"",sold:!1,commission:0,date_sold:"",invoice_no_xero:"",on_website:!1,location:"",quantity:1,photograph:""}}let a=E(N?JSON.parse(JSON.stringify(d())):C());er(()=>{N&&(y=JSON.parse(JSON.stringify(e(a))))});function m(S){return S===""||S===0||S==null}function $(){return JSON.stringify(y)!==JSON.stringify(e(a))}async function P(){i(n,!0);try{if(!(await fetch(dt+(N?"/stock/modify-product":"/stock/add-product"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e(a))})).ok)throw new Error("Request failed");yt.success(N?"Product updated successfully!":"Product added successfully!"),x(!1),b()()}catch(S){console.error(S),yt.error("Failed to save product")}finally{i(n,!1)}}rt();var R=us(),V=r(R),h=r(V),w=r(h);w.textContent=`${(N?"Edit":"Add")??""} Product`;var B=s(w,2);t(h);var W=s(h,2),D=r(W);{var ee=S=>{var T=ds(),O=r(T),ie=r(O),ae=r(ie),g=s(r(ae),2);{var M=v=>{var G=Yr();f(v,G)};j(g,v=>{m(e(a).sku_no)&&v(M)})}t(ae);var L=s(ae,2);Y(L),L.disabled=N,t(ie);var _=s(ie,2),q=r(_),U=s(r(q),2);{var Q=v=>{var G=Xr();f(v,G)};j(U,v=>{m(e(a).im_sku)&&v(Q)})}t(q);var K=s(q,2);Y(K),t(_),t(O);var re=s(O,2),ne=r(re),ve=r(ne),he=s(r(ve),2);{var je=v=>{var G=es();f(v,G)};j(he,v=>{m(e(a).item_description)&&v(je)})}t(ve);var le=s(ve,2);Y(le),t(ne);var _e=s(ne,2),Ne=s(r(_e),2);Y(Ne),t(_e),t(re);var ze=s(re,2),Ae=r(ze),z=r(Ae),We=s(r(z),2);{var lt=v=>{var G=ts();f(v,G)};j(We,v=>{e(a).selling_price===0&&v(lt)})}t(z);var Ue=s(z,2);Y(Ue),t(Ae);var Ee=s(Ae,2),Te=r(Ee),Ie=s(r(Te),2);{var ct=v=>{var G=rs();f(v,G)};j(Ie,v=>{e(a).purchase_price===0&&v(ct)})}t(Te);var de=s(Te,2);Y(de),t(Ee),t(ze);var Pe=s(ze,2),Se=r(Pe),Be=r(Se),ue=s(r(Be),2);{var Ge=v=>{var G=ss();f(v,G)};j(ue,v=>{m(e(a).seller_name_address)&&v(Ge)})}t(Be);var Ye=s(Be,2);Y(Ye),t(Se);var vt=s(Se,2),Oe=r(vt),$t=s(r(Oe),2);{var Nt=v=>{var G=as();f(v,G)};j($t,v=>{m(e(a).location)&&v(Nt)})}t(Oe);var ot=s(Oe,2);Y(ot),t(vt),t(Pe);var ut=s(Pe,2),pt=r(ut),ft=r(pt),c=s(r(ft),2);{var p=v=>{var G=ls();f(v,G)};j(c,v=>{m(e(a).date_bought)&&v(p)})}t(ft);var ce=s(ft,2);Y(ce),t(pt);var pe=s(pt,2),ye=r(pe),fe=s(r(ye),2);{var $e=v=>{var G=os();f(v,G)};j(fe,v=>{m(e(a).date_sold)&&v($e)})}t(ye);var Ce=s(ye,2);Y(Ce),t(pe),t(ut);var Ke=s(ut,2),Xe=r(Ke),it=r(Xe),bt=s(r(it),2);{var zt=v=>{var G=is();f(v,G)};j(bt,v=>{e(a).commission===0&&v(zt)})}t(it);var et=s(it,2);Y(et),t(Xe);var Ct=s(Xe,2),nt=r(Ct),gt=s(r(nt),2);{var mt=v=>{var G=ns();f(v,G)};j(gt,v=>{m(e(a).invoice_no_xero)&&v(mt)})}t(nt);var Je=s(nt,2);Y(Je),t(Ct),t(Ke);var St=s(Ke,2),xt=r(St),ht=s(r(xt),2),_t=r(ht);Y(_t),we(2),t(ht),t(xt);var De=s(xt,2),jt=s(r(De),2),Et=r(jt);Y(Et),we(2),t(jt),t(De),t(St),we(2),t(T),X((v,G,sr,ar,lr,or,ir,nr)=>{se(L,1,v,"svelte-1mfa054"),se(K,1,G,"svelte-1mfa054"),K.disabled=e(n),se(le,1,sr,"svelte-1mfa054"),se(Ue,1,`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                    ${e(a).selling_price===0?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,"svelte-1mfa054"),Ue.disabled=e(n),se(de,1,`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                    ${e(a).purchase_price===0?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,"svelte-1mfa054"),de.disabled=e(n),se(Ye,1,ar,"svelte-1mfa054"),Ye.disabled=e(n),se(ot,1,lr,"svelte-1mfa054"),ot.disabled=e(n),se(ce,1,or,"svelte-1mfa054"),ce.disabled=e(n),se(Ce,1,ir,"svelte-1mfa054"),Ce.disabled=e(n),se(et,1,`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                    ${e(a).commission===0?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,"svelte-1mfa054"),et.disabled=e(n),se(Je,1,nr,"svelte-1mfa054"),Je.disabled=e(n),_t.disabled=e(n),Et.disabled=e(n)},[()=>`text-black/50 w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                    ${m(e(a).sku_no)?"border-yellow-400 bg-yellow-50":"border-gray-300 bg-gray-100"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                    ${m(e(a).im_sku)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                    ${m(e(a).item_description)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                    ${m(e(a).seller_name_address)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                    ${m(e(a).location)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                    ${m(e(a).date_bought)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                    ${m(e(a).date_sold)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`,()=>`text-black w-full px-4 py-2.5 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                                    ${m(e(a).invoice_no_xero)?"border-yellow-400 bg-yellow-50":"border-gray-300"}`],Ve),be(L,()=>e(a).sku_no,v=>ke(a,e(a).sku_no=v)),be(K,()=>e(a).im_sku,v=>ke(a,e(a).im_sku=v)),be(le,()=>e(a).item_description,v=>ke(a,e(a).item_description=v)),be(Ne,()=>e(a).quantity,v=>ke(a,e(a).quantity=v)),be(Ue,()=>e(a).selling_price,v=>ke(a,e(a).selling_price=v)),be(de,()=>e(a).purchase_price,v=>ke(a,e(a).purchase_price=v)),be(Ye,()=>e(a).seller_name_address,v=>ke(a,e(a).seller_name_address=v)),be(ot,()=>e(a).location,v=>ke(a,e(a).location=v)),be(ce,()=>e(a).date_bought,v=>ke(a,e(a).date_bought=v)),be(Ce,()=>e(a).date_sold,v=>ke(a,e(a).date_sold=v)),be(et,()=>e(a).commission,v=>ke(a,e(a).commission=v)),be(Je,()=>e(a).invoice_no_xero,v=>ke(a,e(a).invoice_no_xero=v)),wt(_t,()=>e(a).on_website,v=>ke(a,e(a).on_website=v)),wt(Et,()=>e(a).sold,v=>ke(a,e(a).sold=v)),f(S,T)};j(D,S=>{e(a)&&S(ee)})}t(W);var J=s(W,2),Z=r(J),oe=s(Z,2);let ge;var te=r(oe);{var me=S=>{var T=cs();we(2),f(S,T)},xe=S=>{var T=vs(),O=r(T,!0);t(T),X(()=>F(O,d()?"Save Changes":"Add Product")),f(S,T)};j(te,S=>{e(n)?S(me):S(xe,!1)})}t(oe),t(J),t(V),t(R),X((S,T)=>{B.disabled=e(n),Z.disabled=e(n),ge=se(oe,1,"px-5 py-2.5 rounded-lg flex items-center justify-center min-w-[120px] disabled:opacity-50 disabled:cursor-not-allowed svelte-1mfa054",null,ge,S),oe.disabled=T},[()=>({"bg-blue-600":!e(n)&&$(),"bg-gray-400":!$()||e(n),"hover:bg-blue-700":!e(n)&&$()}),()=>!$()||e(n)],Ve),A("click",B,()=>{x(!1)}),A("click",Z,()=>{x(!1)}),A("click",oe,P),f(l,R),at()}var ps=k('<div class="space-y-6"><div><label class="block text-sm font-medium text-gray-700 mb-1">SKU</label> <input type="text" class="text-black/50 w-full px-4 py-2.5 rounded-lg border border-gray-300 bg-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-not-allowed" disabled></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">Product Name</label> <input type="text" class="text-black w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div> <div><label class="text-black block text-sm font-medium text-gray-700 mb-1">Selling Price (£)</label> <input type="number" step="0.01" class="text-black w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></div></div>'),fs=k('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"><div class="p-6 border-b flex justify-between items-center"><h2 class="text-xl font-bold text-gray-800">Edit Product</h2> <button class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex-1 overflow-y-auto p-6"><!></div> <div class="p-6 border-t flex justify-end space-x-3"><button class="px-5 py-2.5 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50">Cancel</button> <button class="px-5 py-2.5 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700">Save Changes</button></div></div></div>');function bs(l,o){st(o,!1);let x=H(o,"showEditPrintModal",12),u=H(o,"editedProduct",12),b=H(o,"selectedProducts",12);function d(){u()&&(b((b()??[]).map(V=>V.sku_no===u().sku_no?u():V)),u(null),x(!1))}rt();var n=fs(),y=r(n),N=r(y),I=s(r(N),2);t(N);var C=s(N,2),a=r(C);{var m=V=>{var h=ps(),w=r(h),B=s(r(w),2);Y(B),t(w);var W=s(w,2),D=s(r(W),2);Y(D),t(W);var ee=s(W,2),J=s(r(ee),2);Y(J),t(ee),t(h),be(B,()=>u().sku_no,Z=>u(u().sku_no=Z,!0)),be(D,()=>u().item_description,Z=>u(u().item_description=Z,!0)),be(J,()=>u().selling_price,Z=>u(u().selling_price=Z,!0)),f(V,h)};j(a,V=>{u()&&V(m)})}t(C);var $=s(C,2),P=r($),R=s(P,2);t($),t(y),t(n),A("click",I,()=>{x(!1)}),A("click",P,()=>{x(!1)}),A("click",R,d),f(l,n),at()}var gs=k('<div class="flex items-center justify-between mt-1"><button type="button" class="bg-white text-gray-600 hover:bg-gray-100 border border-gray-300 rounded p-1 h-6 w-6 flex items-center justify-center text-lg">-</button> <span class="text-xs font-medium text-gray-700"> </span> <button type="button" class="bg-white text-gray-600 hover:bg-gray-100 border border-gray-300 rounded p-1 h-6 w-6 flex items-center justify-center text-lg">+</button></div>'),ms=k('<p class="text-xs text-green-600">No print copy</p>'),xs=k('<div class="flex items-center mt-2 text-red-600"><svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <p class="text-sm font-medium"> </p></div>'),hs=k('<p class="mt-1 text-sm text-purple-600">The receipt will be sent to this email address.</p>'),_s=k('<div><p class="block text-sm font-medium text-purple-700 mb-2">Email Address <span class="text-red-500">*</span></p> <input id="emailAddress" type="email" placeholder="Enter customer email address" required> <!></div>'),ys=k('<p class="text-sm text-gray-500 mt-1">Click the X button to remove items from the list</p>'),ws=k('<span class="ml-2 px-2 py-0.5 bg-red-100 text-red-800 text-xs rounded-full">Sold</span>'),ks=k('<div><div class="flex-1 min-w-0"><div class="flex items-center"><h3 class="font-semibold text-gray-800 truncate"> </h3> <!></div> <div class="flex items-center mt-1 text-sm"><span class="font-medium text-blue-600"> </span> <span class="mx-2 text-gray-300">•</span> <span class="text-gray-600 truncate"> </span></div></div> <div class="flex items-center space-x-2"><div class="flex items-center border border-gray-300 rounded-lg overflow-hidden"><button class="px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 disabled:opacity-50" aria-label="Decrease quantity">−</button> <span class="px-4 py-1 text-sm font-medium text-gray-800 min-w-[2rem] text-center"> </span> <button class="px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700" aria-label="Increase quantity">+</button></div> <button class="p-2 bg-blue-50 rounded-full hover:bg-blue-100 transition-colors flex items-center group" title="Edit Print Info"><svg class="w-5 h-5 text-blue-600 group-hover:text-blue-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg> <span class="ml-1 text-sm font-medium text-blue-600 group-hover:text-blue-800 hidden md:inline">Edit</span></button> <button class="p-2 bg-red-50 rounded-full hover:bg-red-100 transition-colors flex items-center group" title="Remove from list"><svg class="w-5 h-5 text-red-500 group-hover:text-red-700" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> <span class="ml-1 text-sm font-medium text-red-500 group-hover:text-red-700 hidden md:inline">Remove</span></button></div> <div class="flex items-center space-x-2"></div></div>'),Ps=k('<div class="text-center py-8"><svg class="w-16 h-16 mx-auto text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"></path></svg> <h3 class="mt-4 text-lg font-medium text-gray-900">No products selected</h3> <p class="mt-1 text-gray-500">Select items from your inventory to print receipts</p></div>'),Ms=k('<svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span class="text-white">Processing...</span>',1),$s=k('<span class="text-white"> </span>'),Cs=k('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"><div class="p-6 border-b flex justify-between items-center"><h2 class="text-xl font-bold text-gray-800">Print Receipts</h2> <button class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex-1 overflow-y-auto p-6"><div class="mb-6"><label for="customerName" class="block text-sm font-medium text-gray-700 mb-2">Customer Name (Optional)</label> <input id="customerName" type="text" placeholder="Enter customer name for receipt" class="w-full px-4 py-2 border text-black border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"> <p class="mt-1 text-sm text-gray-500">The customer name will be printed on the receipt if provided.</p></div> <div class="mb-6"><div class="grid grid-cols-3 gap-3"><div class="p-3 bg-purple-50 rounded-lg border border-purple-200 cursor-pointer h-full"><div class="flex items-center justify-between mb-2"><div class="flex items-center"><input id="emailReceipt" type="checkbox" class="h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"> <p class="ml-2 block text-sm font-medium text-gray-700">Email Receipt</p></div> <svg class="w-4 h-4 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div> <p class="text-xs text-purple-600"><!></p></div>  <div class="p-3 bg-blue-50 rounded-lg border border-blue-200 cursor-pointer h-full"><div class="flex items-center justify-between mb-2"><div class="flex items-center"><input id="markAsSold" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"> <p class="ml-2 block text-sm font-medium text-gray-700">Mark as Sold</p></div> <svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <p class="text-xs text-blue-600"><!></p></div>  <div class="p-3 bg-green-50 rounded-lg border border-green-200 cursor-pointer h-full"><div class="flex items-center justify-between mb-2"><div class="flex items-center"><input id="printReceipt" type="checkbox" class="h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"> <p class="ml-2 block text-sm font-medium text-gray-700">Print Receipt</p></div> <svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2z"></path></svg></div> <!></div></div></div> <!> <div><div class="mb-4"><p class="text-gray-600"> </p> <!></div> <div class="space-y-3"></div> <div class="mt-6 p-4 bg-gray-100 border border-gray-300 rounded-lg flex justify-between items-center"><span class="text-lg font-medium text-gray-700">Total</span> <span class="text-xl font-bold text-gray-900"> </span></div></div></div> <div class="p-6 border-t flex justify-end space-x-3"><button class="px-5 py-2.5 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50">Back</button> <button><!></button></div></div></div> <!>',1);function Ss(l,o){st(o,!1);const x=E(),u=E();let b=H(o,"showPrintModal",12),d=H(o,"selectedProducts",12),n=H(o,"products",12),y=E(!1),N=E(!1),I=E(null),C=E(""),a=E(!0),m=E(!0),$=E(!1),P=E(""),R=E(""),V=E(""),h=E(1);function w(c){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c)}function B(c){const p=c.currentTarget;if(i(P,p.value),!e(P)){i(R,"");return}w(e(P))?i(R,""):i(R,"Please enter a valid email address")}async function W(){if(e($)&&e(P)&&!w(e(P))){i(R,"Please enter a valid email address");return}i(y,!0);try{const c={products:d(),customer_name:e(C),email_address:e(P),mark_as_sold:e(a),copies:e(m)?e(h):0},p=await fetch(dt+"/sales/print-request",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(c)}),ce=await p.json();if(!p.ok){const ye=ce.detail||ce.error||`HTTP error! status: ${p.status}`;console.error("Print request failed:",ye),yt.error(ye);return}if(e(a)){const ye=new Set(d().map(fe=>fe.sku_no));n(n().map(fe=>ye.has(fe.sku_no)?{...fe,sold:!0}:fe)),d(d().map(fe=>({...fe,sold:!0})))}let pe=`Successfully processed ${d().length} item(s)!`;e(m)&&(pe+=` Printed ${e(h)} copy(s).`),e($)&&e(P)&&(pe+=` Email sent to ${e(P)}.`),e(a)&&(pe+=" Items marked as sold."),yt.success(pe),d([]),i(C,""),i(a,!0),i(m,!0),i($,!1),i(P,""),i(R,""),b(!1)}catch(c){console.error("Failed to process request",c);const p=c instanceof Error?c.message:"Failed to process request. Please check the console for details.";yt.error(p)}finally{i(y,!1)}}function D(c){d(d().filter(p=>p.sku_no!==c.sku_no))}He(()=>(e(m),e(h),e($),e(a)),()=>{i(x,(()=>{const c=[];return e(m)&&c.push(`Print${e(h)>1?` (${e(h)})`:""}`),e($)&&c.push("Email"),e(a)&&c.push("Mark Sold"),c.length===0?"Confirm":c.join(" & ")})())}),He(()=>(e($),e(P)),()=>{e($)&&e(P)&&!w(e(P))?i(R,"Please enter a valid email address"):e($)&&!e(P)?i(R,"Email address is required"):i(R,"")}),He(()=>e($),()=>{e($)||i(R,"")}),He(()=>Rt(d()),()=>{i(u,d().reduce((c,p)=>c+p.selling_price*p.quantity,0))}),Ot(),rt();var ee=Cs(),J=Me(ee),Z=r(J),oe=r(Z),ge=s(r(oe),2);t(oe);var te=s(oe,2),me=r(te),xe=s(r(me),2);Y(xe),we(2),t(me);var S=s(me,2),T=r(S),O=r(T),ie=r(O),ae=r(ie),g=r(ae);Y(g),we(2),t(ae),we(2),t(ie);var M=s(ie,2),L=r(M);{var _=c=>{var p=tt("Email receipt will be sent");f(c,p)},q=c=>{var p=tt("No email receipt");f(c,p)};j(L,c=>{e($)?c(_):c(q,!1)})}t(M),t(O);var U=s(O,2),Q=r(U),K=r(Q),re=r(K);Y(re),we(2),t(K),we(2),t(Q);var ne=s(Q,2),ve=r(ne);{var he=c=>{var p=tt("Items will be marked as sold");f(c,p)},je=c=>{var p=tt("Items remain available");f(c,p)};j(ve,c=>{e(a)?c(he):c(je,!1)})}t(ne),t(U);var le=s(U,2),_e=r(le),Ne=r(_e),ze=r(Ne);Y(ze),we(2),t(Ne),we(2),t(_e);var Ae=s(_e,2);{var z=c=>{var p=gs(),ce=r(p),pe=s(ce,2),ye=r(pe);t(pe);var fe=s(pe,2);t(p),X(()=>{ce.disabled=e(h)<=1,F(ye,`${e(h)??""} ${(e(h)===1?"copy":"copies")??""}`),fe.disabled=e(h)>=10}),A("click",ce,Tt(()=>e(h)>1?Wt(h,-1):null)),A("click",fe,Tt(()=>e(h)<10?Wt(h):null)),f(c,p)},We=c=>{var p=ms();f(c,p)};j(Ae,c=>{e(m)?c(z):c(We,!1)})}t(le),t(T),t(S);var lt=s(S,2);{var Ue=c=>{var p=_s(),ce=s(r(p),2);Y(ce);var pe=s(ce,2);{var ye=$e=>{var Ce=xs(),Ke=s(r(Ce),2),Xe=r(Ke,!0);t(Ke),t(Ce),X(()=>F(Xe,e(R))),f($e,Ce)},fe=$e=>{var Ce=hs();f($e,Ce)};j(pe,$e=>{e(R)?$e(ye):$e(fe,!1)})}t(p),X(()=>{se(p,1,`mb-6 p-4 bg-purple-50 rounded-lg border ${(e(R)?"border-red-300":"border-purple-200")??""}`),$r(ce,e(P)),se(ce,1,`w-full px-4 py-2 border text-black ${(e(R)?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-purple-300 focus:ring-purple-500 focus:border-purple-500")??""} rounded-lg focus:ring-2`)}),A("input",ce,B),f(c,p)};j(lt,c=>{e($)&&c(Ue)})}var Ee=s(lt,2),Te=r(Ee),Ie=r(Te),ct=r(Ie);t(Ie);var de=s(Ie,2);{var Pe=c=>{var p=ys();f(c,p)};j(de,c=>{d().length>0&&c(Pe)})}t(Te);var Se=s(Te,2);Pt(Se,5,d,Mt,(c,p,ce)=>{var pe=ks(),ye=r(pe),fe=r(ye),$e=r(fe),Ce=r($e,!0);t($e);var Ke=s($e,2);{var Xe=De=>{var jt=ws();f(De,jt)};j(Ke,De=>{e(p).sold&&De(Xe)})}t(fe);var it=s(fe,2),bt=r(it),zt=r(bt);t(bt);var et=s(bt,4),Ct=r(et,!0);t(et),t(it),t(ye);var nt=s(ye,2),gt=r(nt),mt=r(gt),Je=s(mt,2),St=r(Je,!0);t(Je);var xt=s(Je,2);t(gt);var ht=s(gt,2),_t=s(ht,2);t(nt),we(2),t(pe),X(De=>{se(pe,1,`flex items-center p-3 border border-gray-300 rounded-lg hover:bg-gray-50
                ${e(p).sold?"bg-red-50 border-red-200":""}`),F(Ce,e(p).item_description),F(zt,`£${De??""}`),F(Ct,e(p).sku_no),mt.disabled=e(p).quantity<=1,F(St,e(p).quantity)},[()=>e(p).selling_price.toFixed(2)],Ve),A("click",mt,()=>(e(p).quantity=Math.max(1,e(p).quantity-1),At(()=>d()))),A("click",xt,()=>(e(p).quantity+=1,At(()=>d()))),A("click",ht,()=>{i(I,e(p)),i(N,!0)}),A("click",_t,()=>D(e(p))),f(c,pe)},c=>{var p=Ps();f(c,p)}),t(Se);var Be=s(Se,2),ue=s(r(Be),2),Ge=r(ue);t(ue),t(Be),t(Ee),t(te);var Ye=s(te,2),vt=r(Ye),Oe=s(vt,2);let $t;var Nt=r(Oe);{var ot=c=>{var p=Ms();we(2),f(c,p)},ut=c=>{var p=$s(),ce=r(p,!0);t(p),X(()=>F(ce,e(x))),f(c,p)};j(Nt,c=>{e(y)?c(ot):c(ut,!1)})}t(Oe),t(Ye),t(Z),t(J);var pt=s(J,2);{var ft=c=>{bs(c,{get showEditPrintModal(){return e(N)},set showEditPrintModal(p){i(N,p)},get editedProduct(){return e(I)},set editedProduct(p){i(I,p)},get selectedProducts(){return d()},set selectedProducts(p){d(p)},$$legacy:!0})};j(pt,c=>{e(N)&&c(ft)})}X((c,p)=>{F(ct,`You're about to process ${d().length??""} products.`),F(Ge,`£${c??""}`),$t=se(Oe,1,"px-5 py-2.5 rounded-lg flex items-center justify-center min-w-[120px] disabled:opacity-50 disabled:cursor-not-allowed",null,$t,p),Oe.disabled=e(y)||d().length===0||!e($)&&!e(a)&&!e(m)||e($)&&(!e(P)||!!e(R))},[()=>e(u).toFixed(2),()=>({"bg-blue-600":!e(y),"bg-gray-400":e(y),"hover:bg-blue-700":!e(y)})],Ve),A("click",ge,()=>{b(!1),i(C,""),i(a,!0),i(m,!0),i($,!1),i(P,""),i(R,""),i(V,""),i(h,1)}),be(xe,()=>e(C),c=>i(C,c)),wt(g,()=>e($),c=>i($,c)),A("click",O,()=>{i($,!e($))}),wt(re,()=>e(a),c=>i(a,c)),A("click",U,()=>{i(a,!e(a))}),wt(ze,()=>e(m),c=>i(m,c)),A("click",le,()=>{i(m,!e(m))}),A("click",vt,()=>{b(!1),i(C,""),i(a,!0),i(m,!0),i($,!1),i(P,""),i(R,""),i(V,""),i(h,1)}),A("click",Oe,W),f(l,ee),at()}var js=k('<div class="flex justify-center items-center h-64"><div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"></div> <span class="ml-3 text-gray-600">Loading products...</span></div>'),Ns=k('<div class="bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-red-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><p class="text-sm text-red-700"> </p> <button class="mt-2 px-3 py-1 bg-red-100 text-red-700 rounded text-sm hover:bg-red-200">Retry</button></div></div></div>'),zs=k('<!> <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"><div class="bg-white rounded-xl shadow p-5"><div class="text-gray-500 flex items-center"><svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg> <span class="font-medium">Total Items</span></div> <div class="text-3xl text-black font-bold mt-2"> </div></div> <div class="bg-white rounded-xl shadow p-5"><div class="text-gray-500 flex items-center"><svg class="w-6 h-6 mr-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="font-medium">Available</span></div> <div class="text-3xl font-bold mt-2 text-black"> </div></div> <div class="bg-white rounded-xl shadow p-5"><div class="text-gray-500 flex items-center"><svg class="w-6 h-6 mr-2 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="font-medium">Sold</span></div> <div class="text-3xl font-bold mt-2 text-black"> </div></div></div> <!>',1),Es=k('<button class="fab-enter fixed bottom-6 right-6 z-50 p-4 bg-blue-600 rounded-full shadow-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 text-white flex items-center justify-center svelte-7fy406"><!> <span class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center"> </span></button>'),Bs=k('<div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 p-4 md:p-8"><div class="max-w-7xl mx-auto"><div class="mb-8 text-center pt-8 text-[#011993]"><h1 class="text-6xl font-engraved ">Iain Marr Antiques</h1> <p class="text-gray-600 mt-2">Inventory Management System</p></div> <!></div> <!> <!> <!> <!></div>');function Is(l,o){st(o,!1);const x=E(),u=E();let b=E([]),d=E([]),n=E(""),y=E(!1),N=E(!1),I=E(null),C=E(!1),a=E(!1),m=E(null),$=E(!0),P=E({key:"sku_no",direction:"asc"}),R=E([{id:"row_number",name:"SKU"},{id:"item_description",name:"Name"},{id:"selling_price",name:"Price"}]),V=E(!1);async function h(){try{i(a,!0),i(m,null);const g=await fetch(`${dt}/stock/get-stock`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!g.ok)throw new Error(`HTTP error! status: ${g.status}`);const M=await g.json();i(V,M.printer_connected),i(b,M.data)}catch(g){console.error(g),i(m,"Failed to load products. Please try again later.")}finally{i(a,!1)}}er(h);function w(g){const M=e(P).key===g&&e(P).direction==="asc"?"desc":"asc";i(P,{key:g,direction:M})}function B(g){let M={...g,quantity:1};M.quantity=1,e(d).some(L=>L.sku_no===g.sku_no)?i(d,e(d).filter(L=>L.sku_no!==g.sku_no)):i(d,[...e(d),M])}function W(g){i(I,{...g}),i(y,!0)}function D(){i(C,!0)}He(()=>(e(b),e(P)),()=>{i(x,[...e(b)].sort((g,M)=>{const L=g[e(P).key],_=M[e(P).key];return typeof L=="number"&&typeof _=="number"?e(P).direction==="asc"?L-_:_-L:typeof L=="string"&&typeof _=="string"?e(P).direction==="asc"?L.localeCompare(_):_.localeCompare(L):0}))}),He(()=>(e(x),e($),e(n)),()=>{i(u,e(x).filter(g=>(e($)||!g.sold)&&(g.item_description.toLowerCase().includes(e(n).toLowerCase())||g.im_sku.toLowerCase().includes(e(n).toLowerCase())||g.sku_no.toLowerCase().includes(e(n).toLowerCase())||g.seller_name_address.toLowerCase().includes(e(n).toLowerCase())||g.location.toLowerCase().includes(e(n).toLowerCase()))))}),Ot(),rt();var ee=Bs();vr(g=>{kr.title="Iain Marr Antiques"});var J=r(ee),Z=s(r(J),2);{var oe=g=>{var M=js();f(g,M)},ge=(g,M)=>{{var L=q=>{var U=Ns(),Q=r(U),K=s(r(Q),2),re=r(K),ne=r(re,!0);t(re);var ve=s(re,2);t(K),t(Q),t(U),X(()=>F(ne,e(m))),A("click",ve,h),f(q,U)},_=q=>{var U=zs(),Q=Me(U);Gr(Q,{handleSort:w,fetchProducts:h,get printerConnected(){return e(V)},set printerConnected(z){i(V,z)},get sortConfig(){return e(P)},set sortConfig(z){i(P,z)},get sortOptions(){return e(R)},set sortOptions(z){i(R,z)},get showAddProductModal(){return e(N)},set showAddProductModal(z){i(N,z)},get searchTerm(){return e(n)},set searchTerm(z){i(n,z)},get showPrintModal(){return e(C)},set showPrintModal(z){i(C,z)},get selectedProducts(){return e(d)},set selectedProducts(z){i(d,z)},$$legacy:!0});var K=s(Q,2),re=r(K),ne=s(r(re),2),ve=r(ne,!0);t(ne),t(re);var he=s(re,2),je=s(r(he),2),le=r(je,!0);t(je),t(he);var _e=s(he,2),Ne=s(r(_e),2),ze=r(Ne,!0);t(Ne),t(_e),t(K);var Ae=s(K,2);Wr(Ae,{toggleProduct:B,openEditModal:W,get filteredProducts(){return e(u)},set filteredProducts(z){i(u,z)},get selectedProducts(){return e(d)},set selectedProducts(z){i(d,z)},get showSoldItems(){return e($)},set showSoldItems(z){i($,z)},$$legacy:!0}),X((z,We)=>{F(ve,e(b).length),F(le,z),F(ze,We)},[()=>e(b).filter(z=>!z.sold).length,()=>e(b).filter(z=>z.sold).length],Ve),f(q,U)};j(g,q=>{e(m)?q(L):q(_,!1)},M)}};j(Z,g=>{e(a)?g(oe):g(ge,!1)})}t(J);var te=s(J,2);{var me=g=>{var M=Es(),L=r(M);rr(L,{size:30});var _=s(L,2),q=r(_,!0);t(_),t(M),X(()=>F(q,e(d).length)),A("click",M,D),f(g,M)};j(te,g=>{e(d).length>0&&g(me)})}var xe=s(te,2);{var S=g=>{Qt(g,{fetchProducts:h,get show(){return e(y)},set show(M){i(y,M)},get product(){return e(I)},set product(M){i(I,M)},$$legacy:!0})};j(xe,g=>{e(y)&&g(S)})}var T=s(xe,2);{var O=g=>{Qt(g,{product:null,fetchProducts:h,get show(){return e(N)},set show(M){i(N,M)},get products(){return e(b)},set products(M){i(b,M)},$$legacy:!0})};j(T,g=>{e(N)&&g(O)})}var ie=s(T,2);{var ae=g=>{Ss(g,{get selectedProducts(){return e(d)},set selectedProducts(M){i(d,M)},get showPrintModal(){return e(C)},set showPrintModal(M){i(C,M)},get products(){return e(b)},set products(M){i(b,M)},$$legacy:!0})};j(ie,g=>{e(C)&&g(ae)})}t(ee),f(l,ee),at()}export{Is as component};
